
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Cookieæ˜¯æ’’(&sessionï¼‰ - iOSæ¢¦å·¥å‚</title>
  <meta name="author" content="iCocos">

  
  <meta name="description" content="iCocosåšå®¢">
  <meta name="keywords" content="iCocos, iOSå¼€å‘, åšå®¢, æŠ€æœ¯åˆ†æ, æ–‡ç« , å­¦ä¹ , æ›¹é», æ›¹ç†é¹">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://al1020119.github.io/blog/2016/01/22/cookie-session/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iOSæ¢¦å·¥å‚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iOSæ¢¦å·¥å‚</a></h1>
  
    <h2>iCocosâ€”â€”ä¸æˆ˜èƒœè‡ªå·±ï¼Œä½•ä»¥æ”¹å˜æœªæ¥ï¼</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="al1020119.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">åšæ–‡</a></li>
  <li><a href="/blog/archives">å½’æ¡£</a></li>
  <li><a href="/icocos">iCocos</a></li>
  <li><a href="/about">æ–‡ç« </a></li>
  <li><a href="/other">å…¶ä»–</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Cookieæ˜¯æ’’(&sessionï¼‰</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-01-22T13:32:08+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2016</span></span> <span class='time'>1:32 pm</span></time>
        
        
        |   <a href="#comments">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>å¼•è¨€ï¼š</p>

<ol>
<li><p>ç®€å•è¯´ä¸ç®¡æ˜¯NSURLConnectionè¿˜æ˜¯UIWebViewéƒ½ä¼šä¿ç•™å¹¶ä¼ é€’æœåŠ¡ç«¯çš„cookieï¼Œé‡å¯è¿›ç¨‹ï¼Œæˆ–é‡å¯ç³»ç»Ÿcookieéƒ½åœ¨åº”ç”¨ä¸­ã€‚</p></li>
<li><p>å¤šä¸ªåº”ç”¨é—´é»˜è®¤æ˜¯ä¸å…±äº¨cookieçš„</p></li>
<li><p>åˆ é™¤é‡è£…åº”ç”¨cookieä¼šè¢«æ¸…é™¤</p></li>
</ol>


<h4>ä¸€. Cookieä»‹ç»</h4>

<p>Cookieæ˜¯åœ¨å®¢æˆ·ç«¯å­˜å‚¨æœåŠ¡å™¨çŠ¶æ€çš„ä¸€ç§æœºåˆ¶,WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡Set-Cookieæˆ–è€…Set-Cookie2 HTTPå¤´éƒ¨è®¾ç½®Cookieã€‚</p>

<p>Cookieå¯ä»¥åˆ†ä¸ºä¸¤ç±»</p>

<ul>
<li>ä¼šè¯Cookie</li>
<li>æŒä¹…Cookie</li>
</ul>


<p>ä¼šè¯Cookieæ˜¯ä¸´æ—¶Cookie,å½“å‰ä¼šè¯ç»“æŸ(æµè§ˆå™¨é€€å‡º)æ—¶Cookieä¼šè¢«åˆ é™¤ã€‚</p>

<p>æŒä¹…Cookieä¼šå­˜å‚¨åœ¨ç”¨æˆ·çš„ç¡¬ç›˜ä¸Š,æµè§ˆå™¨é€€å‡ºï¼Œç„¶åé‡æ–°å¯åŠ¨åCookieä»ç„¶å­˜åœ¨ã€‚ä¼šè¯Cookieå’ŒæŒä¹…Cookieçš„åŒºåˆ«åœ¨äºè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœè®¾ç½®äº†Discardå‚æ•°(Cookie ç‰ˆæœ¬1)æˆ–è€…æ²¡æœ‰è®¾ç½®Expires(Cookieç‰ˆæœ¬0)æˆ–Max-Age(Cookieç‰ˆæœ¬1)è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåˆ™æ­¤Cookieä¸ºä¼šè¯Cookie</p>

<p>Cookieæœ‰ä¸¤ä¸ªç‰ˆæœ¬,ä¸€ä¸ªæ˜¯ç‰ˆæœ¬0(Netscape Cookies)å’Œç‰ˆæœ¬1(RFC 2965),ç›®å‰å¤§å¤šæ•°æœåŠ¡å™¨ä½¿ç”¨çš„Cookie 0ã€‚</p>

<h4>äºŒ. NSHTTPCookie</h4>

<!--more-->


<p>åœ¨iOSä¸­ä½¿ç”¨NSHTTPCookieç±»å°è£…ä¸€æ¡cookie,é€šè¿‡NSHTTPCookieçš„æ–¹æ³•è¯»å–åˆ°cookieçš„é€šç”¨å±æ€§ã€‚</p>

<pre><code>- (NSUInteger)version;
- (NSString *)name;
- (NSString *)value;
- (NSString *)domain;
- (NSString *)path;
- (BOOL)isSessionOnly;
</code></pre>

<p>ç­‰</p>

<p>å¯ä»¥é€šè¿‡æ‰‹å·¥èµ‹å€¼çš„æ–¹å¼åˆ›å»ºCookie,å¦‚</p>

<pre><code>+ (id)cookieWithProperties:(NSDictionary *)properties;
- (id)initWithProperties:(NSDictionary *)properties;
</code></pre>

<p>ä¹Ÿå¯ä»¥ä»Cookieä¸­è¯»å–åˆ°æ‰€æœ‰å±æ€§ã€‚</p>

<pre><code>- (NSDictionary *)properties;
</code></pre>

<p>ä½¿ç”¨NSHTTPCookieçš„ç±»æ–¹æ³•å¯ä»¥å°†NSHTTPCookieå®ä¾‹ä¸HTTP cookie headerç›¸äº’è½¬æ¢.
æ ¹æ®NSHTTPCookieå®ä¾‹æ•°ç»„ç”Ÿæˆå¯¹åº”çš„HTTP cookie header</p>

<pre><code>+ (NSDictionary *)requestHeaderFieldsWithCookies:(NSArray *)cookies;
</code></pre>

<p>ä»headerFiledsä¸­è¯»å–åˆ°Cookieç›¸å…³å†…å®¹,ç”ŸæˆNSHTTPCookieå®ä¾‹å¯¹è±¡æ•°ç»„ã€‚</p>

<pre><code>+ (NSArray *)cookiesWithResponseHeaderFields:(NSDictionary *)headerFields forURL:(NSURL *)theURL;
</code></pre>

<p>è¯¥æ–¹æ³•ä¼šå¿½ç•¥headerFiledsä¸­ä¸cookieæ— å…³çš„å­—æ®µï¼Œå¦‚æœheaderFiledsä¸­çš„cookieæ²¡æœ‰æŒ‡å®šdomain,åˆ™ä½¿ç”¨theURLçš„domain,å¦‚æœæ²¡æœ‰æŒ‡å®špath,åˆ™ä½¿ç”¨â€/â€.</p>

<p>é™¤éNSURLRequestæ˜ç¡®æŒ‡å®šä¸ä½¿ç”¨cookie(HTTPShouldHandleCookiesè®¾ä¸ºNO),å¦åˆ™URL loading systemä¼šè‡ªåŠ¨ä¸ºNSURLRequestå‘é€åˆé€‚çš„å­˜å‚¨cookieã€‚ä»NSURLResponseè¿”å›çš„cookieä¹Ÿä¼šæ ¹æ®å½“å‰çš„cookieè®¿é—®ç­–ç•¥(cookie acceptance policy)æ¥æ”¶åˆ°ç³»ç»Ÿä¸­ã€‚</p>

<h4>ä¸‰.NSHTTPCookieStorage</h4>

<p>NSHTTPCookieStorageå•ä»¶ç±»æä¾›äº†ç®¡ç†æ‰€æœ‰NSHTTPCookieå¯¹è±¡çš„æ¥å£ï¼Œåœ¨OS Xé‡Œ,cookieæ˜¯åœ¨æ‰€æœ‰ç¨‹åºä¸­å…±äº«çš„ï¼Œè€Œåœ¨iOSä¸­,cookieåªå½“å½“å‰åº”ç”¨ä¸­æœ‰æ•ˆã€‚</p>

<p>é€šè¿‡sharedHTTPCookieStorageæ–¹æ³•å¯è·å–åˆ°å…±äº«çš„NSHTTPCookieStorageå•ä»¶å¯¹è±¡ã€‚</p>

<pre><code>+ (NSHTTPCookieStorage *)sharedHTTPCookieStorageï¼›
</code></pre>

<p>ä½¿ç”¨NSHTTPCookieStorageå•ä»¶å¯¹è±¡å¯è·å–åˆ°å½“å‰å­˜å‚¨çš„æ‰€æœ‰cookie</p>

<pre><code>- (NSArray *)cookies
</code></pre>

<p>æˆ–é’ˆå¯¹ç‰¹å®šURLçš„cookie</p>

<pre><code>- (NSArray *)cookiesForURL:(NSURL *)theURL;
</code></pre>

<p>è¿˜å¯ä»¥æ·»åŠ /åˆ é™¤Cookie</p>

<pre><code>â€“ deleteCookie:
â€“ setCookie:
â€“ setCookies:forURL:mainDocumentURL:
</code></pre>

<p>é€šè¿‡NSHTTPCookieStorageå¯è¯»å–/ä¿®æ”¹cookieæ¥æ”¶ç­–ç•¥,é»˜è®¤ä¸ºNSHTTPCookieAcceptPolicyAlways.</p>

<pre><code>- (NSHTTPCookieAcceptPolicy)cookieAcceptPolicyï¼›
- (void)setCookieAcceptPolicy:(NSHTTPCookieAcceptPolicy)aPolicy.
</code></pre>

<p>ä¸€å…±æœ‰ä¸‰ç§cookie accept policy,</p>

<pre><code>typedef enum {
   NSHTTPCookieAcceptPolicyAlways,
   NSHTTPCookieAcceptPolicyNever,
   NSHTTPCookieAcceptPolicyOnlyFromMainDocumentDomain
} NSHTTPCookieAcceptPolicy;

NSHTTPCookieAcceptPolicyAlways:æ¥æ”¶æ‰€æœ‰cookie,é»˜è®¤ç­–ç•¥.
NSHTTPCookieAcceptPolicyNever: æ‹’ç»æ‰€æœ‰cookie
NSHTTPCookieAcceptPolicyOnlyFromMainDocumentDomain:åªæ¥æ”¶main document domainä¸­çš„cookie.
</code></pre>

<h4>å››.ç›¸å…³é€šçŸ¥</h4>

<pre><code>NSHTTPCookieManagerCookiesChangedNotification
</code></pre>

<p>å½“NSHTTPCookieStorageå®ä¾‹ä¸­çš„cookieså˜åŒ–æ—¶å‘å‡ºæ­¤é€šçŸ¥ã€‚</p>

<pre><code>NSHTTPCookieManagerAcceptPolicyChangedNotification
</code></pre>

<p>å½“NSHTTPCookieStorageå®ä¾‹çš„cookie acceptance policyå˜åŒ–æ—¶å‘å‡ºæ­¤é€šçŸ¥ã€‚</p>

<h4>äº”ï¼šCookieçš„ä¸‰å¤§å¸¸è§æ“ä½œ</h4>

<h6>1ï¼Œè·å–cookie</h6>

<p>è·å–cookieåªèƒ½åœ¨è¯·æ±‚ä¸­è·å–cookieï¼Œå¦åˆ™æ—¶è·å–ä¸åˆ°çš„ï¼Œurlå°±ä¸ç»™å‡ºäº†ï¼Œå¤§å®¶ç”¨è‡ªå·±çš„urlæµ‹è¯•ä¸€ä¸‹å°±è¡Œã€‚
è·å–åˆ°cookieåæŠŠcookieè¿›è¡Œå½’æ¡£ä¿å­˜åˆ°userDefaultsé‡Œ</p>

<pre><code>#pragma mark è·å–å¹¶ä¿å­˜cookieåˆ°userDefaults
- (void)getAndSaveCookie
{
    NSLog(@"=============è·å–cookie==============");
    NSString *urlString = @"";

    //è¯·æ±‚ä¸€ä¸ªç½‘å€ï¼Œå³å¯åˆ†é…åˆ°cookie
    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
    manager.responseSerializer = [AFJSONResponseSerializer new];
    [manager GET:urlString parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {

        //è·å–cookie
        NSArray *cookies = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies];
        for (NSHTTPCookie *tempCookie in cookies) {
            //æ‰“å°è·å¾—çš„cookie
            NSLog(@"getCookie: %@", tempCookie);
        }

        /*
         * æŠŠcookieè¿›è¡Œå½’æ¡£å¹¶è½¬æ¢ä¸ºNSDataç±»å‹
         * æ³¨æ„ï¼šcookieä¸èƒ½ç›´æ¥è½¬æ¢ä¸ºNSDataç±»å‹ï¼Œå¦åˆ™ä¼šå¼•èµ·å´©æºƒã€‚
         * æ‰€ä»¥å…ˆè¿›è¡Œå½’æ¡£å¤„ç†ï¼Œå†è½¬æ¢ä¸ºData
         */
        NSData *cookiesData = [NSKeyedArchiver archivedDataWithRootObject: [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]];

        //å­˜å‚¨å½’æ¡£åçš„cookie
        NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
        [userDefaults setObject: cookiesData forKey: @"cookie"];
        NSLog(@"\n");

        [self deleteCookie];

        [self setCoookie];

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

        nil;
    }];
}
</code></pre>

<h6>2ï¼Œåˆ é™¤cookie</h6>

<p>æŠŠè·å–åˆ°çš„cookieåˆ é™¤æ‰ï¼Œè¯¥æ­¥éª¤å¯ä»¥ç”¨åœ¨æ³¨é”€æˆ–è€…åˆ‡æ¢è´¦å·é‡Œã€‚
å½“å‰ï¼Œæˆ‘è¿™é‡Œåˆ é™¤cookieæ˜¯ä¸ºäº†æ£€æµ‹åé¢çš„é€šè¿‡æœ¬åœ°å­˜å‚¨çš„æ•°æ®è¿›è¡Œè®¾ç½®cookieæ˜¯å¦æˆåŠŸ</p>

<pre><code>#pragma mark åˆ é™¤cookie
- (void)deleteCookie
{
    NSLog(@"============åˆ é™¤cookie===============");
    NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    NSArray *cookies = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies];

    //åˆ é™¤cookie
    for (NSHTTPCookie *tempCookie in cookies) {
        [cookieStorage deleteCookie:tempCookie];
    }

    //æŠŠcookieæ‰“å°å‡ºæ¥ï¼Œæ£€æµ‹æ˜¯å¦å·²ç»åˆ é™¤
    NSArray *cookiesAfterDelete = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies];
    for (NSHTTPCookie *tempCookie in cookiesAfterDelete) {
        NSLog(@"cookieAfterDelete: %@", tempCookie);
    }
    NSLog(@"\n");
}
</code></pre>

<h6>3ï¼Œé€šè¿‡æœ¬åœ°å­˜å‚¨çš„æ•°æ®è®¾ç½®cookie</h6>

<p>æŠŠæœ¬åœ°çš„cookieå–å‡ºå¹¶åå½’æ¡£ï¼Œè®¾ç½®åˆ°cookieä¸­ï¼Œå¹¶ä¸”æ£€æµ‹cookieæ˜¯å¦è®¾ç½®æˆåŠŸ</p>

<pre><code>#pragma mark å†å–å‡ºä¿å­˜çš„cookieé‡æ–°è®¾ç½®cookie
- (void)setCoookie
{
    NSLog(@"============å†å–å‡ºä¿å­˜çš„cookieé‡æ–°è®¾ç½®cookie===============");
    //å–å‡ºä¿å­˜çš„cookie
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

    //å¯¹å–å‡ºçš„cookieè¿›è¡Œåå½’æ¡£å¤„ç†
    NSArray *cookies = [NSKeyedUnarchiver unarchiveObjectWithData:[userDefaults objectForKey:@"cookie"]];

    if (cookies) {
        NSLog(@"æœ‰cookie");
        //è®¾ç½®cookie
        NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
        for (id cookie in cookies) {
            [cookieStorage setCookie:(NSHTTPCookie *)cookie];
        }
    }else{
        NSLog(@"æ— cookie");
    }

    //æ‰“å°cookieï¼Œæ£€æµ‹æ˜¯å¦æˆåŠŸè®¾ç½®äº†cookie
    NSArray *cookiesA = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies];
    for (NSHTTPCookie *cookie in cookiesA) {
        NSLog(@"setCookie: %@", cookie);
    }
    NSLog(@"\n");
}
</code></pre>

<p>çœ‹ä¸€ä¸‹è¿è¡Œæˆªå›¾</p>

<p><img src="/images/cookie001.png" title="Caption" ></p>

<h4>å…­ï¼šCookieä¸Sessionçš„å´åˆ«</h4>

<p>å…·ä½“æ¥è¯´cookieæœºåˆ¶é‡‡ç”¨çš„æ˜¯åœ¨å®¢æˆ·ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆï¼Œè€Œsessionæœºåˆ¶é‡‡ç”¨çš„æ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆã€‚</p>

<pre><code>cookieæ•°æ®å­˜æ”¾åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œsessionæ•°æ®æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼›
cookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„COOKIEå¹¶è¿›è¡ŒCOOKIEæ¬ºéª—ï¼Œè€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨sessionï¼›
sessionä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½ã€‚è€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨COOKIEï¼›
å•ä¸ªcookieåœ¨å®¢æˆ·ç«¯çš„é™åˆ¶æ˜¯3Kï¼Œå°±æ˜¯è¯´ä¸€ä¸ªç«™ç‚¹åœ¨å®¢æˆ·ç«¯å­˜æ”¾çš„COOKIEä¸èƒ½è¶…è¿‡3Kï¼›
</code></pre>

<p>Cookieå’ŒSessionçš„æ–¹æ¡ˆè™½ç„¶åˆ†åˆ«å±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œä½†æ˜¯æœåŠ¡ç«¯çš„sessionçš„å®ç°å¯¹å®¢æˆ·ç«¯çš„cookieæœ‰ä¾èµ–å…³ç³»çš„ï¼Œä¸Šé¢æˆ‘è®²åˆ°æœåŠ¡ç«¯æ‰§è¡Œsessionæœºåˆ¶æ—¶å€™ä¼šç”Ÿæˆsessionçš„idå€¼ï¼Œè¿™ä¸ªidå€¼ä¼šå‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæŠŠè¿™ä¸ªidå€¼æ”¾åˆ°httpè¯·æ±‚çš„å¤´éƒ¨å‘é€ç»™æœåŠ¡ç«¯ï¼Œè€Œè¿™ä¸ªidå€¼åœ¨å®¢æˆ·ç«¯ä¼šä¿å­˜ä¸‹æ¥ï¼Œä¿å­˜çš„å®¹å™¨å°±æ˜¯cookieï¼Œå› æ­¤å½“æˆ‘ä»¬å®Œå…¨ç¦æ‰æµè§ˆå™¨çš„cookieçš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯çš„sessionä¹Ÿä¼šä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆæ³¨æ„ï¼šæœ‰äº›èµ„æ–™è¯´ASPè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“æµè§ˆå™¨çš„cookieè¢«ç¦æ‰ï¼ŒæœåŠ¡ç«¯çš„sessionä»»ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼ŒASPæˆ‘æ²¡è¯•éªŒè¿‡ï¼Œä½†æ˜¯å¯¹äºç½‘ç»œä¸Šå¾ˆå¤šç”¨phpå’Œjspç¼–å†™çš„ç½‘ç«™ï¼Œæˆ‘å‘ç°ç¦æ‰cookieï¼Œç½‘ç«™çš„sessionéƒ½æ— æ³•æ­£å¸¸çš„è®¿é—®ï¼‰ã€‚</p>

<h6>Cookieçš„ä¼˜ç¼ºç‚¹ï¼š</h6>

<ul>
<li><p>ä¼˜ç‚¹ï¼šæé«˜çš„æ‰©å±•æ€§å’Œå¯ç”¨æ€§</p>

<ul>
<li>é€šè¿‡è‰¯å¥½çš„ç¼–ç¨‹ï¼Œæ§åˆ¶ä¿å­˜åœ¨cookieä¸­çš„sessionå¯¹è±¡çš„å¤§å°ã€‚
é€šè¿‡åŠ å¯†å’Œå®‰å…¨ä¼ è¾“æŠ€æœ¯ï¼ˆSSLï¼‰ï¼Œå‡å°‘cookieè¢«ç ´è§£çš„å¯èƒ½æ€§ã€‚
åªåœ¨cookieä¸­å­˜æ”¾ä¸æ•æ„Ÿæ•°æ®ï¼Œå³ä½¿è¢«ç›—ä¹Ÿä¸ä¼šæœ‰é‡å¤§æŸå¤±ã€‚
æ§åˆ¶cookieçš„ç”Ÿå‘½æœŸï¼Œä½¿ä¹‹ä¸ä¼šæ°¸è¿œæœ‰æ•ˆã€‚å·ç›—è€…å¾ˆå¯èƒ½æ‹¿åˆ°ä¸€ä¸ªè¿‡æœŸçš„cookieã€‚</li>
</ul>
</li>
<li><p>ç¼ºç‚¹ï¼š</p>

<ul>
<li>Cookieæ•°é‡å’Œé•¿åº¦çš„é™åˆ¶ã€‚æ¯ä¸ªdomainæœ€å¤šåªèƒ½æœ‰20æ¡cookieï¼Œæ¯ä¸ªcookieé•¿åº¦ä¸èƒ½è¶…è¿‡4KBï¼Œå¦åˆ™ä¼šè¢«æˆªæ‰ã€‚
å®‰å…¨æ€§é—®é¢˜ã€‚å¦‚æœcookieè¢«äººæ‹¦æˆªäº†ï¼Œé‚£äººå°±å¯ä»¥å–å¾—æ‰€æœ‰çš„sessionä¿¡æ¯ã€‚å³ä½¿åŠ å¯†ä¹Ÿä¸äº‹æ— è¡¥ï¼Œå› ä¸ºæ‹¦æˆªè€…å¹¶ä¸éœ€è¦çŸ¥é“cookieçš„æ„ä¹‰ï¼Œä»–åªè¦åŸæ ·è½¬å‘cookieå°±å¯ä»¥è¾¾åˆ°ç›®çš„äº†ã€‚
æœ‰äº›çŠ¶æ€ä¸å¯èƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†é˜²æ­¢é‡å¤æäº¤è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ä¸€ä¸ªè®¡æ•°å™¨ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªè®¡æ•°å™¨ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆå®ƒèµ·ä¸åˆ°ä»»ä½•ä½œç”¨ã€‚</li>
</ul>
</li>
</ul>


<h6>Sessionçš„ä¼˜ç¼ºç‚¹ï¼š</h6>

<ul>
<li><p>ä¼˜ç‚¹</p>

<ul>
<li><p>å¦‚æœè¦åœ¨è¯¸å¤šWebé¡µé—´ä¼ é€’ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆç”¨Sessionå˜é‡è¦æ¯”é€šè¿‡QueryStringä¼ é€’å˜é‡å¯ä½¿é—®é¢˜ç®€åŒ–ã€‚</p></li>
<li><p>è¦ä½¿WEbç«™ç‚¹å…·æœ‰ç”¨æˆ·åŒ–ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Sessionå˜é‡ã€‚ä½ çš„ç«™ç‚¹çš„æ¯ä½è®¿é—®è€…éƒ½æœ‰ç”¨æˆ·åŒ–çš„ç»éªŒï¼ŒåŸºäºæ­¤ï¼Œéšç€LDAPå’Œè¯¸å¦‚MS Site</p></li>
<li><p>Serverç­‰çš„ä½¿ç”¨ï¼Œå·²ä¸å¿…å†å°†æ‰€æœ‰ç”¨æˆ·åŒ–è¿‡ç¨‹ç½®å…¥Sessionå˜é‡äº†ï¼Œè€Œè¿™ä¸ªç”¨æˆ·åŒ–æ˜¯å–å†³äºç”¨æˆ·å–œå¥½çš„ã€‚</p></li>
<li><p>ä½ å¯ä»¥åœ¨ä»»ä½•æƒ³è¦ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ä½¿ç”¨sessionå˜é‡ï¼Œè€Œä¸å¿…äº‹å…ˆå£°æ˜å®ƒï¼Œè¿™ç§æ–¹å¼æ¥è¿‘äºåœ¨VBä¸­å˜é‡çš„ä½¿ç”¨ã€‚ä½¿ç”¨å®Œæ¯•åï¼Œä¹Ÿä¸å¿…è€ƒè™‘å°†å…¶é‡Šæ”¾ï¼Œå› ä¸ºå®ƒå°†è‡ªåŠ¨é‡Šæ”¾ã€‚</p></li>
</ul>
</li>
<li><p>ç¼ºç‚¹</p>

<ul>
<li>Sessionå˜é‡å’Œcookiesæ˜¯åŒä¸€ç±»å‹çš„ã€‚å¦‚æœæŸç”¨æˆ·å°†æµè§ˆå™¨è®¾ç½®ä¸ºä¸å…¼å®¹ä»»ä½•cookieï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·å°±æ— æ³•ä½¿ç”¨è¿™ä¸ªSessionå˜é‡ï¼</li>
</ul>
</li>
</ul>


<p>å‚è€ƒï¼š
<a href="http://my.oschina.net/xianggao/blog/395675">http://my.oschina.net/xianggao/blog/395675</a></p>

<hr />

<pre><code>Q Qï¼š2211523682/790806573

å¾®ä¿¡ï¼š18370997821/13148454507

å¾®åšWB:http://weibo.com/u/3288975567?is_hot=1

gitåšæ–‡ï¼šhttp://al1020119.github.io/

githubï¼šhttps://github.com/al1020119
</code></pre>

<p><img src="/images/iCocosCoder.jpg" title="Caption" ></p>

<p><img src="/images/iCocosPublic.jpg" title="Caption" ></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">iCocos</span></span>

      




<time class='entry-date' datetime='2016-01-22T13:32:08+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2016</span></span> <span class='time'>1:32 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/senior/'>senior</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/01/21/keyChain/" title="Previous Post: keychainä»‹ç»ä¸ä½¿ç”¨">&laquo; keychainä»‹ç»ä¸ä½¿ç”¨</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/01/24/iCocos/" title="Next Post: æ¸©é¦¨æç¤º">æ¸©é¦¨æç¤º &raquo;</a>
      
    </p>
  </footer>
</article>



  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title="Cookieæ˜¯æ’’(&sessionï¼‰"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"icocoscao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
    <h1>æ–‡ç« åˆ†ç±»</h1>
    <ul id="categories">
        <li class='category'><a href='/blog/categories/algorithms/'>algorithms (6)</a></li>
<li class='category'><a href='/blog/categories/and/'>and (14)</a></li>
<li class='category'><a href='/blog/categories/apples/'>apples (2)</a></li>
<li class='category'><a href='/blog/categories/application/'>application (1)</a></li>
<li class='category'><a href='/blog/categories/architecture/'>architecture (2)</a></li>
<li class='category'><a href='/blog/categories/audio/'>audio (8)</a></li>
<li class='category'><a href='/blog/categories/audio-video/'>audio-video (1)</a></li>
<li class='category'><a href='/blog/categories/data/'>data (6)</a></li>
<li class='category'><a href='/blog/categories/developer/'>developer (16)</a></li>
<li class='category'><a href='/blog/categories/foundation/'>foundation (31)</a></li>
<li class='category'><a href='/blog/categories/full/'>full (13)</a></li>
<li class='category'><a href='/blog/categories/low-level/'>low-level (4)</a></li>
<li class='category'><a href='/blog/categories/lve/'>lve (8)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (4)</a></li>
<li class='category'><a href='/blog/categories/others/'>others (1)</a></li>
<li class='category'><a href='/blog/categories/performance/'>performance (12)</a></li>
<li class='category'><a href='/blog/categories/php-lover/'>php-lover (2)</a></li>
<li class='category'><a href='/blog/categories/practical/'>practical (1)</a></li>
<li class='category'><a href='/blog/categories/radio/'>radio (8)</a></li>
<li class='category'><a href='/blog/categories/reverse/'>reverse (7)</a></li>
<li class='category'><a href='/blog/categories/senior/'>senior (31)</a></li>
<li class='category'><a href='/blog/categories/stack/'>stack (13)</a></li>
<li class='category'><a href='/blog/categories/structures/'>structures (6)</a></li>
<li class='category'><a href='/blog/categories/summarize/'>summarize (5)</a></li>
<li class='category'><a href='/blog/categories/tools/'>tools (5)</a></li>
<li class='category'><a href='/blog/categories/video/'>video (8)</a></li>

    </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/12/03/phpwan-mei-da-pei-mysql/">PHPå®Œç¾æ­é…ä¹‹Mysqlåˆæ¢</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/02/zhong-zheng-linux/">é‡æ•´Linuxä¸€æ¬¡å°±å¤Ÿäº†</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/01/wan-zhuan-thinkphp-5-dot-star/">å®Œè™ThinkPHP 5.* è¿œä¸æ­¢è¿™äº›ğŸ˜±ğŸ˜‚</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/11/13/wan-nue-yiicong-zhe-li-kai-shi/">å®Œè™Yiiä»è¿™é‡Œå¼€å§‹ğŸ˜±ğŸ˜‚</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/20/apptai-pang-liao-jian-fei/">Appå¤ªèƒ–äº†â€”â€”å‡è‚¥ğŸ˜‚</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/al1020119">@al1020119</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'al1020119',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





<section>
<h1>åšå®¢<abbr title="The word 'åšå®¢' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'åšå®¢', not for image.">&trade;</abbr></h1>
<a href="http://al1020119.github.io/blog/2016/01/22/cookie-session/"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=http://al1020119.github.io/blog/2016/01/22/cookie-session/" alt="post-qrcode"></a></section>


<section>
<h1>github<abbr title="The word 'github' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'github', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosgithub.png" alt="post-qrcode"></a></section>


<section>
<h1>å¾®ä¿¡<abbr title="The word 'å¾®ä¿¡' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å¾®ä¿¡', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosWX.png" alt="post-qrcode"></a></section>


<section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosMGC.png" alt="post-qrcode"></a><section>
  
  
</section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocos520.png" alt="post-qrcode"></a></section>
<section>
    <h1>è®¿å®¢ç»Ÿè®¡</h1>
    <br/>
    <a href="http://s07.flagcounter.com/more/2SH"><img src="http://s07.flagcounter.com/count/2SH/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
</section><section>
    <h1>æ–°æµªå¾®åš</h1>
    <ul id="weibo">
        <li>
            
            <!-- åœ¨æ­¤æ’å…¥è·å¾—çš„å¾®åšç§€ä»£ç  -->
            <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3288975567&verifier=20ffcedd&dpc=1"></iframe>
            
        </li>
    </ul>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - iCocos -
<span class="credit">welcome to <a href="http://al1020119.github.io">æ›¹#é»</a></span>
</p>

</footer>
  






<!--
-->



</body>
</html>
