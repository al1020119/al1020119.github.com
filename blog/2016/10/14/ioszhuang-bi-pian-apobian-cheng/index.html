
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>iOSè£…é€¼ç¯‡â€”â€”APOç¼–ç¨‹ - iOSæ¢¦å·¥å‚</title>
  <meta name="author" content="iCocos">

  
  <meta name="description" content="å®ç°åŸç† ç”¨Objective-Cå¼ºå¤§çš„runtime. æˆ‘ä»¬çŸ¥é“å½“ç»™ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™, å¦‚æœå½“å‰ç±»å’Œçˆ¶ç±»éƒ½æ²¡å®ç°è¯¥æ–¹æ³•çš„æ—¶å€™å°±ä¼šèµ°è½¬å‘æµç¨‹ åŠ¨æ€æ–¹æ³•è§£æ -&gt; å¿«é€Ÿæ¶ˆæ¯è½¬å‘ -&gt; æ ‡å‡†æ¶ˆæ¯è½¬å‘ å‡†å¤‡çŸ¥è¯† å‡†å¤‡çŸ¥è¯†ä¸€ï¼šMethod,SEL,IMPæ¦‚å¿µ SEL &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://al1020119.github.io/blog/2016/10/14/ioszhuang-bi-pian-apobian-cheng/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iOSæ¢¦å·¥å‚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iOSæ¢¦å·¥å‚</a></h1>
  
    <h2>iCocosâ€”â€”ä¸æˆ˜èƒœè‡ªå·±ï¼Œä½•ä»¥æ”¹å˜æœªæ¥ï¼</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="al1020119.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">åšæ–‡</a></li>
  <li><a href="/blog/archives">å½’æ¡£</a></li>
  <li><a href="/icocos">iCocos</a></li>
  <li><a href="/about">æ–‡ç« </a></li>
  <li><a href="/other">å…¶ä»–</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">iOSè£…é€¼ç¯‡â€”â€”APOç¼–ç¨‹</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-10-14T11:45:17+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:45 am</span></time>
        
        
        |   <a href="#comments">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h4>å®ç°åŸç†</h4>

<ul>
<li>ç”¨Objective-Cå¼ºå¤§çš„runtime.</li>
</ul>


<p>æˆ‘ä»¬çŸ¥é“å½“ç»™ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™, å¦‚æœå½“å‰ç±»å’Œçˆ¶ç±»éƒ½æ²¡å®ç°è¯¥æ–¹æ³•çš„æ—¶å€™å°±ä¼šèµ°è½¬å‘æµç¨‹</p>

<pre><code>åŠ¨æ€æ–¹æ³•è§£æ -&gt; å¿«é€Ÿæ¶ˆæ¯è½¬å‘ -&gt; æ ‡å‡†æ¶ˆæ¯è½¬å‘
</code></pre>

<!--more-->


<h2>å‡†å¤‡çŸ¥è¯†</h2>

<h3>å‡†å¤‡çŸ¥è¯†ä¸€ï¼šMethod,SEL,IMPæ¦‚å¿µ</h3>

<h6>SEL</h6>

<pre><code> å…ˆçœ‹ä¸€ä¸‹SELçš„æ¦‚å¿µï¼ŒObjective-Cåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šä¾æ®æ¯ä¸€ä¸ªæ–¹æ³•çš„åå­—ã€å‚æ•°åºåˆ—ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ•´å‹æ ‡è¯†(Intç±»å‹çš„åœ°å€)ï¼Œè¿™ä¸ªæ ‡è¯†å°±æ˜¯SELã€‚

 SELä¹Ÿæ˜¯@selectorçš„ç±»å‹ï¼Œç”¨æ¥è¡¨ç¤ºOCè¿è¡Œæ—¶çš„æ–¹æ³•çš„åå­—ã€‚æ¥çœ‹ä¸€ä¸‹OCä¸­çš„å®šä¹‰
</code></pre>

<p><img src="/images/iosapo001.png" title="Caption" ></p>

<pre><code>  æœ¬è´¨ä¸Šï¼ŒSELåªæ˜¯ä¸€ä¸ªæŒ‡å‘æ–¹æ³•çš„æŒ‡é’ˆï¼ˆå‡†ç¡®çš„è¯´ï¼Œåªæ˜¯ä¸€ä¸ªæ ¹æ®æ–¹æ³•åhashåŒ–äº†çš„KEYå€¼ï¼Œèƒ½å”¯ä¸€ä»£è¡¨ä¸€ä¸ªæ–¹æ³•ï¼‰ï¼Œå®ƒçš„å­˜åœ¨åªæ˜¯ä¸ºäº†åŠ å¿«æ–¹æ³•çš„æŸ¥è¯¢é€Ÿåº¦ã€‚è¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹æˆ‘ä»¬å°†åœ¨ä¸‹é¢è¯´æ˜ã€‚
  æˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æ–°çš„selectorï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶è·å–å·²å­˜åœ¨çš„selectorã€‚
</code></pre>

<h6>IMP</h6>

<pre><code>  å®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•å®ç°çš„é¦–åœ°å€ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š
</code></pre>

<p><img src="/images/iosapo002.png" title="Caption" ></p>

<h6>å…³äºIMPçš„å‡ ç‚¹è¯´æ˜ï¼š</h6>

<p>ä½¿ç”¨å½“å‰CPUæ¶æ„å®ç°çš„æ ‡å‡†çš„Cè°ƒç”¨çº¦å®š</p>

<pre><code>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å‘selfçš„æŒ‡é’ˆï¼ˆå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•ï¼Œåˆ™æ˜¯ç±»å®ä¾‹çš„å†…å­˜åœ°å€ï¼›å¦‚æœæ˜¯ç±»æ–¹æ³•ï¼Œåˆ™æ˜¯æŒ‡å‘å…ƒç±»çš„æŒ‡é’ˆï¼‰
ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–¹æ³•é€‰æ‹©å™¨(selector)ï¼Œ
ç¬¬ä¸‰ä¸ªå‚æ•°å¼€å§‹æ˜¯æ–¹æ³•çš„å®é™…å‚æ•°åˆ—è¡¨ã€‚
</code></pre>

<p>é€šè¿‡å–å¾—IMPï¼Œæˆ‘ä»¬å¯ä»¥è·³è¿‡Runtimeçš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œç›´æ¥æ‰§è¡ŒIMPæŒ‡å‘çš„å‡½æ•°å®ç°ï¼Œè¿™æ ·çœå»äº†Runtimeæ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­æ‰€åšçš„ä¸€ç³»åˆ—æŸ¥æ‰¾æ“ä½œï¼Œä¼šæ¯”ç›´æ¥å‘å¯¹è±¡å‘é€æ¶ˆæ¯é«˜æ•ˆä¸€äº›ï¼Œå½“ç„¶å¿…é¡»è¯´æ˜çš„æ˜¯ï¼Œè¿™ç§æ–¹å¼åªé€‚ç”¨äºæç‰¹æ®Šçš„ä¼˜åŒ–åœºæ™¯ï¼Œå¦‚æ•ˆç‡æ•æ„Ÿçš„åœºæ™¯ä¸‹å¤§é‡å¾ªç¯çš„è°ƒç”¨æŸæ–¹æ³•ã€‚</p>

<h6>Method</h6>

<pre><code>  ç›´æ¥ä¸Šå®šä¹‰ï¼š
</code></pre>

<p><img src="/images/iosapo003.png" title="Caption" ></p>

<pre><code>  Method = SEL + IMP + method_typesï¼Œç›¸å½“äºåœ¨SELå’ŒIMPä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªæ˜ å°„
</code></pre>

<p>ç›¸å…³æ–¹æ³•ï¼š</p>

<pre><code>// ç»™ cls æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•  
BOOL class_addMethod (  
   Class cls,  
   SEL name,  
   IMP imp,  
   const charchar *types  
);  

// æ›¿æ¢ cls é‡Œçš„ä¸€ä¸ªæ–¹æ³•çš„å®ç°  
IMP class_replaceMethod (  
   Class cls,  
   SEL name,  
   IMP imp,  
   const charchar *types  
);  

// è¿”å› cls çš„æŒ‡å®šæ–¹æ³•  
Method class_getInstanceMethod (  
   Class cls,  
   SEL name  
);  

// è®¾ç½®ä¸€ä¸ªæ–¹æ³•çš„å®ç°  
IMP method_setImplementation (  
   Method m,  
   IMP imp  
);  

// è¿”å› cls é‡Œçš„ name æ–¹æ³•çš„å®ç°  
IMP class_getMethodImplementation (  
   Class cls,  
   SEL name  
);  
</code></pre>

<h3>å‡†å¤‡çŸ¥è¯†äºŒï¼šiOSæ–¹æ³•è°ƒç”¨æµç¨‹</h3>

<h6>æ–¹æ³•è°ƒç”¨çš„æ ¸å¿ƒæ˜¯objc_msgSendæ–¹æ³•ï¼š</h6>

<pre><code>         objc_msgSend(receiver, selector, arg1,arg2,â€¦)
</code></pre>

<p>å…·ä½“çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>

<pre><code>        å…ˆæ‰¾åˆ°selector å¯¹åº”çš„æ–¹æ³•å®ç°(IMP)ï¼Œå› ä¸ºåŒä¸€ä¸ªæ–¹æ³•å¯èƒ½åœ¨ä¸åŒçš„ç±»ä¸­æœ‰ä¸åŒçš„å®ç°ï¼Œæ‰€ä»¥éœ€è¦receiverçš„ç±»æ¥æ‰¾åˆ°ç¡®åˆ‡çš„IMP

        IMP class_getMethodImplementation(Class class, SEL selector)
</code></pre>

<p>å¦‚åŒå…¶æ–‡æ¡£æ‰€è¯´ï¼š</p>

<pre><code>The function pointer returned may be a function internal to the runtime instead of an actual method implementation. For example, if instances of the class do not respond to the selector, the function pointer returned will be part of the runtime's message forwarding machinery.
</code></pre>

<p>å…·ä½“æ¥è¯´ï¼Œå½“æ‰¾ä¸åˆ°IMPçš„æ—¶å€™ï¼Œæ–¹æ³•è¿”å›ä¸€ä¸ª _objc_msgForward å¯¹è±¡ï¼Œç”¨æ¥æ ‡è®°éœ€è¦è½¬å…¥æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨çš„AOPæ¡†æ¶ä¹Ÿæ˜¯åˆ©ç”¨äº†è¿™ä¸ªæœºåˆ¶æ¥äººä¸ºçš„åˆ¶é€ æ‰¾ä¸åˆ°IMPçš„å‡è±¡æ¥è§¦å‘æ¶ˆæ¯è½¬å‘çš„æµç¨‹</p>

<p><img src="/images/iosapo004.png" title="Caption" ></p>

<pre><code>    å¦‚æœå®åœ¨å¯¹_objc_msgFrowardçš„å†…éƒ¨å®ç°æ„Ÿå…´è¶£ï¼Œåªèƒ½çœ‹çœ‹æºç äº†ï¼Œåªä¸è¿‡éƒ½æ˜¯æ±‡ç¼–å®ç°çš„....æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æƒ³æƒ³ä¸ºä»€ä¹ˆæ˜¯ç”¨æ±‡ç¼–æ¥å®ç°
    è¿™é‡Œæœ‰ä¸ªæºç çš„é•œåƒhttps://github.com/opensource-apple ï¼Œå¦‚æœç¿»å¢™è´¹åŠ²çš„è¯
</code></pre>

<p>æ ¹æ®æŸ¥æ‰¾ç»“æœ</p>

<pre><code>    æ‰¾åˆ°äº†IMPï¼Œè°ƒç”¨æ‰¾åˆ°çš„IMPï¼Œä¼ å…¥å‚æ•°
    æ²¡æ‰¾åˆ°IMPï¼Œè½¬å…¥æ¶ˆæ¯è½¬å‘æµç¨‹
    å°†IMPçš„è¿”å›å€¼ä½œä¸ºè‡ªå·±çš„è¿”å›å€¼
</code></pre>

<p>è¡¥å……è¯´æ˜ä¸€ä¸‹IMPçš„æŸ¥æ‰¾è¿‡ç¨‹ï¼Œæ¶ˆæ¯ä¼ é€’çš„å…³é”®åœ¨äºobjc_classç»“æ„ä½“ä¸­çš„ä»¥ä¸‹å‡ ä¸ªä¸œè¥¿ï¼š</p>

<pre><code>Class *isa
Class *super_class
objc_method_list **methodLists
objc_cache *cache
</code></pre>

<p>å½“æ¶ˆæ¯å‘é€ç»™ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œobjc_msgSendé€šè¿‡å¯¹è±¡çš„isaè·å–åˆ°ç±»çš„ç»“æ„ä½“ï¼Œç„¶ååœ¨cacheå’ŒmethodListsä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æ‰¾åˆ°å°±æ‰¾å…¶çˆ¶ç±»ï¼Œä»¥æ­¤ç±»æ¨çŸ¥é“æ‰¾åˆ°NSObjectç±»ï¼Œå¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼Œå°±èµ°æ¶ˆæ¯è½¬å‘æµç¨‹ã€‚</p>

<h3>å‡†å¤‡çŸ¥è¯†ä¸‰ï¼šiOSæ–¹æ³•è½¬å‘æµç¨‹</h3>

<pre><code>  ä»ä¸Šæ–‡ä¸­æˆ‘ä»¬çœ‹åˆ°å½“objæ— æ³•æŸ¥æ‰¾åˆ° IMPæ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªç‰¹å®šçš„IMP _objc_msgForward , ç„¶åä¼šè¿›å…¥æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š
</code></pre>

<h6>åŠ¨æ€æ–¹æ³•è§£æ</h6>

<pre><code>    resolveInstanceMethod:è§£æå®ä¾‹æ–¹æ³• 
    resolveClassMethod:è§£æç±»æ–¹æ³•
</code></pre>

<p>é€šè¿‡class_addMethodçš„æ–¹å¼å°†ç¼ºå°‘çš„selectoråŠ¨æ€åˆ›å»ºå‡ºæ¥ï¼Œå‰ææ˜¯æœ‰æå‰å®ç°å¥½çš„IMPï¼ˆmethod_typesä¸€è‡´ï¼‰</p>

<pre><code>    è¿™ç§æ–¹æ¡ˆæ›´å¤šçš„æ˜¯ä½@dynamicå±æ€§å‡†å¤‡çš„
</code></pre>

<h6>å¤‡ç”¨æ¥å—è€…ï¼ˆAOPä¸­æœ‰ä½¿ç”¨ï¼‰</h6>

<p>å¦‚æœä¸Šä¸€æ­¥æ²¡æœ‰å¤„ç†ï¼Œruntimeä¼šè°ƒç”¨ä»¥ä¸‹æ–¹æ³•</p>

<pre><code>        -(id)forwardingTargetForSelector:(SEL)aSelector
</code></pre>

<p>å¦‚æœè¯¥æ–¹æ³•è¿”å›énilçš„å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨è¯¥å¯¹è±¡ä½œä¸ºæ–°çš„æ¶ˆæ¯æ¥æ”¶è€…ï¼Œä¸èƒ½è¿”å›selfï¼Œä¼šå‡ºç°æ— é™å¾ªç¯</p>

<p>å¦‚æœä¸çŸ¥é“è¯¥è¿”å›ä»€ä¹ˆï¼Œåº”è¯¥ä½¿ç”¨[super forwardingTargetForSelector:aSelector]</p>

<p>è¿™ç§æ–¹æ³•å±äºå•çº¯çš„è½¬å‘ï¼Œæ— æ³•å¯¹æ¶ˆæ¯çš„å‚æ•°å’Œè¿”å›å€¼è¿›è¡Œå¤„ç†</p>

<h6>å®Œæ•´è½¬å‘ï¼ˆAOPä¸­æœ‰ä½¿ç”¨ï¼‰</h6>

<pre><code>    - (void)forwardInvocation:(NSInvocation *)anInvocation
</code></pre>

<p>å¯¹è±¡éœ€è¦åˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡ï¼ŒæŠŠæ¶ˆæ¯è°ƒç”¨çš„å…¨éƒ¨ç»†èŠ‚å°è£…è¿›å»ï¼ŒåŒ…æ‹¬selector, target, arguments ç­‰å‚æ•°ï¼Œè¿˜èƒ½å¤Ÿå¯¹è¿”å›ç»“æœè¿›è¡Œå¤„ç†
ä¸ºäº†ä½¿ç”¨å®Œæ•´è½¬å‘ï¼Œéœ€è¦é‡å†™ä»¥ä¸‹æ–¹æ³•</p>

<pre><code>        -(NSMethodSignature *)methodSignatureForSelector:(SEL)aSelectorï¼Œå¦‚æœ2ä¸­return nil,æ‰§è¡ŒmethodSignatureForSelectorï¼š
</code></pre>

<p>å› ä¸ºæ¶ˆæ¯è½¬å‘æœºåˆ¶ä¸ºäº†åˆ›å»ºNSInvocationéœ€è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å—è·å–ä¿¡æ¯ï¼Œé‡å†™å®ƒä¸ºäº†æä¾›åˆé€‚çš„æ–¹æ³•ç­¾å</p>

<h2>AOPæ ¸å¿ƒé€»è¾‘è§£æ</h2>

<pre><code>    åˆ°äº†æœ‰æ„æ€çš„æˆè‚‰éƒ¨åˆ†ï¼Œæ‰“ç®—ç”¨æµç¨‹å›¾çš„æ–¹å¼è§£æä¸€ä¸‹æ ¸å¿ƒçš„ä¸¤ä¸ªæµç¨‹ï¼šæ‹¦æˆªå™¨(intercepter)æ³¨å†Œæµç¨‹å’Œæ‹¦æˆªå™¨(intercepter)æ‰§è¡Œæµç¨‹ã€‚
</code></pre>

<h4>æ‹¦æˆªå™¨(intercepter)æ³¨å†Œæµç¨‹</h4>

<p><img src="/images/iosapo005.png" title="Caption" ></p>

<p>è¯´æ˜ï¼šï¼ˆå›¾ä¸­m:ä»£è¡¨Methodï¼ŒClassAæ˜¯AOPçš„ç›®æ ‡ç±»ï¼ŒXæ˜¯AOPçš„ç›®æ ‡æ–¹æ³•ï¼ŒAOPAspectæ˜¯AOPå¤„ç†ç±»-å•ä¾‹ï¼‰</p>

<pre><code>1. å°†åŸå§‹çš„Xçš„IMPæ‹¿å‡ºæ¥ï¼Œä»¥ç‰¹å®šçš„å‘½åè§„åˆ™åŠ¨æ€åŠ å…¥AOPAspect
2. å°†Xçš„IMPæ›¿æ¢ä¸º_objc_msgForwardï¼Œç”¨è¿™ç§æ¯”è¾ƒtrickyçš„æ–¹å¼æ¥è§¦å‘æ¶ˆæ¯è½¬å‘æµç¨‹
3. å°†ClassAä¸­åŸæœ‰çš„forwardingTargetForSelector:çš„IMPä»¥ç‰¹å®šçš„å‘½åè§„åˆ™å­˜å…¥AOPAspect
4. å°†ClassAçš„forwardingTargetForSelectorï¼šçš„IMPç”¨AOPApectä¸­çš„baseClassForwardingTargetForSelectoræ›¿æ¢ï¼Œå…¶ä¸­çš„å…·ä½“é€»è¾‘è§ä¸‹é¢çš„ä»£ç 

åè¾¹çš„å°±æ˜¯å°†æ‹¦æˆªå™¨çš„ä¿¡æ¯å’Œblockå­˜å…¥åˆ°AOPAspectä¸­ï¼Œç»†èŠ‚å°±ä¸è®²äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åˆ°githubä¸Šçœ‹çœ‹åŸå§‹ç‰ˆ
</code></pre>

<p><img src="/images/iosapo006.png" title="Caption" ></p>

<h4>æ‹¦æˆªå™¨(intercepter)æ‰§è¡Œæµç¨‹</h4>

<p><img src="/images/iosapo007.png" title="Caption" ></p>

<p>è¯´æ˜ï¼šï¼ˆå›¾ä¸­m:ä»£è¡¨Methodï¼ŒClassAæ˜¯AOPçš„ç›®æ ‡ç±»ï¼ŒXæ˜¯AOPçš„ç›®æ ‡æ–¹æ³•ï¼ŒAOPAspectæ˜¯AOPå¤„ç†ç±»-å•ä¾‹,IMPæ˜¯æ–¹æ³•å¯¹åº”çš„å®ç°ï¼‰</p>

<p>å¼€å§‹è°ƒç”¨ï¼Œobjc_msgSendå¼€å§‹æŸ¥æ‰¾SELä¸ºXçš„IMPï¼ŒæŸ¥åˆ°ç»“æœä¸º_objc_msgForwardï¼Œè§¦å‘ClassAçš„è½¬å‘æµç¨‹</p>

<pre><code>1. ClassAä¸­è½¬å‘æµç¨‹è°ƒç”¨forwardingTargetForSelector:ï¼Œå®é™…ä¼šè°ƒç”¨æ›¿æ¢ä¸Šå»çš„baseClassForwardingTargetForSelector:çš„IMPï¼Œè¿™ä¸ªIMPæ­£å¸¸æƒ…å†µä¸‹ä¼šè¿”å›AOPAspectçš„å•ä¾‹ä½œä¸ºtargetï¼ˆä»£ç è§ä¸Šæ–‡å›¾ï¼‰
2. æ¥ä¸‹æ¥å¼€å§‹åœ¨AOPAspectçš„å•ä¾‹ä¸­æ‰§è¡Œè½¬å‘æµç¨‹ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„3.1-3.5çš„è·³è½¬æŸ¥æ‰¾ï¼Œæœ€ç»ˆä¼šè§¦å‘è½¬å‘æµç¨‹çš„forwardingInvocationæ–¹æ³•

3. åœ¨forwardingInvocationä¸­è§¦å‘ä¸€ç³»åˆ—çš„interceptorsçš„æ‰§è¡Œï¼ˆåŒ…æ‹¬åŸå§‹çš„Xçš„IMPï¼‰ï¼Œä»£ç è§ä¸‹å›¾
4. åè¾¹çš„interceptorçš„æ‰§è¡Œç»†èŠ‚ä¹Ÿç•¥è¿‡äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åˆ°githubä¸Šçœ‹çœ‹åŸå§‹ç‰ˆ
</code></pre>

<p><img src="/images/iCocosPublic.jpg" title="Caption" ></p>

<h2>AOPæ¡ˆä¾‹</h2>

<p>è¿™é‡Œä¸¾ä¸ªä¾‹å­,æˆ‘ä»¬æœ‰ä¸ªæ–¹æ³•sumA:andB:, ç”¨æ¥è¿”å›abä¹‹å’Œçš„ä¸€ä¸ªå­—ä¸²,æˆ‘ä»¬åœ¨è¿™ä¸ªæ–¹æ³•å‰å’Œæ–¹æ³•åéƒ½å¢åŠ ä¸ªä¸€æ®µä»£ç </p>

<pre><code>åœ¨è¿è¡Œæ–¹æ³•å‰æˆ‘ä»¬æŠŠå‚æ•°æ”¹æˆ2å’Œ3, å½“ç„¶è¿™é‡Œæ˜¯æ¼”ç¤ºç”¨,å®é™…ç”¨çš„æ—¶å€™åˆ«æ”¹å‚æ•°,ä¸ç„¶å…¶ä»–åŒäº‹çœŸçš„è¦éª‚äººäº†
åœ¨è¿è¡Œæ–¹æ³•åæˆ‘ä»¬è¾“å‡ºä¼ å…¥çš„å‚æ•°å’Œè¿”å›å€¼
</code></pre>

<p>åœ¨CODEä¸ŠæŸ¥çœ‹ä»£ç ç‰‡æ´¾ç”Ÿåˆ°æˆ‘çš„ä»£ç ç‰‡</p>

<pre><code>- (void)clickTestAop:(id)sender  
{  
    AopTestM *test = [[AopTestM alloc] init];  
    NSLog(@"run1");  
    [test sumA:1 andB:2];  

    NSString *before = [XYAOP interceptClass:[AopTestM class] beforeExecutingSelector:@selector(sumA:andB:) usingBlock:^(NSInvocation *invocation) {  
        int a = 3;  
        int b = 4;  

        [invocation setArgument:&amp;a atIndex:2];  
        [invocation setArgument:&amp;b atIndex:3];  

        NSLog(@"berore fun. a = %d, b = %d", a , b);  
    }];  

    NSString *after =  [XYAOP interceptClass:[AopTestM class] afterExecutingSelector:@selector(sumA:andB:) usingBlock:^(NSInvocation *invocation) {  
        int a;  
        int b;  
        NSString *str;  

        [invocation getArgument:&amp;a atIndex:2];  
        [invocation getArgument:&amp;b atIndex:3];  
        [invocation getReturnValue:&amp;str];  

        NSLog(@"after fun. a = %d, b = %d, sum = %@", a , b, str);  
    }];  

    NSLog(@"run2");  
    [test sumA:1 andB:2];  

    [XYAOP removeInterceptorWithIdentifier:before];  
    [XYAOP removeInterceptorWithIdentifier:after];  

    NSLog(@"run3");  
    [test sumA:1 andB:2];  
}   

- (NSString *)sumA:(int)a andB:(int)b  
{  
    int value = a + b;  
    NSString *str = [NSString stringWithFormat:@"fun running. sum : %d", value];  
    NSLog(@"%@", str);  

    return str;  
}  
</code></pre>

<p>æˆ‘ä»¬æ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶å€™,å¤§ä¼™çŒœçŒœç»“æœæ˜¯å•¥.ç»“æœå¦‚ä¸‹</p>

<pre><code>2014-10-28 22:52:47.215 JoinShow[3751:79389] run1  
2014-10-28 22:52:52.744 JoinShow[3751:79389] fun running. sum : 3  
2014-10-28 22:52:52.745 JoinShow[3751:79389] run2  
2014-10-28 22:52:52.745 JoinShow[3751:79389] berore fun. a = 3, b = 4  
2014-10-28 22:52:52.745 JoinShow[3751:79389] fun running. sum : 7  
2014-10-28 22:52:52.745 JoinShow[3751:79389] after fun. a = 3, b = 4, sum = fun running. sum : 7  
2014-10-28 22:52:52.746 JoinShow[3751:79389] run3  
2014-10-28 22:52:52.746 JoinShow[3751:79389] fun running. sum : 3  
</code></pre>

<h2>AOPåº“</h2>

<p>ä¸€ä¸ªç®€æ´é«˜æ•ˆçš„ç”¨äºä½¿iOSæ”¯æŒAOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„åº“.å®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨ä¸æ”¹å˜ä¸€ä¸ªç±»æˆ–ç±»å®ä¾‹çš„ä»£ç çš„å‰æä¸‹,æœ‰æ•ˆæ›´æ”¹ç±»çš„è¡Œä¸º.æ¯”iOSä¼ ç»Ÿçš„ AOPæ–¹æ³•,æ›´åŠ ç®€å•é«˜æ•ˆ.æ”¯æŒåœ¨æ–¹æ³•æ‰§è¡Œçš„å‰/åæˆ–æ›¿ä»£åŸæ–¹æ³•æ‰§è¡Œ.æ›¾ç»æ˜¯ PSPDFKit çš„ä¸€éƒ¨åˆ†,PSPDFKit,åœ¨Dropboxå’ŒEvernoteä¸­éƒ½æœ‰åº”ç”¨,ç°åœ¨å•ç‹¬å•ç‹¬å¼€æºå‡ºæ¥ç»™å¤§å®¶ä½¿ç”¨.</p>

<h4>é¡¹ç›®ä¸»é¡µ: Aspects</h4>

<p>æœ€æ–°å®ä¾‹:<a href="https://github.com/steipete/Aspects/archive/master.zip">ç‚¹å‡»ä¸‹è½½</a></p>

<blockquote><p>æ³¨: AOPæ˜¯ä¸€ç§å®Œå…¨ä¸åŒäºOOPçš„è®¾è®¡æ¨¡å¼.æ›´å¤šä¿¡æ¯,å¯ä»¥å‚è€ƒè¿™é‡Œ: AOP ç™¾åº¦ç™¾ç§‘</p></blockquote>

<h5>å®‰è£…ä½¿ç”¨</h5>

<p>CocoaPods å®‰è£…</p>

<pre><code>pod "Aspects"
</code></pre>

<p>æ‰‹åŠ¨å®‰è£…</p>

<pre><code>æŠŠæ–‡ä»¶ Aspects.h/m æ‹–åˆ°å·¥ç¨‹ä¸­å³å¯.
</code></pre>

<h5>ä½¿ç”¨</h5>

<p>Aspects ç”¨äºæ”¯æŒAOP(é¢å‘åˆ‡é¢ç¼–ç¨‹)æ¨¡å¼,ç”¨äºéƒ¨åˆ†è§£å†³OOP(é¢å‘å¯¹è±¡)æ¨¡å¼æ— æ³•è§£å†³çš„ç‰¹å®šé—®é¢˜.å…·ä½“æŒ‡çš„æ˜¯é‚£äº›åœ¨å¤šä¸ªæ–¹æ³•æœ‰äº¤å‰,æ— æ³•æˆ–å¾ˆéš¾è¢«æœ‰æ•ˆå½’ç±»çš„æ“ä½œ,æ¯”å¦‚:</p>

<pre><code>ä¸è®ºä½•æ—¶ç”¨æˆ·é€šè¿‡å®¢æˆ·ç«¯è·å–æœåŠ¡å™¨ç«¯æ•°æ®,æƒé™æ£€æŸ¥æ€»æ˜¯å¿…é¡»çš„.
ä¸è®ºä½•æ—¶ç”¨æˆ·å’Œå¸‚åœºäº¤äº’,æ€»åº”è¯¥æ›´å…·ç”¨æˆ·çš„æ“ä½œæä¾›ç›¸åº”åœ°è´­ä¹°å‚è€ƒæˆ–ç›¸å…³å•†å“.
æ‰€æœ‰éœ€è¦æ—¥å¿—è®°å½•çš„æ“ä½œ.
</code></pre>

<h5>æ¥å£æ¦‚è¿°</h5>

<p>Aspects ç»™ NSObject æ‰©å±•äº†ä¸‹é¢çš„æ–¹æ³•:</p>

<pre><code>/// ä¸ºä¸€ä¸ªæŒ‡å®šçš„ç±»çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰/æ›¿æ¢/å,æ·»åŠ ä¸€æ®µä»£ç å—.å¯¹è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½ä¼šèµ·ä½œç”¨.
///
/// @param block  æ–¹æ³•è¢«æ·»åŠ é’©å­æ—¶,Aspectesä¼šæ‹·è´æ–¹æ³•çš„ç­¾åä¿¡æ¯.
/// ç¬¬ä¸€ä¸ªå‚æ•°å°†ä¼šæ˜¯ `id&lt;AspectInfo&gt;`,ä½™ä¸‹çš„å‚æ•°æ˜¯æ­¤è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°.
/// è¿™äº›å‚æ•°æ˜¯å¯é€‰çš„,å¹¶å°†è¢«ç”¨äºä¼ é€’ç»™blockä»£ç å—å¯¹åº”ä½ç½®çš„å‚æ•°.
/// ä½ ç”šè‡³ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‚æ•°æˆ–åªæœ‰ä¸€ä¸ª`id&lt;AspectInfo&gt;`å‚æ•°çš„blockä»£ç å—.
///
/// @æ³¨æ„ ä¸æ”¯æŒç»™é™æ€æ–¹æ³•æ·»åŠ é’©å­.
/// @return è¿”å›ä¸€ä¸ªå”¯ä¸€å€¼,ç”¨äºå–æ¶ˆæ­¤é’©å­.
+ (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector
                      withOptions:(AspectOptions)options
                       usingBlock:(id)block
                            error:(NSError **)error;

/// ä¸ºä¸€ä¸ªæŒ‡å®šçš„å¯¹è±¡çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰/æ›¿æ¢/å,æ·»åŠ ä¸€æ®µä»£ç å—.åªä½œç”¨äºå½“å‰å¯¹è±¡.
 - (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error; - (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error; 
/// æ’¤é”€ä¸€ä¸ªAspect é’©å­.
/// @return YES æ’¤é”€æˆåŠŸ, å¦åˆ™è¿”å› NO. 
id&lt;AspectToken&gt; aspect = ...; 
[aspect remove];
</code></pre>

<p>æ‰€æœ‰çš„è°ƒç”¨,éƒ½ä¼šæ˜¯çº¿ç¨‹å®‰å…¨çš„.Aspects ä½¿ç”¨äº†Objective-C çš„æ¶ˆæ¯è½¬å‘æœºä¼š,ä¼šæœ‰ä¸€å®šçš„æ€§èƒ½æ¶ˆè€—.æ‰€æœ‰å¯¹äºè¿‡äºé¢‘ç¹çš„è°ƒç”¨,ä¸å»ºè®®ä½¿ç”¨ Aspects.Aspectsæ›´é€‚ç”¨äºè§†å›¾/æ§åˆ¶å™¨ç›¸å…³çš„ç­‰æ¯ç§’è°ƒç”¨ä¸è¶…è¿‡1000æ¬¡çš„ä»£ç .</p>

<p>å¯ä»¥åœ¨è°ƒè¯•åº”ç”¨æ—¶,ä½¿ç”¨AspectsåŠ¨æ€æ·»åŠ æ—¥å¿—è®°å½•åŠŸèƒ½.</p>

<pre><code>[UIViewController aspect_hookSelector:@selector(viewWillAppear:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo, BOOL animated) {
    NSLog(@"æ§åˆ¶å™¨ %@ å°†è¦æ˜¾ç¤º: %tu", aspectInfo.instance, animated);
} error:NULL];
</code></pre>

<p>ä½¿ç”¨å®ƒ,åˆ†æåŠŸèƒ½çš„è®¾ç½®ä¼šå¾ˆç®€å•:</p>

<pre><code>https://github.com/orta/ARAnalytics
</code></pre>

<p>ä½ å¯ä»¥åœ¨ä½ çš„æµ‹è¯•ç”¨ä¾‹ä¸­ç”¨å®ƒæ¥æ£€æŸ¥æŸä¸ªæ–¹æ³•æ˜¯å¦è¢«çœŸæ­£è°ƒç”¨(å½“æ¶‰åŠåˆ°ç»§æ‰¿æˆ–ç±»ç›®æ‰©å±•æ—¶,å¾ˆå®¹æ˜“å‘ç”ŸæŸä¸ªçˆ¶ç±»/å­ç±»æ–¹æ³•æœªæŒ‰é¢„æœŸè°ƒç”¨çš„æƒ…å†µ):</p>

<pre><code>- (void)testExample {
    TestClass *testClass = [TestClass new];
    TestClass *testClass2 = [TestClass new];

    __block BOOL testCallCalled = NO;
    [testClass aspect_hookSelector:@selector(testCall) withOptions:AspectPositionAfter usingBlock:^{
        testCallCalled = YES;
    } error:NULL];

    [testClass2 testCallAndExecuteBlock:^{
        [testClass testCall];
    } error:NULL];
    XCTAssertTrue(testCallCalled, @"è°ƒç”¨testCallAndExecuteBlock å¿…é¡»è°ƒç”¨ testCall");
}
</code></pre>

<p>å®ƒå¯¹è°ƒè¯•åº”ç”¨çœŸçš„ä¼šæä¾›å¾ˆå¤§çš„ä½œç”¨.è¿™é‡Œæˆ‘æƒ³è¦çŸ¥é“ç©¶ç«Ÿä½•æ—¶è½»å‡»æ‰‹åŠ¿çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–(å¦‚æœæ˜¯æŸä¸ªä½ è‡ªå®šä¹‰çš„æ‰‹åŠ¿çš„å­ç±»,ä½ å¯ä»¥é‡å†™setState:æ–¹æ³•æ¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœ;ä½†è¿™é‡Œçš„çœŸæ­£ç›®çš„æ˜¯,æ•æ‰æ‰€æœ‰çš„å„ç±»æ§ä»¶çš„è½»å‡»æ‰‹åŠ¿,ä»¥å‡†ç¡®åˆ†æåŸå› ):</p>

<pre><code>[_singleTapGesture aspect_hookSelector:@selector(setState:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo) {
    NSLog(@"%@: %@", aspectInfo.instance, aspectInfo.arguments);
} error:NULL];
</code></pre>

<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½ ç›‘æµ‹ä¸€ä¸ªæ¨¡æ€æ˜¾ç¤ºçš„æ§åˆ¶å™¨ä½•æ—¶æ¶ˆå¤±çš„ç¤ºä¾‹.é€šå¸¸,ä½ ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªå­ç±»,æ¥å®ç°ç›¸ä¼¼çš„æ•ˆæœ,ä½†ä½¿ç”¨ Aspects å¯ä»¥æœ‰æ•ˆå‡å°ä½ çš„ä»£ç é‡:</p>

<pre><code>@implementation UIViewController (DismissActionHook)

// Will add a dismiss action once the controller gets dismissed.
- (void)pspdf_addWillDismissAction:(void (^)(void))action {
    PSPDFAssert(action != NULL);

    [self aspect_hookSelector:@selector(viewWillDisappear:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo) {
        if ([aspectInfo.instance isBeingDismissed]) {
            action();
        }
    } error:NULL];
}

@end
</code></pre>

<h5>å¯¹è°ƒè¯•çš„å¥½å¤„</h5>

<p>Aspectes ä¼šè‡ªåŠ¨æ ‡è®°è‡ªå·±,æ‰€æœ‰å¾ˆå®¹æ˜“åœ¨è°ƒç”¨æ ˆä¸­æŸ¥çœ‹æŸä¸ªæ–¹æ³•æ˜¯å¦å·²ç»è°ƒç”¨:</p>

<p>åœ¨è¿”å›å€¼ä¸ä¸ºvoidçš„æ–¹æ³•ä¸Šä½¿ç”¨ Aspects</p>

<p>ä½ å¯ä»¥ä½¿ç”¨ NSInvocation å¯¹è±¡ç±»è‡ªå®šä¹‰è¿”å›å€¼:</p>

<pre><code>[PSPDFDrawView aspect_hookSelector:@selector(shouldProcessTouches:withEvent:) withOptions:AspectPositionInstead usingBlock:^(id&lt;AspectInfo&gt; info, NSSet *touches, UIEvent *event) {
    // è°ƒç”¨æ–¹æ³•åŸæ¥çš„å®ç°.
    BOOL processTouches;
    NSInvocation *invocation = info.originalInvocation;
    [invocation invoke];
    [invocation getReturnValue:&amp;processTouches];

    if (processTouches) {
        processTouches = pspdf_stylusShouldProcessTouches(touches, event);
        [invocation setReturnValue:&amp;processTouches];
    }
} error:NULL];
</code></pre>

<h5>å…¼å®¹æ€§ä¸é™åˆ¶</h5>

<p>å½“åº”ç”¨äºæŸä¸ªç±»æ—¶(ä½¿ç”¨ç±»æ–¹æ³•æ·»åŠ é’©å­),ä¸èƒ½åŒæ—¶hookçˆ¶ç±»å’Œå­ç±»çš„åŒä¸€ä¸ªæ–¹æ³•;å¦åˆ™ä¼šå¼•èµ·å¾ªç¯è°ƒç”¨é—®é¢˜.ä½†æ˜¯,å½“åº”ç”¨äºæŸä¸ªç±»çš„ç¤ºä¾‹æ—¶(ä½¿ç”¨å®ä¾‹æ–¹æ³•æ·»åŠ é’©å­),ä¸å—æ­¤é™åˆ¶.
ä½¿ç”¨KVOæ—¶,æœ€å¥½åœ¨ aspect_hookSelector: è°ƒç”¨ä¹‹åæ·»åŠ è§‚å¯Ÿè€…;å¦åˆ™å¯èƒ½ä¼šå¼•èµ·å´©æºƒ.</p>

<blockquote><p>æœ€åï¼šå¦‚æœä½ å¯¹ioså¼€å‘ä¸­çš„å“åº”å¼ç¼–ç¨‹ï¼Œé“¾å¼ç¼–ç¨‹ï¼Œå‡½æ•°å¼ç¼–ç¨‹ä¹Ÿæœ‰ç ”ç©¶æˆ–è€…æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå¯ä»¥ç§èŠæˆ‘ï¼Œæˆ–è€…ä¸€èµ·äº¤æµå­¦ä¹ ï¼</p></blockquote>

<hr />

<pre><code>Q Qï¼š2211523682/790806573

å¾®ä¿¡ï¼š18370997821/13148454507

å¾®åšWB:http://weibo.com/u/3288975567?is_hot=1

gitåšæ–‡ï¼šhttp://al1020119.github.io/

githubï¼šhttps://github.com/al1020119
</code></pre>

<p><img src="/images/iCocosCoder.jpg" title="Caption" ></p>

<p><img src="/images/iCocosPublic.jpg" title="Caption" ></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">iCocos</span></span>

      




<time class='entry-date' datetime='2016-10-14T11:45:17+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:45 am</span></time>
      


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/10/13/iosda-shen-zhi-lu-swift-pian/" title="Previous Post: iOSå¤§ç¥ä¹‹è·¯â€”â€”Swiftç¯‡">&laquo; iOSå¤§ç¥ä¹‹è·¯â€”â€”Swiftç¯‡</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/10/14/ioszhuang-bi-pian-lian-shi-bian-cheng/" title="Next Post: iOSè£…é€¼ç¯‡â€”â€”é“¾å¼ç¼–ç¨‹">iOSè£…é€¼ç¯‡â€”â€”é“¾å¼ç¼–ç¨‹ &raquo;</a>
      
    </p>
  </footer>
</article>



  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title="iOSè£…é€¼ç¯‡â€”â€”APOç¼–ç¨‹"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"icocoscao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
    <h1>æ–‡ç« åˆ†ç±»</h1>
    <ul id="categories">
        <li class='category'><a href='/blog/categories/algorithms/'>algorithms (6)</a></li>
<li class='category'><a href='/blog/categories/and/'>and (14)</a></li>
<li class='category'><a href='/blog/categories/apples/'>apples (2)</a></li>
<li class='category'><a href='/blog/categories/application/'>application (1)</a></li>
<li class='category'><a href='/blog/categories/architecture/'>architecture (2)</a></li>
<li class='category'><a href='/blog/categories/audio/'>audio (8)</a></li>
<li class='category'><a href='/blog/categories/audio-video/'>audio-video (1)</a></li>
<li class='category'><a href='/blog/categories/data/'>data (6)</a></li>
<li class='category'><a href='/blog/categories/developer/'>developer (16)</a></li>
<li class='category'><a href='/blog/categories/foundation/'>foundation (31)</a></li>
<li class='category'><a href='/blog/categories/full/'>full (13)</a></li>
<li class='category'><a href='/blog/categories/low-level/'>low-level (4)</a></li>
<li class='category'><a href='/blog/categories/lve/'>lve (8)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (4)</a></li>
<li class='category'><a href='/blog/categories/others/'>others (1)</a></li>
<li class='category'><a href='/blog/categories/performance/'>performance (12)</a></li>
<li class='category'><a href='/blog/categories/practical/'>practical (1)</a></li>
<li class='category'><a href='/blog/categories/radio/'>radio (8)</a></li>
<li class='category'><a href='/blog/categories/reverse/'>reverse (25)</a></li>
<li class='category'><a href='/blog/categories/senior/'>senior (40)</a></li>
<li class='category'><a href='/blog/categories/stack/'>stack (13)</a></li>
<li class='category'><a href='/blog/categories/structures/'>structures (6)</a></li>
<li class='category'><a href='/blog/categories/summarize/'>summarize (5)</a></li>
<li class='category'><a href='/blog/categories/tools/'>tools (5)</a></li>
<li class='category'><a href='/blog/categories/video/'>video (8)</a></li>

    </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/10/20/apptai-pang-liao-jian-fei/">Appå¤ªèƒ–äº†â€”â€”å‡è‚¥ğŸ˜‚</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/16/ioskai-fa-chang-yong-gong-neng-dai-ma-ji-jin-(you-xiu-pian-)/">iOSå¼€å‘â€”â€”å¸¸ç”¨åŠŸèƒ½ä»£ç é›†é”¦ï¼ˆå‹ç§€ç¯‡ï¼‰</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/14/ioszhuang-bi-pian-xiang-ying-shi-bian-cheng/">iOSè£…é€¼ç¯‡â€”â€”å“åº”å¼ç¼–ç¨‹</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/14/ioszhuang-bi-pian-han-shu-shi-bian-cheng/">iOSè£…é€¼ç¯‡â€”â€”å‡½æ•°å¼ç¼–ç¨‹</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/14/ioszhuang-bi-pian-lian-shi-bian-cheng/">iOSè£…é€¼ç¯‡â€”â€”é“¾å¼ç¼–ç¨‹</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/al1020119">@al1020119</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'al1020119',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





<section>
<h1>åšå®¢<abbr title="The word 'åšå®¢' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'åšå®¢', not for image.">&trade;</abbr></h1>
<a href="http://al1020119.github.io/blog/2016/10/14/ioszhuang-bi-pian-apobian-cheng/"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=http://al1020119.github.io/blog/2016/10/14/ioszhuang-bi-pian-apobian-cheng/" alt="post-qrcode"></a></section>


<section>
<h1>github<abbr title="The word 'github' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'github', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosgithub.png" alt="post-qrcode"></a></section>


<section>
<h1>å¾®ä¿¡<abbr title="The word 'å¾®ä¿¡' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å¾®ä¿¡', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosWX.png" alt="post-qrcode"></a></section>


<section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosMGC.png" alt="post-qrcode"></a><section>
  
  
</section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocos520.png" alt="post-qrcode"></a></section>
<section>
    <h1>è®¿å®¢ç»Ÿè®¡</h1>
    <br/>
    <a href="http://s07.flagcounter.com/more/2SH"><img src="http://s07.flagcounter.com/count/2SH/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
</section><section>
    <h1>æ–°æµªå¾®åš</h1>
    <ul id="weibo">
        <li>
            
            <!-- åœ¨æ­¤æ’å…¥è·å¾—çš„å¾®åšç§€ä»£ç  -->
            <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3288975567&verifier=20ffcedd&dpc=1"></iframe>
            
        </li>
    </ul>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - iCocos -
<span class="credit">welcome to <a href="http://al1020119.github.io">æ›¹#é»</a></span>
</p>

</footer>
  






<!--
-->



</body>
</html>
