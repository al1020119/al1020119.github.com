
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>CoreDataè¿˜æœ‰æ’’ï¼Ÿ - iOSæ¢¦å·¥å‚</title>
  <meta name="author" content="iCocos">

  
  <meta name="description" content="iCocosåšå®¢">
  <meta name="keywords" content="iCocos, iOSå¼€å‘, åšå®¢, æŠ€æœ¯åˆ†æ, æ–‡ç« , å­¦ä¹ , æ›¹é», æ›¹ç†é¹">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://al1020119.github.io/blog/2016/07/04/coredatechaiyousa/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iOSæ¢¦å·¥å‚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iOSæ¢¦å·¥å‚</a></h1>
  
    <h2>iCocosâ€”â€”ä¸æˆ˜èƒœè‡ªå·±ï¼Œä½•ä»¥æ”¹å˜æœªæ¥ï¼</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="al1020119.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">åšæ–‡</a></li>
  <li><a href="/blog/archives">å½’æ¡£</a></li>
  <li><a href="/icocos">iCocos</a></li>
  <li><a href="/about">æ–‡ç« </a></li>
  <li><a href="/other">å…¶ä»–</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">CoreDataè¿˜æœ‰æ’’ï¼Ÿ</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-07-04T06:59:42+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>6:59 am</span></time>
        
        
        |   <a href="#comments">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>ä¹‹å‰ä¸¤ç¯‡æ–‡ç« éƒ½æ¯”è¾ƒåç†è®ºï¼Œæ–‡å­—è¡¨è¾¾æ¯”è¾ƒå¤šä¸€äº›ï¼Œä½†éƒ½æ˜¯å¹²è´§ï¼å­¦ä¹ æ—¶å…ˆç†è§£ç†è®ºçŸ¥è¯†ï¼Œæ‰èƒ½æ›´å¥½çš„å¸®åŠ©åé¢çš„ç†è§£ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå°†ä¼šæ¶‰åŠå…³äºCoreDataçš„ä¸€äº›å¤æ‚æ“ä½œï¼Œè¿™äº›æ“ä½œä¼šæ¶‰åŠåˆ†é¡µæŸ¥è¯¢ã€æ¨¡ç³ŠæŸ¥è¯¢ã€æ‰¹å¤„ç†ç­‰é«˜çº§æ“ä½œã€‚é€šè¿‡è¿™äº›æ“ä½œå¯ä»¥æ›´å¥½çš„ä½¿ç”¨CoreDataï¼Œæå‡CoreDataæ€§èƒ½ã€‚æ–‡ç« ä¸­å°†ä¼šå‡ºç°å¤§é‡ç¤ºä¾‹ä»£ç ï¼Œé€šè¿‡ä»£ç çš„æ–¹å¼æ›´æœ‰åŠ©äºç†è§£ã€‚</p>

<p>æ–‡ç« å†…å®¹è¿˜ä¼šæ¯”è¾ƒå¤šï¼Œå¸Œæœ›å„ä½è€å¿ƒçœ‹å®Œã€‚æ–‡ç« ä¸­å¦‚æœ‰ç–æ¼æˆ–é”™è¯¯ï¼Œè¿˜è¯·å„ä½åŠæ—¶æå‡ºï¼Œè°¢è°¢ï¼</p>

<p>NSPredicate</p>

<!--more-->


<p>æ¦‚è¿°</p>

<p>åœ¨iOSå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šéœ€æ±‚éƒ½éœ€è¦ç”¨åˆ°è¿‡æ»¤æ¡ä»¶ã€‚ä¾‹å¦‚è¿‡æ»¤ä¸€ä¸ªé›†åˆå¯¹è±¡ä¸­å­˜å‚¨çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡Foundationæ¡†æ¶ä¸‹çš„NSPredicateç±»æ¥æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</p>

<p>CoreDataä¸­å¯ä»¥é€šè¿‡è®¾ç½®NSFetchRequestç±»çš„predicateå±æ€§ï¼Œæ¥è®¾ç½®ä¸€ä¸ªNSPredicateç±»å‹çš„è°“è¯å¯¹è±¡å½“åšè¿‡æ»¤æ¡ä»¶ã€‚é€šè¿‡è®¾ç½®è¿™ä¸ªè¿‡æ»¤æ¡ä»¶ï¼Œå¯ä»¥åªè·å–ç¬¦åˆè¿‡æ»¤æ¡ä»¶çš„æ‰˜ç®¡å¯¹è±¡ï¼Œä¸ä¼šå°†æ‰€æœ‰æ‰˜ç®¡å¯¹è±¡éƒ½åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è¿™æ ·æ˜¯éå¸¸èŠ‚çœå†…å­˜å’ŒåŠ å¿«æŸ¥æ‰¾é€Ÿåº¦çš„ï¼Œè®¾è®¡ä¸€ä¸ªå¥½çš„NSPredicateå¯ä»¥ä¼˜åŒ–CoreDataæœç´¢æ€§èƒ½ã€‚</p>

<p>è¯­æ³•</p>

<p>NSPredicateæ›´åŠ åå‘äºè‡ªç„¶è¯­è¨€ï¼Œä¸åƒSQLiteä¸€æ ·æœ‰å¾ˆå¤šå›ºå®šçš„è¯­æ³•ï¼Œçœ‹èµ·æ¥ä¹Ÿæ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚ä¾‹å¦‚ä¸‹é¢éœ€è¦æŸ¥æ‰¾æ¡ä»¶ä¸ºå¹´é¾„30å²ä»¥ä¸Šï¼Œå¹¶ä¸”åŒ…æ‹¬30å²çš„æ¡ä»¶ã€‚
1</p>

<pre><code>[NSPredicate predicateWithFormat:@"age &gt;= 30"]
</code></pre>

<p>è¿‡æ»¤é›†åˆå¯¹è±¡</p>

<p>å¯ä»¥é€šè¿‡NSPredicateå¯¹iOSä¸­çš„é›†åˆå¯¹è±¡æ‰§è¡Œè¿‡æ»¤æ“ä½œï¼Œå¯ä»¥æ˜¯NSArrayã€NSSetåŠå…¶å­ç±»ã€‚</p>

<p>å¯¹ä¸å¯å˜æ•°ç»„NSArrayæ‰§è¡Œçš„è¿‡æ»¤ï¼Œè¿‡æ»¤åä¼šè¿”å›ä¸€ä¸ªNSArrayç±»å‹çš„ç»“æœæ•°ç»„ï¼Œå…¶ä¸­å­˜å‚¨ç€ç¬¦åˆè¿‡æ»¤æ¡ä»¶çš„å¯¹è±¡ã€‚
1</p>

<pre><code>NSArray *results = [array filteredArrayUsingPredicate:predicate]
</code></pre>

<p>å¯¹å¯å˜æ•°ç»„NSMutableArrayæ‰§è¡Œçš„è¿‡æ»¤æ¡ä»¶ï¼Œè¿‡æ»¤åä¼šç›´æ¥æ”¹å˜åŸé›†åˆå¯¹è±¡å†…éƒ¨å­˜å‚¨çš„å¯¹è±¡ï¼Œåˆ é™¤ä¸ç¬¦åˆæ¡ä»¶çš„å¯¹è±¡ã€‚
1</p>

<pre><code>[arrayM filterUsingPredicate:predicate]
</code></pre>

<p>å¤åˆè¿‡æ»¤æ¡ä»¶</p>

<p>è°“è¯ä¸åªå¯ä»¥è¿‡æ»¤ç®€å•æ¡ä»¶ï¼Œè¿˜å¯ä»¥è¿‡æ»¤å¤æ‚æ¡ä»¶ï¼Œè®¾ç½®å¤åˆè¿‡æ»¤æ¡ä»¶ã€‚
1</p>

<pre><code>[NSPredicate predicateWithFormat:@"(age &lt; 25) AND (firstName = XiaoZhuang)"]
</code></pre>

<p>å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡NSCompoundPredicateå¯¹è±¡æ¥è®¾ç½®å¤åˆè¿‡æ»¤æ¡ä»¶ï¼Œè¿”å›ç»“æœæ˜¯ä¸€ä¸ªNSPredicateçš„å­ç±»NSCompoundPredicateå¯¹è±¡ã€‚
1</p>

<pre><code>[[NSCompoundPredicate alloc] initWithType:NSAndPredicateType subpredicates:@[predicate1, predicate2]]
</code></pre>

<p>æšä¸¾å€¼NSCompoundPredicateTypeå‚æ•°ï¼Œå¯ä»¥è®¾ç½®ä¸‰ç§å¤åˆæ¡ä»¶ï¼Œæšä¸¾å€¼éå¸¸ç›´è§‚å¾ˆå®¹æ˜“çœ‹æ‡‚ã€‚</p>

<pre><code>NSNotPredicateType

NSAndPredicateType

NSOrPredicateType
</code></pre>

<p>åŸºç¡€è¯­æ³•</p>

<p>ä¸‹é¢æ˜¯åˆ—ä¸¾çš„ä¸€äº›NSPredicateçš„åŸºç¡€è¯­æ³•ï¼Œè¿™äº›è¯­æ³•çœ‹èµ·æ¥éå¸¸å®¹æ˜“ç†è§£ï¼Œæ›´å¤æ‚çš„ç”¨æ³•å¯ä»¥å»çœ‹è‹¹æœçš„å®˜æ–¹APIã€‚</p>

<p><img src="/images/3001.png" title="Caption" ></p>

<p>æ­£åˆ™è¡¨è¾¾å¼</p>

<p>NSPredicateä¸­è¿˜å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å®Œæˆä¸€äº›å¤æ‚éœ€æ±‚ï¼Œè¿™ä½¿å¾—è°“è¯çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œä¾‹å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ‰‹æœºå·éªŒè¯çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
1
2</p>

<pre><code>NSString *mobile = @"^1(3[0-9]|5[0-35-9]|8[025-9])\\d{8}$";
NSPredicate *regexmobile = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", mobile];
</code></pre>

<p>æ¨¡ç³ŠæŸ¥è¯¢</p>

<p>NSPredicateæ”¯æŒå¯¹æ•°æ®çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¾‹å¦‚ä¸‹é¢ä½¿ç”¨é€šé…ç¬¦æ¥åŒ¹é…åŒ…å«lxzçš„ç»“æœï¼Œå…·ä½“CoreDataä¸­çš„ä½¿ç”¨åœ¨ä¸‹é¢ä¼šè®²åˆ°ã€‚
1</p>

<pre><code>[NSPredicate predicateWithFormat:@"name LIKE %@", @"*lxz*"]
</code></pre>

<p>keyPath</p>

<p>NSPredicateåœ¨åˆ›å»ºæŸ¥è¯¢æ¡ä»¶æ—¶ï¼Œè¿˜æ”¯æŒè®¾ç½®è¢«åŒ¹é…ç›®æ ‡çš„keyPathï¼Œä¹Ÿå°±æ˜¯è®¾ç½®æ›´æ·±å±‚è¢«åŒ¹é…çš„ç›®æ ‡ã€‚ä¾‹å¦‚ä¸‹é¢è®¾ç½®employeeçš„nameå±æ€§ä¸ºæŸ¥æ‰¾æ¡ä»¶ï¼Œå°±æ˜¯ç”¨ç‚¹è¯­æ³•è®¾ç½®çš„keyPathã€‚
1</p>

<pre><code>[NSPredicate predicateWithFormat:@"employee.name = %@", @"lxz"]
</code></pre>

<p>è®¾ç½®æŸ¥è¯¢æ¡ä»¶</p>

<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæ‰§è¡Œä¸‹é¢MOCçš„fetchRequestæ–¹æ³•ï¼Œä¸€èˆ¬éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªNSFetchRequestç±»å‹çš„å‚æ•°ã€‚è¿™ä¸ªrequestå‚æ•°å¯ä»¥åšä¸€äº›è®¾ç½®æ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥ä»¥è¾ƒä¼˜çš„æ€§èƒ½è·å–æŒ‡å®šçš„æ•°æ®ã€‚
1</p>

<pre><code>- (nullable NSArray *)executeFetchRequest:(NSFetchRequest *)request error:(NSError **)error;
</code></pre>

<p>NSFetchRequest</p>

<p>åœ¨æ‰§è¡Œfetchæ“ä½œå‰ï¼Œå¯ä»¥ç»™NSFetchRequestè®¾ç½®ä¸€äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°åŒ…æ‹¬è°“è¯ã€æ’åºç­‰æ¡ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€äº›åŸºç¡€çš„è®¾ç½®ã€‚</p>

<pre><code>è®¾ç½®æŸ¥æ‰¾å“ªä¸ªå®ä½“ï¼Œä»æ•°æ®åº“çš„è§’åº¦æ¥çœ‹å°±æ˜¯æŸ¥æ‰¾å“ªå¼ è¡¨ï¼Œé€šè¿‡fetchRequestWithEntityName:æˆ–åˆå§‹åŒ–æ–¹æ³•æ¥æŒ‡å®šè¡¨åã€‚

é€šè¿‡NSPredicateç±»å‹çš„å±æ€§ï¼Œå¯ä»¥è®¾ç½®æŸ¥æ‰¾æ¡ä»¶ï¼Œè¿™ä¸ªå±æ€§åœ¨å¼€å‘ä¸­ç”¨å¾—æœ€å¤šã€‚NSPredicateå¯ä»¥åŒ…æ‹¬å›ºå®šæ ¼å¼çš„æ¡ä»¶ä»¥åŠæ­£åˆ™è¡¨è¾¾å¼ã€‚

é€šè¿‡sortDescriptorså±æ€§ï¼Œå¯ä»¥è®¾ç½®è·å–ç»“æœæ•°ç»„çš„æ’åºæ–¹å¼ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è®¾ç½®å¤šç§æ’åºæ¡ä»¶ã€‚(ä½†æ˜¯æ³¨æ„æ¡ä»¶ä¸è¦å†²çª)

é€šè¿‡fetchOffsetå±æ€§è®¾ç½®ä»æŸ¥è¯¢ç»“æœçš„ç¬¬å‡ ä¸ªå¼€å§‹è·å–ï¼Œé€šè¿‡fetchLimitå±æ€§è®¾ç½®æ¯æ¬¡è·å–å¤šå°‘ä¸ªã€‚ä¸»è¦ç”¨äºåˆ†é¡µæŸ¥è¯¢ï¼Œåé¢ä¼šè®²ã€‚
</code></pre>

<p>MOCæ‰§è¡Œfetchæ“ä½œåï¼Œè·å–çš„ç»“æœæ˜¯ä»¥æ•°ç»„çš„å½¢å¼å­˜å‚¨çš„ï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„å°±æ˜¯æ‰˜ç®¡å¯¹è±¡ã€‚NSFetchRequestæä¾›äº†å‚æ•°resultTypeï¼Œå‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ã€‚é€šè¿‡è¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥è®¾ç½®æ‰§è¡Œfetchæ“ä½œåè¿”å›çš„æ•°æ®ç±»å‹ã€‚</p>

<pre><code>NSManagedObjectResultType: è¿”å›å€¼æ˜¯NSManagedObjectçš„å­ç±»ï¼Œä¹Ÿå°±æ˜¯æ‰˜ç®¡å¯¹è±¡ï¼Œè¿™æ˜¯é»˜è®¤é€‰é¡¹

NSManagedObjectIDResultType: è¿”å›NSManagedObjectIDç±»å‹çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯NSManagedObjectçš„IDï¼Œå¯¹å†…å­˜å ç”¨æ¯”è¾ƒå°ã€‚MOCå¯ä»¥é€šè¿‡NSManagedObjectIDå¯¹è±¡è·å–å¯¹åº”çš„æ‰˜ç®¡å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç¼“å­˜NSManagedObjectIDå‚æ•°æ¥èŠ‚çœå†…å­˜æ¶ˆè€—

NSDictionaryResultType: è¿”å›å­—å…¸ç±»å‹å¯¹è±¡

NSCountResultType: è¿”å›è¯·æ±‚ç»“æœçš„countå€¼ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å‘ç”Ÿåœ¨æ•°æ®åº“å±‚çº§çš„ï¼Œå¹¶ä¸éœ€è¦å°†æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­
</code></pre>

<p>è®¾ç½®è·å–æ¡ä»¶</p>

<pre><code>// å»ºç«‹è·å–æ•°æ®çš„è¯·æ±‚å¯¹è±¡ï¼Œå¹¶æŒ‡æ˜æ“ä½œEmployeeè¡¨
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
// è®¾ç½®è¯·æ±‚æ¡ä»¶ï¼Œé€šè¿‡è®¾ç½®çš„æ¡ä»¶ï¼Œæ¥è¿‡æ»¤å‡ºéœ€è¦çš„æ•°æ®
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name = %@", @"lxz"];
request.predicate = predicate;
// è®¾ç½®è¯·æ±‚ç»“æœæ’åºæ–¹å¼ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–ä¸€ç»„æ’åºæ–¹å¼ï¼Œæœ€åå°†æ‰€æœ‰çš„æ’åºæ–¹å¼æ·»åŠ åˆ°æ’åºæ•°ç»„ä¸­
NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"height" ascending:YES];
// NSSortDescriptorçš„æ“ä½œéƒ½æ˜¯åœ¨SQLiteå±‚çº§å®Œæˆçš„ï¼Œä¸ä¼šå°†å¯¹è±¡åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ‰€ä»¥å¯¹å†…å­˜çš„æ¶ˆè€—æ˜¯éå¸¸å°çš„
request.sortDescriptors = @[sort];
// æ‰§è¡Œè·å–è¯·æ±‚æ“ä½œï¼Œè·å–çš„æ‰˜ç®¡å¯¹è±¡å°†ä¼šè¢«å­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„ä¸­å¹¶è¿”å›
NSError *error = nil;
NSArray *employees = [context executeFetchRequest:request error:&amp;error];
[employees enumerateObjectsUsingBlock:^(Employee * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
    NSLog(@"Employee Name : %@, Height : %@, Brithday : %@", obj.name, obj.height, obj.brithday);
}];
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"CoreData Fetch Data Error : %@", error);
}
</code></pre>

<p>è¿™é‡Œè®¾ç½®NSFetchRequestå¯¹è±¡çš„ä¸€äº›è¯·æ±‚æ¡ä»¶ï¼Œè®¾ç½®æŸ¥æ‰¾Employeeè¡¨ä¸­nameä¸ºlxzçš„æ•°æ®ï¼Œå¹¶ä¸”å°†æ‰€æœ‰ç¬¦åˆçš„æ•°æ®ç”¨heightå€¼å‡åºçš„æ–¹å¼æ’åˆ—ã€‚</p>

<p>æœ‰å®ä½“å…³è”å…³ç³»</p>

<p>ä¸€ä¸ªæ¨¡å‹æ–‡ä»¶ä¸­çš„ä¸åŒå®ä½“é—´ï¼Œå¯ä»¥è®¾ç½®å®ä½“é—´çš„å…³è”å…³ç³»ï¼Œè¿™ä¸ªåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²è¿‡ã€‚å®ä½“å…³è”å…³ç³»åˆ†ä¸ºå¯¹ä¸€æˆ–å¯¹å¤šï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ˜¯å¦åŒå‘å…³è”ã€‚</p>

<p>è¿™é‡Œæ¼”ç¤ºçš„å®ä½“åªæ˜¯ç®€å•çš„To Oneçš„å…³ç³»ï¼Œå¹¶ä¸”ä¸‹é¢ä¼šç»™å‡ºè®¾ç½®æ˜¯å¦åŒå‘å…³è”çš„åŒºåˆ«å¯¹æ¯”ã€‚</p>

<p>æ’å…¥å®ä½“</p>

<pre><code>// åˆ›å»ºæ‰˜ç®¡å¯¹è±¡ï¼Œå¹¶å°†å…¶å…³è”åˆ°æŒ‡å®šçš„MOCä¸Š
Employee *zsEmployee = [NSEntityDescription insertNewObjectForEntityForName:@"Employee" inManagedObjectContext:context];
zsEmployee.name = @"zhangsan";
zsEmployee.height = @1.9f;
zsEmployee.brithday = [NSDate date];
Employee *lsEmployee = [NSEntityDescription insertNewObjectForEntityForName:@"Employee" inManagedObjectContext:context];
lsEmployee.name = @"lisi";
lsEmployee.height = @1.7f;
lsEmployee.brithday = [NSDate date];
Department *iosDepartment = [NSEntityDescription insertNewObjectForEntityForName:@"Department" inManagedObjectContext:context];
iosDepartment.departName = @"iOS";
iosDepartment.createDate = [NSDate date];
iosDepartment.employee = zsEmployee;
Department *androidDepartment = [NSEntityDescription insertNewObjectForEntityForName:@"Department" inManagedObjectContext:context];
androidDepartment.departName = @"android";
androidDepartment.createDate = [NSDate date];
androidDepartment.employee = lsEmployee;
// æ‰§è¡Œå­˜å‚¨æ“ä½œ
NSError *error = nil;
if (context.hasChanges) {
    [context save:&amp;error];
}
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"Association Table Add Data Error : %@", error);
}
</code></pre>

<p>ä¸Šé¢åˆ›å»ºäº†å››ä¸ªå®ä½“ï¼Œå¹¶ä¸”å°†Employeeéƒ½å…³è”åˆ°Departmentä¸Šï¼Œå®Œæˆå…³è”æ“ä½œåé€šè¿‡MOCå­˜å‚¨åˆ°æœ¬åœ°ã€‚</p>

<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢æ‰€æœ‰çš„æ‰˜ç®¡å¯¹è±¡åˆ›å»ºæ—¶ï¼Œéƒ½ä½¿ç”¨NSEntityDescriptionçš„insertæ–¹æ³•åˆ›å»ºï¼Œå¹¶å’Œä¸Šä¸‹æ–‡å»ºç«‹å…³ç³»ã€‚è¿™æ—¶å°±æƒ³é—®äº†ï¼Œæˆ‘èƒ½ç›´æ¥é‡‡ç”¨ä¼ ç»Ÿçš„initæ–¹æ³•åˆ›å»ºå—ï¼Ÿ</p>

<p>ä¼šå´©çš„ï¼åˆ›å»ºæ‰˜ç®¡å¯¹è±¡æ—¶éœ€è¦æŒ‡å®šMOCï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€çš„ç”Ÿæˆsetã€getæ–¹æ³•ã€‚ä½†æ˜¯ç›´æ¥é€šè¿‡initæ–¹æ³•åˆå§‹åŒ–çš„å¯¹è±¡ï¼Œç³»ç»Ÿæ˜¯ä¸çŸ¥é“è¿™é‡Œæ˜¯éœ€è¦ç³»ç»Ÿè‡ªèº«ç”Ÿæˆsetã€getæ–¹æ³•çš„ï¼Œè€Œä¸”ç³»ç»Ÿä¹Ÿä¸çŸ¥é“åº”è¯¥å¯¹åº”å“ªä¸ªMOCï¼Œä¼šå¯¼è‡´æ–¹æ³•æœªå®ç°çš„å´©æºƒã€‚æ‰€ä»¥å°±å‡ºç°äº†å¼€å‘ä¸­ç»å¸¸å‡ºç°çš„é”™è¯¯ï¼Œå¦‚ä¸‹é¢å´©æºƒä¿¡æ¯ï¼š
1</p>

<pre><code>-[Employee setName:]: unrecognized selector sent to instance 0x7fa665900f60
</code></pre>

<p>åŒå‘å…³è”</p>

<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æåˆ°è¿‡åŒå‘å…³è”çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è®¾ç½®Relationshipæ—¶Inverseæ˜¯å¦ä¸ºç©ºã€‚ä¸‹é¢æ˜¯Employeeå’ŒDepartmentåœ¨æ•°æ®åº“ä¸­ï¼Œè®¾ç½®inverseå’Œæ²¡æœ‰è®¾ç½®inverseçš„ä¸¤ç§æ•°æ®å­˜å‚¨ï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„å¯¹æ¯”å‡ºè®¾ç½®åŒå‘å…³è”çš„åŒºåˆ«ã€‚</p>

<p>æµ‹è¯•ä»£ç è¿˜æ˜¯ç”¨ä¸Šé¢æ’å…¥å®ä½“çš„ä»£ç ï¼Œåªæ˜¯æ›´æ”¹inverseé€‰é¡¹ã€‚</p>

<p>è®¾ç½®åŒå‘å…³è”</p>

<p><img src="/images/3002.png" title="Caption" ></p>

<p>Employee</p>

<p><img src="/images/3003.png" title="Caption" ></p>

<p>Department</p>

<p>æœªè®¾ç½®åŒå‘å…³è”</p>

<p><img src="/images/3004.png" title="Caption" ></p>

<p>Employee</p>

<p><img src="/images/3005.png" title="Caption" ></p>

<p>Department</p>

<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæœªè®¾ç½®åŒå‘å…³è”çš„å®ä½“ï¼ŒDepartmentå…³è”Employeeä¸ºå±æ€§å¹¶å­˜å‚¨åï¼ŒDepartmentè¡¨ä¸­çš„å…³ç³»æ˜¯å­˜åœ¨çš„ï¼Œä½†Employeeè¡¨ä¸­çš„å…³ç³»ä¾ç„¶æ˜¯ç©ºçš„ã€‚è€Œè®¾ç½®åŒå‘å…³è”åçš„å®ä½“ï¼Œåœ¨Departmentå…³è”Employeeä¸ºå±æ€§å¹¶å­˜å‚¨åï¼ŒEmployeeåœ¨è¡¨ä¸­è‡ªåŠ¨è®¾ç½®äº†å’ŒDepartmentçš„å…³ç³»ã€‚</p>

<p>åŒå‘å…³è”çš„å…³ç³»ä¸åªä½“ç°åœ¨æ•°æ®åº“ä¸­ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ‰˜ç®¡å¯¹è±¡çš„å…³è”å±æ€§ï¼Œä¹Ÿæ˜¯éšç€å‘ç”Ÿå˜åŒ–çš„ã€‚åŒå‘å…³è”çš„åŒæ–¹ï¼Œä¸€æ–¹çš„å…³è”å±æ€§è®¾ç½®å…³ç³»åï¼Œå¦ä¸€æ–¹å…³è”å±æ€§çš„å…³ç³»ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚ç”¨ä¸‹é¢çš„ä»£ç æ‰“å°ä¸€ä¸‹å„è‡ªçš„å…³è”å±æ€§ï¼Œç»“æœå’Œä¸Šé¢æ•°æ®åº“çš„å˜åŒ–æ˜¯ä¸€æ ·çš„ã€‚
1</p>

<pre><code>NSLog(@"Department : %@, Employee : %@", androidDepartment.employee, lsEmployee.department);
</code></pre>

<p>æŸ¥è¯¢æ“ä½œ</p>

<pre><code>// åˆ›å»ºè·å–æ•°æ®çš„è¯·æ±‚å¯¹è±¡ï¼Œå¹¶æŒ‡æ˜æ“ä½œDepartmentè¡¨
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Department"];
// è®¾ç½®è¯·æ±‚æ¡ä»¶ï¼Œè®¾ç½®employeeçš„nameä¸ºè¯·æ±‚æ¡ä»¶ã€‚NSPredicateçš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥è®¾ç½®keyPathæ¡ä»¶
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"employee.name = %@", @"lxz"];
request.predicate = predicate;
// æ‰§è¡ŒæŸ¥æ‰¾æ“ä½œ
NSError *error = nil;
NSArray *departments = [context executeFetchRequest:request error:&amp;error];
[departments enumerateObjectsUsingBlock:^(Department * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
    NSLog(@"Department Search Result DepartName : %@, employee name : %@", obj.departName, obj.employee.name);
}];
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"Department Search Error : %@", error);
}
</code></pre>

<p>æŸ¥æ‰¾Departmentå®ä½“ï¼Œå¹¶æ‰“å°å®ä½“å†…å®¹ã€‚å°±åƒä¸Šé¢è®²çš„åŒå‘å…³ç³»ä¸€æ ·ï¼Œæœ‰å…³è”å…³ç³»çš„å®ä½“ï¼Œè‡ªå·±è¢«æŸ¥æ‰¾å‡ºæ¥åï¼Œä¹Ÿä¼šå°†ä¸ä¹‹å…³è”çš„å…¶ä»–å®ä½“ä¹ŸæŸ¥æ‰¾å‡ºæ¥ï¼Œå¹¶ä¸”æŸ¥æ‰¾å‡ºæ¥çš„å®ä½“éƒ½æ˜¯å…³è”ç€MOCçš„ã€‚</p>

<p>åˆ†é¡µæŸ¥è¯¢</p>

<p>åœ¨ä»æœ¬åœ°å­˜å‚¨åŒºè·å–æ•°æ®æ—¶ï¼Œå¯ä»¥æŒ‡å®šä»ç¬¬å‡ ä¸ªè·å–ï¼Œä»¥åŠæœ¬æ¬¡æŸ¥è¯¢è·å–å¤šå°‘ä¸ªæ•°æ®ï¼Œè”åˆèµ·æ¥ä½¿ç”¨å°±æ˜¯åˆ†é¡µæŸ¥è¯¢ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œå•ç‹¬ä½¿ç”¨è¿™ä¸¤ä¸ªAPIã€‚</p>

<p>è¿™ç§éœ€æ±‚åœ¨å®é™…å¼€å‘ä¸­éå¸¸å¸¸è§ï¼Œä¾‹å¦‚TableViewä¸­ï¼Œä¸Šæ‹‰åŠ è½½æ•°æ®ï¼Œæ¯æ¬¡åŠ è½½20æ¡æ•°æ®ï¼Œå°±å¯ä»¥åˆ©ç”¨åˆ†é¡µæŸ¥è¯¢è½»æ¾å®ç°ã€‚</p>

<pre><code>// åˆ›å»ºè·å–æ•°æ®çš„è¯·æ±‚å¯¹è±¡ï¼Œå¹¶æŒ‡æ˜æ“ä½œEmployeeè¡¨
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
// è®¾ç½®æŸ¥æ‰¾èµ·å§‹ç‚¹ï¼Œè¿™é‡Œæ˜¯ä»æœç´¢ç»“æœçš„ç¬¬å…­ä¸ªå¼€å§‹è·å–
request.fetchOffset = 6;
// è®¾ç½®åˆ†é¡µï¼Œæ¯æ¬¡è¯·æ±‚è·å–å…­ä¸ªæ‰˜ç®¡å¯¹è±¡
request.fetchLimit = 6;
// è®¾ç½®æ’åºè§„åˆ™ï¼Œè¿™é‡Œè®¾ç½®èº«é«˜å‡åºæ’åº
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"height" ascending:YES];
request.sortDescriptors = @[descriptor];
// æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ
NSError *error = nil;
NSArray *employees = [context executeFetchRequest:request error:&amp;error];
[employees enumerateObjectsUsingBlock:^(Employee * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
    NSLog(@"Page Search Result Name : %@, height : %@", obj.name, obj.height);
}];
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"Page Search Data Error : %@", error);
}
</code></pre>

<p>ä¸Šé¢æ˜¯ä¸€ä¸ªæŒ‰ç…§èº«é«˜å‡åºæ’åºï¼Œåˆ†é¡µè·å–æœç´¢ç»“æœçš„ä¾‹å­ã€‚æŸ¥æ‰¾Employeeè¡¨ä¸­çš„å®ä½“ï¼Œå°†ç»“æœæŒ‰ç…§heightå­—æ®µå‡åºæ’åºï¼Œå¹¶ä»ç»“æœçš„ç¬¬å…­ä¸ªå¼€å§‹æŸ¥æ‰¾ï¼Œå¹¶ä¸”è®¾ç½®è·å–çš„æ•°é‡ä¹Ÿæ˜¯å…­ä¸ªã€‚</p>

<p>æ¨¡ç³ŠæŸ¥è¯¢</p>

<p>æœ‰æ—¶éœ€è¦è·å–å…·æœ‰æŸäº›ç›¸åŒç‰¹å¾çš„æ•°æ®ï¼Œè¿™æ ·å°±éœ€è¦å¯¹æŸ¥è¯¢çš„ç»“æœåšæ¨¡ç³ŠåŒ¹é…ã€‚åœ¨CoreDataæ‰§è¡Œæ¨¡ç³ŠåŒ¹é…æ—¶ï¼Œå¯ä»¥é€šè¿‡NSPredicateæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</p>

<pre><code>// åˆ›å»ºè·å–æ•°æ®çš„è¯·æ±‚å¯¹è±¡ï¼Œè®¾ç½®å¯¹Employeeè¡¨è¿›è¡Œæ“ä½œ
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
// åˆ›å»ºæ¨¡ç³ŠæŸ¥è¯¢æ¡ä»¶ã€‚è¿™é‡Œè®¾ç½®çš„å¸¦é€šé…ç¬¦çš„æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ¡ä»¶æ˜¯ç»“æœåŒ…å«lxz
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name LIKE %@", @"*lxz*"];
request.predicate = predicate;
// æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ
NSError *error = nil;
NSArray *employees = [context executeFetchRequest:request error:&amp;error];
[employees enumerateObjectsUsingBlock:^(Employee * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
    NSLog(@"Fuzzy Search Result Name : %@, height : %@", obj.name, obj.height);
}];
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"Fuzzy Search Data Error : %@", error);
}
</code></pre>

<p>ä¸Šé¢æ˜¯ä½¿ç”¨é€šé…ç¬¦çš„æ–¹å¼è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼ŒNSPredicateæ”¯æŒå¤šç§å½¢å¼çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¸‹é¢åˆ—ä¸¾ä¸€äº›ç®€å•çš„åŒ¹é…æ–¹å¼ã€‚æ¨¡ç³ŠæŸ¥è¯¢æ¡ä»¶å¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼Œæ‰€ä»¥æŸ¥è¯¢æ¡ä»¶å¤§å°å†™å‡å¯ã€‚</p>

<pre><code>ä»¥lxzå¼€å¤´
</code></pre>

<p>1</p>

<pre><code>NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name BEGINSWITH %@", @"lxz"];

ä»¥lxzç»“å°¾
</code></pre>

<p>1</p>

<pre><code>NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name ENDSWITH %@", @"lxz"];

å…¶ä¸­åŒ…å«lxz
</code></pre>

<p>1</p>

<pre><code>NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name contains %@", @"lxz"];

æŸ¥è¯¢æ¡ä»¶ç»“æœåŒ…å«lxz
</code></pre>

<p>1</p>

<pre><code>NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name LIKE %@", @"*lxz*"];
</code></pre>

<p>åŠ è½½è¯·æ±‚æ¨¡æ¿</p>

<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è°ˆåˆ°åœ¨æ¨¡å‹æ–‡ä»¶ä¸­è®¾ç½®è¯·æ±‚æ¨¡æ¿ï¼Œä¹Ÿå°±æ˜¯åœ¨.xcdatamodeldæ–‡ä»¶ä¸­ï¼Œè®¾ç½®Fetch Requestsï¼Œä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡å¯¹åº”çš„NSManagedObjectModelè·å–è®¾ç½®å¥½çš„æ¨¡æ¿ã€‚</p>

<p>&hellip;. çœç•¥ä¸Šä¸‹æ–‡åˆ›å»ºæ­¥éª¤ &hellip;.</p>

<pre><code>// é€šè¿‡MOCè·å–æ¨¡å‹æ–‡ä»¶å¯¹åº”çš„æ‰˜ç®¡å¯¹è±¡æ¨¡å‹
NSManagedObjectModel *model = context.persistentStoreCoordinator.managedObjectModel;
// é€šè¿‡.xcdatamodeldæ–‡ä»¶ä¸­è®¾ç½®çš„æ¨¡æ¿åï¼Œè·å–è¯·æ±‚å¯¹è±¡
NSFetchRequest *fetchRequest = [model fetchRequestTemplateForName:@"EmployeeFR"];
// è¯·æ±‚æ•°æ®ï¼Œä¸‹é¢çš„æ“ä½œå’Œæ™®é€šè¯·æ±‚ä¸€æ ·
NSError *error = nil;
NSArray *dataList = [context executeFetchRequest:fetchRequest error:&amp;error];
[dataList enumerateObjectsUsingBlock:^(Employee * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
    NSLog(@"Employee.count = %ld, Employee.height = %f", dataList.count, [obj.height floatValue]);
}];
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"Execute Fetch Request Error : %@", error);
}
</code></pre>

<p>è·å–ç»“æœCountå€¼</p>

<p>å¼€å‘è¿‡ç¨‹ä¸­æœ‰æ—¶éœ€è¦åªè·å–æ‰€éœ€æ•°æ®çš„Countå€¼ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œè·å–æ“ä½œåæ•°ç»„ä¸­æ‰€å­˜å‚¨çš„å¯¹è±¡æ•°é‡ã€‚é‡åˆ°è¿™ä¸ªéœ€æ±‚ï¼Œå¦‚æœåƒä¹‹å‰ä¸€æ ·MOCæ‰§è¡Œè·å–æ“ä½œï¼Œè·å–åˆ°æ•°ç»„ç„¶åå–Countï¼Œè¿™æ ·å¯¹å†…å­˜æ¶ˆè€—æ˜¯å¾ˆå¤§çš„ã€‚</p>

<p>å¯¹äºè¿™ä¸ªéœ€æ±‚ï¼Œè‹¹æœæä¾›äº†ä¸¤ç§å¸¸ç”¨çš„æ–¹å¼è·å–è¿™ä¸ªCountå€¼ã€‚è¿™ä¸¤ç§è·å–æ“ä½œï¼Œéƒ½æ˜¯åœ¨æ•°æ®åº“ä¸­å®Œæˆçš„ï¼Œå¹¶ä¸éœ€è¦å°†æ‰˜ç®¡å¯¹è±¡åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¯¹å†…å­˜çš„å¼€é”€ä¹Ÿæ˜¯å¾ˆå°çš„ã€‚</p>

<pre><code>æ–¹æ³•1ï¼Œè®¾ç½®resultType


// è®¾ç½®è¿‡æ»¤æ¡ä»¶ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è®¾ç½®è‡ªå·±çš„è¿‡æ»¤æ¡ä»¶
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"height &lt; 2"];
// åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼Œå¹¶æŒ‡æ˜æ“ä½œEmployeeè¡¨
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
fetchRequest.predicate = predicate;
// è¿™ä¸€æ­¥æ˜¯å…³é”®ã€‚è®¾ç½®è¿”å›ç»“æœç±»å‹ä¸ºCountï¼Œè¿”å›ç»“æœä¸ºNSNumberç±»å‹
fetchRequest.resultType = NSCountResultType;
// æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œè¿”å›çš„ç»“æœè¿˜æ˜¯æ•°ç»„ï¼Œæ•°ç»„ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯è®¡ç®—å‡ºçš„Countå€¼
NSError *error = nil;
NSArray *dataList = [context executeFetchRequest:fetchRequest error:&amp;error];
NSInteger count = [dataList.firstObject integerValue];
NSLog(@"fetch request result Employee.count = %ld", count);
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"fetch request result error : %@", error);
}
</code></pre>

<p>æ–¹æ³•1ä¸­è®¾ç½®NSFetchRequestå¯¹è±¡çš„resultTypeä¸ºNSCountResultTypeï¼Œè·å–åˆ°ç»“æœçš„Countå€¼ã€‚è¿™ä¸ªæšä¸¾å€¼åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æåˆ°è¿‡ï¼Œé™¤äº†Countå‚æ•°ï¼Œè¿˜å¯ä»¥è®¾ç½®å…¶ä»–ä¸‰ç§å‚æ•°ã€‚</p>

<pre><code>æ–¹æ³•2ï¼Œä½¿ç”¨MOCæä¾›çš„æ–¹æ³•


// è®¾ç½®è¿‡æ»¤æ¡ä»¶
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"height &lt; 2"];
// åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ŒæŒ‡æ˜æ“ä½œEmployeeè¡¨
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
fetchRequest.predicate = predicate;
// é€šè¿‡è°ƒç”¨MOCçš„countForFetchRequest:error:æ–¹æ³•ï¼Œè·å–è¯·æ±‚ç»“æœcountå€¼ï¼Œè¿”å›ç»“æœç›´æ¥æ˜¯NSUIntegerç±»å‹å˜é‡
NSError *error = nil;
NSUInteger count = [context countForFetchRequest:fetchRequest error:&amp;error];
NSLog(@"fetch request result count is : %ld", count);
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"fetch request result error : %@", error);
}
</code></pre>

<p>MOCæä¾›äº†ä¸“é—¨è·å–è¯·æ±‚ç»“æœCountå€¼çš„æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ªNSUIntegerç±»å‹çš„Countå€¼ï¼Œä½¿ç”¨èµ·æ¥æ¯”ä¸Šé¢çš„æ–¹æ³•æ›´æ–¹ä¾¿ç‚¹ï¼Œå…¶ä»–éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>

<p>ä½è¿ç®—</p>

<p>å‡è®¾æœ‰éœ€æ±‚æ˜¯å¯¹Employeeè¡¨ä¸­ï¼Œæ‰€æœ‰æ‰˜ç®¡å¯¹è±¡çš„heightå±æ€§è®¡ç®—æ€»å’Œã€‚è¿™ä¸ªéœ€æ±‚åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œå°†æ‰€æœ‰æ‰˜ç®¡å¯¹è±¡åŠ è½½åˆ°å†…å­˜ä¸­æ˜¯éå¸¸æ¶ˆè€—å†…å­˜çš„ï¼Œå°±ç®—æ‰¹é‡åŠ è½½ä¹Ÿæ¯”è¾ƒè€—æ—¶è€—å†…å­˜ã€‚</p>

<p>CoreDataå¯¹äºè¿™æ ·çš„éœ€æ±‚ï¼Œæä¾›äº†ä½è¿ç®—çš„åŠŸèƒ½ã€‚MOCåœ¨æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œæ˜¯æ”¯æŒå¯¹æ•°æ®è¿›è¡Œä½è¿ç®—çš„ã€‚è¿™ä¸ªæ“ä½œä¾ç„¶æ˜¯åœ¨æ•°æ®åº“å±‚å®Œæˆçš„ï¼Œå¯¹å†…å­˜çš„å ç”¨éå¸¸å°ã€‚</p>

<pre><code>// åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ŒæŒ‡æ˜æ“ä½œEmployeeè¡¨
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
// è®¾ç½®è¿”å›å€¼ä¸ºå­—å…¸ç±»å‹ï¼Œè¿™æ˜¯ä¸ºäº†ç»“æœå¯ä»¥é€šè¿‡è®¾ç½®çš„nameåå–å‡ºï¼Œè¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„
fetchRequest.resultType = NSDictionaryResultType;
// åˆ›å»ºæè¿°å¯¹è±¡
NSExpressionDescription *expressionDes = [[NSExpressionDescription alloc] init];
// è®¾ç½®æè¿°å¯¹è±¡çš„nameï¼Œæœ€åç»“æœéœ€è¦ç”¨è¿™ä¸ªnameå½“åškeyæ¥å–å‡ºç»“æœ
expressionDes.name = @"sumOperatin";
// è®¾ç½®è¿”å›å€¼ç±»å‹ï¼Œæ ¹æ®è¿ç®—ç»“æœè®¾ç½®ç±»å‹
expressionDes.expressionResultType = NSFloatAttributeType;
// åˆ›å»ºå…·ä½“æè¿°å¯¹è±¡ï¼Œç”¨æ¥æè¿°å¯¹é‚£ä¸ªå±æ€§è¿›è¡Œä»€ä¹ˆè¿ç®—(å¯æ‰§è¡Œçš„è¿ç®—ç±»å‹å¾ˆå¤šï¼Œè¿™é‡Œæè¿°çš„æ˜¯å¯¹heightå±æ€§ï¼Œåšsumè¿ç®—)
NSExpression *expression = [NSExpression expressionForFunction:@"sum:" arguments:@[[NSExpression expressionForKeyPath:@"height"]]];
// åªèƒ½å¯¹åº”ä¸€ä¸ªå…·ä½“æè¿°å¯¹è±¡
expressionDes.expression = expression;
// ç»™è¯·æ±‚å¯¹è±¡è®¾ç½®æè¿°å¯¹è±¡ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è®¾ç½®å¤šä¸ªæè¿°å¯¹è±¡
fetchRequest.propertiesToFetch = @[expressionDes];
// æ‰§è¡Œè¯·æ±‚ï¼Œè¿”å›å€¼è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯å­˜å‚¨è®¡ç®—ç»“æœçš„å­—å…¸
NSError *error = nil;
NSArray *resultArr = [context executeFetchRequest:fetchRequest error:&amp;error];
// é€šè¿‡ä¸Šé¢è®¾ç½®çš„nameå€¼ï¼Œå½“åšè¯·æ±‚ç»“æœçš„keyå–å‡ºè®¡ç®—ç»“æœ
NSNumber *number = resultArr.firstObject[@"sumOperatin"];
NSLog(@"fetch request result is %f", [number floatValue]);
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"fetch request result error : %@", error);
}
</code></pre>

<p>æ‰§è¡Œç»“æœï¼š</p>

<p><img src="/images/3006.png" title="Caption" ></p>

<p>ä»æ‰§è¡Œç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒMOCå¯¹æ‰€æœ‰æŸ¥æ‰¾åˆ°çš„æ‰˜ç®¡å¯¹è±¡heightå±æ€§æ‰§è¡Œäº†æ±‚å’Œæ“ä½œï¼Œå¹¶å°†ç»“æœæ”¾åœ¨å­—å…¸ä¸­è¿”å›ã€‚ä½è¿ç®—ä¸»è¦æ˜¯é€šè¿‡NSFetchRequestå¯¹è±¡çš„propertiesToFetchå±æ€§è®¾ç½®ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®å¤šä¸ªæè¿°å¯¹è±¡ï¼Œæœ€åé€šè¿‡ä¸åŒçš„nameå½“åškeyæ¥å–å‡ºç»“æœå³å¯ã€‚</p>

<p>NSExpressionç±»å¯ä»¥æè¿°å¤šç§è¿ç®—ï¼Œå¯ä»¥åœ¨NSExpression.hæ–‡ä»¶ä¸­çš„æ³¨é‡Šéƒ¨åˆ†ï¼Œçœ‹åˆ°æ‰€æœ‰æ”¯æŒçš„è¿ç®—ç±»å‹ï¼Œå¤§æ¦‚çœ‹äº†ä¸€ä¸‹æœ‰äºŒåå¤šç§è¿ç®—ã€‚è€Œä¸”é™¤äº†ä¸Šé¢NSExpressionè°ƒç”¨çš„æ–¹æ³•ï¼Œæ­¤ç±»è¿˜æ”¯æŒç‚¹è¯­æ³•çš„ä½è¿ç®—ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ã€‚
1</p>

<pre><code>[NSExpression expressionWithFormat:@"@sum.height"];
</code></pre>

<p>æ‰¹å¤„ç†</p>

<p>åœ¨ä½¿ç”¨CoreDataä¹‹å‰ï¼Œæˆ‘å’Œå…¬å¸åŒäº‹ä¹Ÿè®¨è®ºè¿‡ï¼Œå‡è®¾é‡åˆ°éœ€è¦å¤§é‡æ•°æ®å¤„ç†çš„æ—¶å€™æ€ä¹ˆåŠã€‚CoreDataå¯¹äºå¤§é‡æ•°æ®å¤„ç†çš„çµæ´»æ€§è‚¯å®šä¸å¦‚SQLiteï¼Œè¿™æ—¶å€™è¿˜éœ€è¦è‡ªå·±ä½¿ç”¨å…¶ä»–æ–¹å¼ä¼˜åŒ–æ•°æ®å¤„ç†ã€‚è™½ç„¶åœ¨ç§»åŠ¨ç«¯è¿™ç§æƒ…å†µå¾ˆå°‘å‡ºç°ï¼Œä½†æ˜¯åœ¨æŒä¹…å±‚è®¾è®¡æ—¶è¿˜æ˜¯è¦è€ƒè™‘è¿™æ–¹é¢ã€‚</p>

<p>å½“éœ€è¦è¿›è¡Œæ•°æ®çš„å¤„ç†æ—¶ï¼ŒCoreDataéœ€è¦å…ˆå°†æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åæ‰èƒ½å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚è¿™æ ·å¯¹äºå¤§é‡æ•°æ®æ¥è¯´ï¼Œéƒ½åŠ è½½åˆ°å†…å­˜ä¸­æ˜¯éå¸¸æ¶ˆè€—å†…å­˜çš„ï¼Œè€Œä¸”å®¹æ˜“å¯¼è‡´å´©æºƒçš„å‘ç”Ÿã€‚å¦‚æœé‡åˆ°æ›´æ”¹æ‰€æœ‰æ•°æ®çš„æŸä¸ªå­—æ®µè¿™æ ·çš„ç®€å•éœ€æ±‚ï¼Œéœ€è¦å°†ç›¸å…³çš„æ‰˜ç®¡å¯¹è±¡éƒ½åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åè¿›è¡Œæ›´æ”¹ã€ä¿å­˜ã€‚</p>

<p>å¯¹äºä¸Šé¢è¿™æ ·çš„é—®é¢˜ï¼ŒCoreDataåœ¨iOS8æ¨å‡ºäº†æ‰¹é‡æ›´æ–°APIï¼Œé€šè¿‡è¿™ä¸ªAPIå¯ä»¥ç›´æ¥åœ¨æ•°æ®åº“ä¸€å±‚å°±å®Œæˆæ›´æ–°æ“ä½œï¼Œè€Œä¸éœ€è¦å°†æ•°æ®åŠ è½½åˆ°å†…å­˜ã€‚é™¤äº†æ‰¹é‡æ›´æ–°æ“ä½œï¼Œåœ¨iOS9ä¸­è¿˜æ¨å‡ºäº†æ‰¹é‡åˆ é™¤APIï¼Œä¹Ÿæ˜¯åœ¨æ•°æ®åº“ä¸€å±‚å®Œæˆçš„æ“ä½œã€‚å…³äºæ‰¹å¤„ç†çš„APIå¾ˆå¤šéƒ½æ˜¯iOS8ã€iOS9å‡ºæ¥çš„ï¼Œä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ç‰ˆæœ¬å…¼å®¹ã€‚</p>

<p>ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œæ‰¹é‡æ›´æ–°å’Œæ‰¹é‡åˆ é™¤çš„ä¸¤ä¸ªAPIï¼Œéƒ½æ˜¯ç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œæ›´æ–°å®Œä¹‹åä¼šå¯¼è‡´MOCç¼“å­˜å’Œæœ¬åœ°æŒä¹…åŒ–æ•°æ®ä¸åŒæ­¥çš„é—®é¢˜ã€‚æ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ·æ–°å—å½±å“çš„MOCä¸­å­˜å‚¨çš„æ‰˜ç®¡å¯¹è±¡ï¼Œä½¿MOCå’Œæœ¬åœ°ç»Ÿä¸€ã€‚å‡è®¾ä½ ä½¿ç”¨äº†NSFetchedResultsControllerï¼Œä¸ºäº†ä¿è¯ç•Œé¢å’Œæ•°æ®çš„ç»Ÿä¸€ï¼Œè¿™ä¸€æ­¥æ›´æ–°æ“ä½œæ›´éœ€è¦åšã€‚</p>

<p>æ‰¹é‡æ›´æ–°</p>

<pre><code>// åˆ›å»ºæ‰¹é‡æ›´æ–°å¯¹è±¡ï¼Œå¹¶æŒ‡æ˜æ“ä½œEmployeeè¡¨ã€‚
NSBatchUpdateRequest *updateRequest = [NSBatchUpdateRequest batchUpdateRequestWithEntityName:@"Employee"];
// è®¾ç½®è¿”å›å€¼ç±»å‹ï¼Œé»˜è®¤æ˜¯ä»€ä¹ˆéƒ½ä¸è¿”å›(NSStatusOnlyResultType)ï¼Œè¿™é‡Œè®¾ç½®è¿”å›å‘ç”Ÿæ”¹å˜çš„å¯¹è±¡Countå€¼
updateRequest.resultType = NSUpdatedObjectsCountResultType;
// è®¾ç½®å‘ç”Ÿæ”¹å˜å­—æ®µçš„å­—å…¸
updateRequest.propertiesToUpdate = @{@"height" : [NSNumber numberWithFloat:5.f]};
// æ‰§è¡Œè¯·æ±‚åï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªç‰¹å®šçš„resultå¯¹è±¡ï¼Œé€šè¿‡resultçš„å±æ€§è·å–è¿”å›çš„ç»“æœã€‚MOCçš„è¿™ä¸ªAPIæ˜¯ä»iOS8å‡ºæ¥çš„ï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„ç‰ˆæœ¬å…¼å®¹ã€‚
NSError *error = nil;
NSBatchUpdateResult *result = [context executeRequest:updateRequest error:&amp;error];
NSLog(@"batch update count is %ld", [result.result integerValue]);
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"batch update request result error : %@", error);
}
// æ›´æ–°MOCä¸­çš„æ‰˜ç®¡å¯¹è±¡ï¼Œä½¿MOCå’Œæœ¬åœ°æŒä¹…åŒ–åŒºæ•°æ®åŒæ­¥
[context refreshAllObjects];
</code></pre>

<p>ä¸Šé¢å¯¹Employeeè¡¨ä¸­æ‰€æœ‰çš„æ‰˜ç®¡å¯¹è±¡heightå€¼åšäº†æ‰¹é‡æ›´æ–°ï¼Œåœ¨æ›´æ–°æ—¶é€šè¿‡è®¾ç½®propertiesToUpdateå­—å…¸æ¥æ§åˆ¶æ›´æ–°å­—æ®µå’Œæ›´æ–°çš„å€¼ï¼Œè®¾ç½®æ ¼å¼æ˜¯å­—æ®µå : æ–°å€¼ã€‚é€šè¿‡è®¾ç½®æ‰¹å¤„ç†å¯¹è±¡çš„predicateå±æ€§ï¼Œè®¾ç½®ä¸€ä¸ªè°“è¯å¯¹è±¡æ¥æ§åˆ¶å—å½±å“çš„å¯¹è±¡ã€‚</p>

<p>è¿˜å¯ä»¥å¯¹å¤šä¸ªå­˜å‚¨åŒº(æ•°æ®åº“)åšåŒæ ·æ‰¹å¤„ç†æ“ä½œï¼Œé€šè¿‡è®¾ç½®å…¶çˆ¶ç±»çš„affectedStoreså±æ€§ï¼Œç±»å‹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥åŒ…å«å—å½±å“çš„å­˜å‚¨åŒºï¼Œå¤šä¸ªå­˜å‚¨åŒºçš„æ“ä½œå¯¹æ‰¹é‡åˆ é™¤åŒæ ·é€‚ç”¨ã€‚</p>

<p>MOCåœ¨æ‰§è¡Œè¯·æ±‚æ–¹æ³•æ—¶ï¼Œå‘ç°æ–¹æ³•åä¹Ÿä¸ä¸€æ ·äº†ï¼Œæ‰§è¡Œçš„æ˜¯executeRequest: error:æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä»iOS8ä¹‹åå‡ºæ¥çš„ã€‚æ–¹æ³•ä¼ å…¥çš„å‚æ•°æ˜¯NSBatchUpdateRequestç±»ï¼Œæ­¤ç±»å¹¶ä¸æ˜¯ç»§æ‰¿è‡ªNSFetchRequestç±»ï¼Œè€Œæ˜¯ç›´æ¥ç»§æ‰¿è‡ªNSPersistentStoreRequestï¼Œå’ŒNSFetchRequestæ˜¯å¹³çº§å…³ç³»ã€‚</p>

<p>æ‰¹é‡åˆ é™¤</p>

<pre><code>// åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼Œå¹¶æŒ‡æ˜å¯¹Employeeè¡¨åšæ“ä½œ
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
// é€šè¿‡è°“è¯è®¾ç½®è¿‡æ»¤æ¡ä»¶ï¼Œè®¾ç½®æ¡ä»¶ä¸ºheightå°äº1.7
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"height &lt; %f", 1.7f];
fetchRequest.predicate = predicate;
// åˆ›å»ºæ‰¹é‡åˆ é™¤è¯·æ±‚ï¼Œå¹¶ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„è¯·æ±‚å¯¹è±¡å½“åšå‚æ•°è¿›è¡Œåˆå§‹åŒ–
NSBatchDeleteRequest *deleteRequest = [[NSBatchDeleteRequest alloc] initWithFetchRequest:fetchRequest];
// è®¾ç½®è¯·æ±‚ç»“æœç±»å‹ï¼Œè®¾ç½®ä¸ºå—å½±å“å¯¹è±¡çš„Count
deleteRequest.resultType = NSBatchDeleteResultTypeCount;
// ä½¿ç”¨NSBatchDeleteResultå¯¹è±¡æ¥æ¥å—è¿”å›ç»“æœï¼Œé€šè¿‡idç±»å‹çš„å±æ€§resultè·å–ç»“æœ
NSError *error = nil;
NSBatchDeleteResult *result = [context executeRequest:deleteRequest error:&amp;error];
NSLog(@"batch delete request result count is %ld", [result.result integerValue]);
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"batch delete request error : %@", error);
}
// æ›´æ–°MOCä¸­çš„æ‰˜ç®¡å¯¹è±¡ï¼Œä½¿MOCå’Œæœ¬åœ°æŒä¹…åŒ–åŒºæ•°æ®åŒæ­¥
[context refreshAllObjects];
</code></pre>

<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¶‰åŠåˆ°æ‰˜ç®¡å¯¹è±¡çš„æ“ä½œï¼Œéƒ½éœ€è¦å°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­å®Œæˆã€‚æ‰€ä»¥ä½¿ç”¨CoreDataæ—¶ï¼Œéœ€è¦æ³¨æ„å†…å­˜çš„ä½¿ç”¨ï¼Œä¸è¦åœ¨å†…å­˜ä¸­å­˜åœ¨è¿‡å¤šçš„æ‰˜ç®¡å¯¹è±¡ã€‚åœ¨å·²ç»åšç³»ç»Ÿå…¼å®¹çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œå¤§é‡æ•°æ®çš„æ“ä½œæ—¶ï¼Œåº”è¯¥å°½é‡ä½¿ç”¨æ‰¹å¤„ç†æ¥å®Œæˆæ“ä½œã€‚</p>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒrefreshAllObjectsæ˜¯ä»iOS9å‡ºæ¥çš„ï¼Œåœ¨iOS9ä¹‹å‰å› ä¸ºè¦åšç‰ˆæœ¬å…¼å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨refreshObject: mergeChanges:æ–¹æ³•æ›´æ–°æ‰˜ç®¡å¯¹è±¡ã€‚</p>

<p>å¼‚æ­¥è¯·æ±‚</p>

<pre><code>// åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼Œå¹¶æŒ‡æ˜æ“ä½œEmployeeè¡¨
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
// åˆ›å»ºå¼‚æ­¥è¯·æ±‚å¯¹è±¡ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªblockè¿›è¡Œå›è°ƒï¼Œè¿”å›ç»“æœæ˜¯ä¸€ä¸ªNSAsynchronousFetchResultç±»å‹å‚æ•°
NSAsynchronousFetchRequest *asycFetchRequest = [[NSAsynchronousFetchRequest alloc] initWithFetchRequest:fetchRequest completionBlock:^(NSAsynchronousFetchResult * _Nonnull result) {
    [result.finalResult enumerateObjectsUsingBlock:^(Employee * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        NSLog(@"fetch request result Employee.count = %ld, Employee.name = %@", result.finalResult.count, obj.name);
    }];
}];
// æ‰§è¡Œå¼‚æ­¥è¯·æ±‚ï¼Œå’Œæ‰¹é‡å¤„ç†æ‰§è¡ŒåŒä¸€ä¸ªè¯·æ±‚æ–¹æ³•
NSError *error = nil;
[context executeRequest:asycFetchRequest error:&amp;error];
// é”™è¯¯å¤„ç†
if (error) {
    NSLog(@"fetch request result error : %@", error);
}
</code></pre>

<p>ä¸Šé¢é€šè¿‡NSAsynchronousFetchRequestå¯¹è±¡åˆ›å»ºäº†ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œå¹¶é€šè¿‡blockè¿›è¡Œå›è°ƒã€‚å¦‚æœæœ‰å¤šä¸ªè¯·æ±‚åŒæ—¶å‘èµ·ï¼Œä¸éœ€è¦æ‹…å¿ƒçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œç³»ç»Ÿä¼šå°†æ‰€æœ‰çš„å¼‚æ­¥è¯·æ±‚æ·»åŠ åˆ°ä¸€ä¸ªæ“ä½œé˜Ÿåˆ—ä¸­ï¼Œåœ¨å‰ä¸€ä¸ªä»»åŠ¡è®¿é—®æ•°æ®åº“æ—¶ï¼ŒCoreDataä¼šå°†æ•°æ®åº“åŠ é”ï¼Œç­‰å‰é¢çš„æ‰§è¡Œå®Œæˆæ‰ä¼šç»§ç»­æ‰§è¡Œåé¢çš„æ“ä½œã€‚</p>

<p>NSAsynchronousFetchRequestæä¾›äº†cancelæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åœ¨è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œå°†è¿™ä¸ªè¯·æ±‚å–æ¶ˆã€‚è¿˜å¯ä»¥é€šè¿‡ä¸€ä¸ªNSProgressç±»å‹çš„å±æ€§ï¼Œè·å–è¯·æ±‚å®Œæˆè¿›åº¦ã€‚NSAsynchronousFetchRequestç±»ä»iOS8å¼€å§‹å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥ä½ç‰ˆæœ¬éœ€è¦åšç‰ˆæœ¬å…¼å®¹ã€‚</p>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰§è¡Œè¯·æ±‚æ—¶MOCå¹¶å‘ç±»å‹ä¸èƒ½æ˜¯NSConfinementConcurrencyTypeï¼Œè¿™ä¸ªå¹¶å‘ç±»å‹å·²ç»è¢«æŠ›å¼ƒï¼Œä¼šå¯¼è‡´å´©æºƒã€‚</p>

<pre><code>Q Qï¼š2211523682/790806573

å¾®ä¿¡ï¼š18370997821/13148454507

å¾®åšWB:http://weibo.com/u/3288975567?is_hot=1

gitåšæ–‡ï¼šhttp://al1020119.github.io/

githubï¼šhttps://github.com/al1020119
</code></pre>

<p><img src="/images/iCocosCoder.jpg" title="Caption" ></p>

<p><img src="/images/iCocosPublic.jpg" title="Caption" ></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">iCocos</span></span>

      




<time class='entry-date' datetime='2016-07-04T06:59:42+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>6:59 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/senior/'>senior</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/07/04/coredatebzmshiyong/" title="Previous Post: CoreDataæ€ä¹ˆç”¨ï¼Ÿ">&laquo; CoreDataæ€ä¹ˆç”¨ï¼Ÿ</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/07/04/coredatedzhuangbi/" title="Next Post: CoreDataè£…é€¼æŠ€èƒ½ï¼Ÿ">CoreDataè£…é€¼æŠ€èƒ½ï¼Ÿ &raquo;</a>
      
    </p>
  </footer>
</article>



  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title="CoreDataè¿˜æœ‰æ’’ï¼Ÿ"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"icocoscao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
    <h1>æ–‡ç« åˆ†ç±»</h1>
    <ul id="categories">
        <li class='category'><a href='/blog/categories/algorithms/'>algorithms (6)</a></li>
<li class='category'><a href='/blog/categories/and/'>and (14)</a></li>
<li class='category'><a href='/blog/categories/apples/'>apples (2)</a></li>
<li class='category'><a href='/blog/categories/application/'>application (1)</a></li>
<li class='category'><a href='/blog/categories/architecture/'>architecture (2)</a></li>
<li class='category'><a href='/blog/categories/audio/'>audio (8)</a></li>
<li class='category'><a href='/blog/categories/audio-video/'>audio-video (1)</a></li>
<li class='category'><a href='/blog/categories/data/'>data (6)</a></li>
<li class='category'><a href='/blog/categories/developer/'>developer (16)</a></li>
<li class='category'><a href='/blog/categories/foundation/'>foundation (31)</a></li>
<li class='category'><a href='/blog/categories/full/'>full (13)</a></li>
<li class='category'><a href='/blog/categories/low-level/'>low-level (4)</a></li>
<li class='category'><a href='/blog/categories/lve/'>lve (8)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (4)</a></li>
<li class='category'><a href='/blog/categories/others/'>others (1)</a></li>
<li class='category'><a href='/blog/categories/performance/'>performance (12)</a></li>
<li class='category'><a href='/blog/categories/practical/'>practical (1)</a></li>
<li class='category'><a href='/blog/categories/radio/'>radio (8)</a></li>
<li class='category'><a href='/blog/categories/reverse/'>reverse (25)</a></li>
<li class='category'><a href='/blog/categories/senior/'>senior (40)</a></li>
<li class='category'><a href='/blog/categories/stack/'>stack (13)</a></li>
<li class='category'><a href='/blog/categories/structures/'>structures (6)</a></li>
<li class='category'><a href='/blog/categories/summarize/'>summarize (5)</a></li>
<li class='category'><a href='/blog/categories/tools/'>tools (5)</a></li>
<li class='category'><a href='/blog/categories/video/'>video (8)</a></li>

    </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/10/20/apptai-pang-liao-jian-fei/">Appå¤ªèƒ–äº†â€”â€”å‡è‚¥ğŸ˜‚</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/16/ioskai-fa-chang-yong-gong-neng-dai-ma-ji-jin-(you-xiu-pian-)/">iOSå¼€å‘â€”â€”å¸¸ç”¨åŠŸèƒ½ä»£ç é›†é”¦ï¼ˆå‹ç§€ç¯‡ï¼‰</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/14/ioszhuang-bi-pian-xiang-ying-shi-bian-cheng/">iOSè£…é€¼ç¯‡â€”â€”å“åº”å¼ç¼–ç¨‹</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/14/ioszhuang-bi-pian-han-shu-shi-bian-cheng/">iOSè£…é€¼ç¯‡â€”â€”å‡½æ•°å¼ç¼–ç¨‹</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/14/ioszhuang-bi-pian-lian-shi-bian-cheng/">iOSè£…é€¼ç¯‡â€”â€”é“¾å¼ç¼–ç¨‹</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/al1020119">@al1020119</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'al1020119',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





<section>
<h1>åšå®¢<abbr title="The word 'åšå®¢' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'åšå®¢', not for image.">&trade;</abbr></h1>
<a href="http://al1020119.github.io/blog/2016/07/04/coredatechaiyousa/"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=http://al1020119.github.io/blog/2016/07/04/coredatechaiyousa/" alt="post-qrcode"></a></section>


<section>
<h1>github<abbr title="The word 'github' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'github', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosgithub.png" alt="post-qrcode"></a></section>


<section>
<h1>å¾®ä¿¡<abbr title="The word 'å¾®ä¿¡' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å¾®ä¿¡', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosWX.png" alt="post-qrcode"></a></section>


<section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosMGC.png" alt="post-qrcode"></a><section>
  
  
</section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocos520.png" alt="post-qrcode"></a></section>
<section>
    <h1>è®¿å®¢ç»Ÿè®¡</h1>
    <br/>
    <a href="http://s07.flagcounter.com/more/2SH"><img src="http://s07.flagcounter.com/count/2SH/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
</section><section>
    <h1>æ–°æµªå¾®åš</h1>
    <ul id="weibo">
        <li>
            
            <!-- åœ¨æ­¤æ’å…¥è·å¾—çš„å¾®åšç§€ä»£ç  -->
            <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3288975567&verifier=20ffcedd&dpc=1"></iframe>
            
        </li>
    </ul>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - iCocos -
<span class="credit">welcome to <a href="http://al1020119.github.io">æ›¹#é»</a></span>
</p>

</footer>
  






<!--
-->



</body>
</html>
