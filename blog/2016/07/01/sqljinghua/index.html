
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>SQLiteç²¾åç¯‡ - iOSæ¢¦å·¥å‚</title>
  <meta name="author" content="iCocos">

  
  <meta name="description" content="iCocosåšå®¢">
  <meta name="keywords" content="iCocos, iOSå¼€å‘, åšå®¢, æŠ€æœ¯åˆ†æ, æ–‡ç« , å­¦ä¹ , æ›¹é», æ›¹ç†é¹">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://al1020119.github.io/blog/2016/07/01/sqljinghua/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iOSæ¢¦å·¥å‚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iOSæ¢¦å·¥å‚</a></h1>
  
    <h2>iCocosâ€”â€”ä¸æˆ˜èƒœè‡ªå·±ï¼Œä½•ä»¥æ”¹å˜æœªæ¥ï¼</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="al1020119.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">åšæ–‡</a></li>
  <li><a href="/blog/archives">å½’æ¡£</a></li>
  <li><a href="/icocos">iCocos</a></li>
  <li><a href="/year">å¹´ç»ˆ</a></li>
  <li><a href="/other">å…¶ä»–</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">SQLiteç²¾åç¯‡</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-07-01T02:59:42+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>2:59 am</span></time>
        
        
        |   <a href="#comments">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h4>æ¦‚è¿°</h4>

<p>iOSç³»ç»Ÿè‡ªå¸¦Core Dataæ¥è¿›è¡ŒæŒä¹…åŒ–å¤„ç†ï¼Œè€Œä¸”Core Dataå¯ä»¥ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢æ¥åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯Core Dataä¸æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œå¯¹äºCore Dataæ¥è¯´æ¯”è¾ƒæ“…é•¿ç®¡ç†åœ¨è®¾å¤‡ä¸Šåˆ›å»ºçš„æ•°æ®æŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·åˆ›å»ºçš„å¯¹è±¡ï¼Œä½†æ˜¯è¦å¤„ç†å¤§é‡çš„æ•°æ®æ—¶å°±åº”è¯¥ä¼˜å…ˆé€‰æ‹©SQLå…³ç³»å‹æ•°æ®åº“æ¥å­˜å‚¨è¿™äº›æ•°æ®ã€‚
Core Dataåœ¨åå°ä¹Ÿæ˜¯ä½¿ç”¨SQLiteæ¥å­˜å‚¨æ•°æ®çš„ï¼Œä½†æ˜¯å¼€å‘äººå‘˜ä¸èƒ½ç›´æ¥è®¿é—®è¿™äº›æ•°æ®ï¼Œåªèƒ½é€šè¿‡Core Dataæä¾›çš„APIæ¥æ“ä½œï¼Œå¦‚æœä¸€æ—¦äººä¸ºçš„é€šè¿‡SQLiteä¿®æ”¹è¿™äº›æ•°æ®é‚£ä¹ˆä½¿ç”¨Core Dataå†æ¬¡è®¿é—®è¿™äº›æ•°æ®æ—¶å°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p>

<!--more-->


<h3>SQLiteåº“</h3>

<p>SQLiteæ˜¯ä½¿ç”¨Cè¯­è¨€å†™çš„å¼€æºåº“ï¼Œå®ç°äº†ä¸€ä¸ªè‡ªåŒ…å«çš„SQLå…³ç³»å‹æ•°æ®åº“å¼•æ“ï¼Œå¯ä»¥ä½¿ç”¨SQLiteå­˜å‚¨æ“ä½œå¤§é‡çš„æ•°æ®ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­å»ºç«‹å¤šå¼ ç›¸å…³è”çš„è¡¨æ¥è§£å†³å¤§é‡æ•°æ®é‡å¤çš„é—®é¢˜ã€‚è€Œä¸”SQLiteåº“ä¹Ÿé’ˆå¯¹ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä½¿ç”¨è¿›è¡Œäº†ä¼˜åŒ–ã€‚
å› ä¸ºSQLiteçš„æ¥å£ä½¿ç”¨Cå†™çš„ï¼Œè€Œä¸”Objective-Cæ˜¯Cçš„è¶…é›†æ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨SQLiteã€‚</p>

<h3>è®¾è®¡ä¸€ä¸ªæ•°æ®åº“</h3>

<p>å¼€å§‹ä¹‹å‰é¦–å…ˆè¦æƒ³åˆ°éœ€è¦å­˜ä»€ä¹ˆæ•°æ®ï¼Œç„¶åæ€ä¹ˆè®¾è®¡è¿™ä¸ªæ•°æ®åº“ã€‚
é¦–å…ˆæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªæ•°æ®åº“ç”¨æ¥å­˜å‚¨äººå‘˜ä¿¡æ¯å¦‚ä¸‹ï¼š</p>

<p><img src="/images/sql0004.png" title="Caption" ></p>

<p>ä¸Šé¢æ˜¯æ‰€æœ‰çš„äººå‘˜ä¿¡æ¯ï¼Œå®é™…å¯èƒ½æ¯”è¿™ä¸ªå¤šå¾ˆå¤šã€‚ä½†æ˜¯æˆ‘ä»¬å‘ç°regionè¿™ä¸€è¡Œä¸­æœ‰å¾ˆå¤šçš„æ•°æ®é‡å¤å‡ºç°ã€‚å¾ˆå¤šäººå¯èƒ½æ¥è‡ªåŒä¸€ä¸ªåœ°æ–¹ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µæˆ‘ä»¬åº”è¯¥å†é‡æ–°åˆ›å»ºä¸€å¼ è¡¨æ¥å•ç‹¬å­˜å‚¨regionè¿™åˆ—çš„ä¿¡æ¯ç„¶ååœ¨è¿™ä¸ªè¡¨ä¸­å¼•ç”¨regionè¡¨ä¸­çš„ä¿¡æ¯ã€‚å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥åœ¨regionè¡¨ä¸­æ·»åŠ æ›´å¤šçš„ä¿¡æ¯æ¯”å¦‚è¯¦ç»†åœ°å€ã€‚ç°åœ¨åˆ›å»ºä¸¤å¼ è¡¨peopleä¸regionå¦‚ä¸‹æ‰€ç¤º</p>

<pre><code>peopleè¡¨
</code></pre>

<p><img src="/images/sql0001.png" title="Caption" ></p>

<pre><code>regionè¡¨
</code></pre>

<p><img src="/images/sql0002.png" title="Caption" ></p>

<h5>ä½¿ç”¨SQLiteåˆ›å»ºæ•°æ®åº“</h5>

<p>ä¸ºäº†ç†Ÿæ‚‰SQLiteè¯­å¥ï¼Œæ‰“å¼€shellä½¿ç”¨SQLiteå‘½ä»¤è¡Œæ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“</p>

<pre><code>æ‰“å¼€åˆ›å»ºæ•°æ®åº“

æ‰“å¼€shellåˆ‡æ¢åˆ°æŒ‡å®šç›®å½•è¾“å…¥



sqlite3 database.db
</code></pre>

<p>è¿™è¡Œå‘½ä»¤æ˜¯å¯åŠ¨sqliteå‘½ä»¤è¡Œå¹¶ä¸”åˆ›å»ºæ–°çš„æ•°æ®åº“database.dbå¹¶é™„åŠ è¯¥æ•°æ®åˆ°å‘½ä»¤è¡Œ</p>

<p>æ­¤æ—¶å·²ç»è¿›å…¥sqliteå‘½ä»¤è¡Œé€šè¿‡è¾“å…¥.helpå¯ä»¥æ˜¾ç¤ºå¯ä»¥ä½¿ç”¨å“ªäº›å‘½ä»¤ï¼Œé€šè¿‡è¾“å…¥.databasesæ¥æŸ¥çœ‹å½“å‰æœ‰å“ªäº›æ•°æ®åº“é™„åŠ åˆ°å½“å‰çš„å‘½ä»¤è¡Œå·¥å…·ä¸­ã€‚è¾“å…¥.quitæˆ–.exité€€å‡ºå½“å‰å‘½ä»¤è¡Œå·¥å…·</p>

<h5>åˆ›å»ºè¡¨</h5>

<pre><code>create table "main"."people" ("id" integer primary key autoincrement not null, "name" text,"age" integer,"email" text,"region" integer);
</code></pre>

<p>è¿™æ¡å‘½ä»¤æ˜¯åˆ›å»ºä¸€ä¸ªpeopleçš„è¡¨ï¼Œå¹¶ä¸”å°†idå­—æ®µè®¾ä¸ºprimary keyä¸»é”®å°†å…¶æŒ‡å®šä¸ºä¸€ä¸ªautoincrementè‡ªåŠ¨å¢é•¿çš„å­—æ®µã€‚è¡¨ç¤ºä¸ç”¨æä¾›idçš„å€¼æ•°æ®åº“å°†è‡ªåŠ¨ç”Ÿæˆã€‚åé¢çš„è¡¨ç¤ºè¯¥å¼ è¡¨ä¸­æ‰€å«æœ‰çš„å­—æ®µã€‚</p>

<p>å› ä¸ºè¦è®¾è®¡ä¸¤å¼ è¡¨æ‰€ä»¥è¿˜éœ€è¦åˆ›å»ºregionè¡¨</p>

<pre><code>create table "main"."region" ("regionid" integer primary key autoincrement not null, "regioninfo" text,"address" text not null);
</code></pre>

<h5>æ·»åŠ æ•°æ®</h5>

<p>æ­¤æ—¶å·²ç»æˆåŠŸåˆ›å»ºäº†ä¸¤å¼ è¡¨æˆ‘ä»¬è¦æ·»åŠ æ•°æ®è¿›å»</p>

<pre><code>insert into "main"."people" ("name","age","email","region") values ('jhon','20','jhon@mail','1');
</code></pre>

<p>è¿™æ ·æˆåŠŸå¾€peopleè¡¨æˆåŠŸçš„æ’å…¥äº†ä¸€æ¡æ•°æ®ã€‚è¿™æ ·å†™æ•ˆç‡æ¯”è¾ƒä½ã€‚æ¯æ¬¡åªèƒ½æ’å…¥ä¸€æ¡æ•°æ®ä¸è¦æ‹…å¿ƒSQLiteæ”¯æŒå°†æ–‡ä»¶ç›´æ¥å¯¼å…¥æ•°æ®åº“ä¸­ã€‚å¯ä»¥æ˜¯æ™®é€šçš„æ–‡ä»¶æ–‡ä»¶ä¹Ÿå¯ä»¥æ˜¯excelæ–‡ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªpeople.txtæ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š</p>

<pre><code>1 jhon 20 jhon@mail 12 peter 20 peter@mail 23 july 20 july@mail 14 elev 20 elev@mail 35 ribet 20 ribet@mail
</code></pre>

<p>æ³¨æ„æ¯ä¸ªå­—æ®µä¹‹é—´çš„ç©ºéš™æ˜¯ç”¨åˆ¶è¡¨ç¬¦æ¥åˆ†å‰²çš„ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºæ–‡ä»¶æ˜¯æ¯ä¸ªå­—æ®µç”¨tabé”®è¿›è¡Œåˆ†å‰²ã€‚å­—æ®µçš„é¡ºåºå¿…é¡»å’Œè¡¨ä¸­çš„é¡ºåºç›¸åŒç„¶åå°†people.txtæ–‡ä»¶å¯¼å…¥peopleè¡¨ä¸­</p>

<p>.separator &ldquo;&rdquo;</p>

<p>æ ¹æ®æ¥åˆ†å‰²å­—æ®µï¼Œç„¶åæ¥ç€è¾“å…¥</p>

<pre><code>.import "people.txt" people
</code></pre>

<p>å¯¼å…¥people.txtæ–‡ä»¶åˆ°peopleè¡¨ä¸­æ­¤æ—¶ä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯</p>

<pre><code>people.txt:1: INSERT failed: UNIQUE constraint failed: people.id
</code></pre>

<p>ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªæ„æ€æ˜¯è¯´å·²ç»å­˜åœ¨äº†ä¸€ä¸ªidä¸º1çš„æ•°æ®æ‰€ä»¥è¿™æ¡æ•°æ®æ’å…¥å¤±è´¥ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹å‰æ‰‹åŠ¨äº†æ’å…¥äº†ä¸€æ¡æ•°æ®ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æ¥æŸ¥æ’å…¥çš„æ•°æ®</p>

<pre><code>select * from people;
</code></pre>

<p>ç„¶åç”¨åŒæ ·çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªregion.txtçš„æ–‡ä»¶å¹¶å°†å…¶å¯¼å…¥regionè¡¨ä¸­ã€‚</p>

<h5>æ³¨æ„</h5>

<p>ä½¿ç”¨SQLiteå‘½ä»¤è¡Œå¯èƒ½ä¼šå‡ºç°&hellip;>è¿™è¡¨ç¤ºæŒ‡ä»¤è¾“å…¥é”™è¯¯ï¼ŒæŒ‰ctrl+då³å¯é€€å‡º</p>

<p>æŸ¥è¯¢æ•°æ®ä¸Šé¢å·²ç»æ·»åŠ å®Œæ•°æ®é€šè¿‡selectæŒ‡ä»¤å¯ä»¥æŸ¥è¯¢è¿™äº›æ•°æ®</p>

<pre><code>select * from people;11
</code></pre>

<p>æŸ¥è¯¢poppleè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®</p>

<p>é“¾æ¥è¡¨æ•°æ®</p>

<pre><code>select name,regioninfo from people,region where people.region=region.regionid;
</code></pre>

<p>è¾“å‡ºç»“æœ</p>

<pre><code>jhon beijing
peter shanghai
july beijing
elev shenzhen
ribet beijing
</code></pre>

<p>ä»peopleå’Œregionè¡¨ä¸­æŸ¥æ‰¾nameä¸regioninfoå­—æ®µå¹¶ä¸”åªæŸ¥è¯¢people.region=region.regionidç›¸åŒ¹é…çš„ç»“æœï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡ä»¶é‚£ä¹ˆå°†å‡ºç°5*3=15æ¡æ•°æ®</p>

<p>å¦‚æœè¦æŸ¥æ‰¾æŸä¸ªåœ°åŒºçš„äººä½¿ç”¨whereæ¥ç­›é€‰æ¡ä»¶</p>

<pre><code>select name,regioninfo from people,region where people.region=region.regionid and region.regioninfo="beijing";
</code></pre>

<p>è¾“å‡ºç»“æœ</p>

<pre><code>jhon beijing
july beijing
ribet beijing
</code></pre>

<h3>iOSä¸­SQLiteçš„ä½¿ç”¨</h3>

<p>å¼€å§‹ä¹‹å‰åº”è¯¥åœ¨é¡¹ç›®ä¸­å¼•ç”¨SQLiteåº“ã€‚TARGETS->General->Linked Frameworks and Librarieså¦‚ä¸‹å›¾æ‰€ç¤º</p>

<p><img src="/images/sql0003.png" title="Caption" ></p>

<p>å°†ä¹‹å‰åˆ›å»ºå¥½çš„database.dbæ–‡ä»¶å¯¼å…¥é¡¹ç›®ä¸­ï¼Œå¹¶å¼•å…¥sqlite3.hå¤´æ–‡ä»¶</p>

<pre><code>#import
</code></pre>

<p>ä½¿ç”¨SQLiteéœ€è¦ä¸€ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>

<pre><code>å£°æ˜ç±»å˜é‡sqlite3æ¥ä¿å­˜å¯¹æ•°æ®åº“çš„å¼•ç”¨

ä½¿ç”¨sqlite3_openæ‰“å¼€æ•°æ®åº“

åˆ›å»ºSQLiteè¯­å¥

åˆ›å»ºSQLiteè¯­å¥å¯¹è±¡sqlite3_stmt

å‡†å¤‡SQLiteè¯­å¥sqlite3_prepare_v2

å¼€å§‹éå†ç»“æœsqlite3_step
</code></pre>

<h5>åˆå§‹åŒ–æ‰“å¼€æ•°æ®åº“</h5>

<pre><code>sqlite3 * database;
-(void)initDatabase
{ NSString *path = [[NSBundle mainBundle] pathForResource:@"database" ofType:@"db"];
if (sqlite3_open([path UTF8String], &amp;database) == SQLITE_OK) { NSLog(@"open database");
} else{
sqlite3_close(database); NSLog(@"error %s",sqlite3_errmsg(database));
}
</code></pre>

<p>}</p>

<p>æ‰“å¼€æ•°æ®åº“å¦‚æœè¿”å›çš„çŠ¶æ€ç ä¸æ˜¯SQLITE_OKé‚£ä¹ˆæ‰“å¼€å¤±è´¥å…³é—­æ•°æ®åº“å¹¶ä¸”è¾“å‡ºé”™è¯¯ä¿¡æ¯</p>

<h5>æŸ¥è¯¢æ•°æ®</h5>

<pre><code>-(void)operateDatabase
{ const char * sql = "select name,regioninfo from people,region where people.region=region.regionid";
sqlite3_stmt *statement; //åˆ›å»ºsqlè¯­å¥å¯¹è±¡
int sqlResult = sqlite3_prepare_v2(database, sql, -1, &amp;statement, NULL); //å‡†å¤‡sqlè¯­å¥
if ( sqlResult== SQLITE_OK) //æ˜¯å¦å‡†å¤‡ç»“æŸ
{ while (sqlite3_step(statement) == SQLITE_ROW) //å¼€å§‹éå†æŸ¥è¯¢ç»“æœ
{ NSLog(@"name %s, region %s",sqlite3_column_text(statement, 0),sqlite3_column_text(statement, 1));
}
}
}
</code></pre>

<p>è¾“å‡ºç»“æœï¼š</p>

<pre><code>name jhon, region beijingname peter, region shanghainame july, region beijingname elev, region shenzhenname ribet, region beijing1234512345
</code></pre>

<p>sqlite3_prepare_v2çš„å‚æ•°ç¬¬ä¸€ä¸ªæ˜¯æ•°æ®åº“è¿æ¥ï¼Œç¬¬äºŒä¸ªæ˜¯sqlè¯­å¥ï¼Œç¬¬ä¸‰ä¸ªæ˜¯è¿™ä¸ªè¯­å¥çš„é•¿åº¦ä¼ å…¥-1è¡¨ç¤ºåœ°é“ç¬¬ä¸€ä¸ªnullç»ˆæ­¢ç¬¦ä¸ºæ­¢ï¼Œç¬¬å››ä¸ªæ˜¯è¿”å›ä¸€ä¸ªè¯­å¥å¯¹è±¡ï¼Œç¬¬äº”ä¸ªæ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥sqlè¯­å¥çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æŒ‡é’ˆã€‚</p>

<p>å½“sqlite3_prepare_v2è¿”å›çŠ¶æ€ç SQLITE_OKæ—¶å¼€å§‹éå†ç»“æœã€‚</p>

<p>sqlite3_stepç”¨æ¥éå†ç»“æœå¦‚æœè¿”å›ä¸ºSQLITE_ROWè¡¨ç¤ºä¸‹ä¸€è¡Œå‡†å¤‡ç»“æŸå¯ä»¥å¼€å§‹æŸ¥è¯¢ã€‚æ‰€ä»¥æ­¤å¤„ç”¨ä¸€ä¸ªwhileæ¥ä¾¿åˆ©æ‰€ä»¥æŸ¥è¯¢çš„ç»“æœ</p>

<p>éå†çš„è¿‡ç¨‹ä¸­è¦å–åˆ°ç»“æœé€šè¿‡ä¸€ä¸‹çš„å‡½æ•°è·å–éå†ç»“æœ</p>

<pre><code>SQLITE_API const void *SQLITE_STDCALL sqlite3_column_blob(sqlite3_stmt*, int iCol);
SQLITE_API int SQLITE_STDCALL sqlite3_column_bytes(sqlite3_stmt*, int iCol);
SQLITE_API int SQLITE_STDCALL sqlite3_column_bytes16(sqlite3_stmt*, int iCol);
SQLITE_API double SQLITE_STDCALL sqlite3_column_double(sqlite3_stmt*, int iCol);
SQLITE_API int SQLITE_STDCALL sqlite3_column_int(sqlite3_stmt*, int iCol);
SQLITE_API sqlite3_int64 SQLITE_STDCALL sqlite3_column_int64(sqlite3_stmt*, int iCol);
SQLITE_API const unsigned char *SQLITE_STDCALL sqlite3_column_text(sqlite3_stmt*, int iCol);
SQLITE_API const void *SQLITE_STDCALL sqlite3_column_text16(sqlite3_stmt*, int iCol);
SQLITE_API int SQLITE_STDCALL sqlite3_column_type(sqlite3_stmt*, int iCol);
SQLITE_API sqlite3_value *SQLITE_STDCALL sqlite3_column_value(sqlite3_stmt*, int iCol);
</code></pre>

<p>ä¸Šé¢æ˜¯æ‰€æ”¯æŒçš„ç»“æœç±»å‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsqlè¯­å¥å¯¹è±¡ï¼Œç¬¬äºŒä¸ªä¸ºè·å–å“ªä¸€åˆ—çš„ä¿¡æ¯ã€‚</p>

<h5>å‚æ•°åŒ–æŸ¥è¯¢</h5>

<p>ä¸Šé¢çš„æƒ…å†µæ¯æ¬¡sqlè¯­å¥éƒ½å†™æ­»äº†ï¼Œå¦‚æœæƒ³è¦æ”¹å˜æŸä¸ªæ¡ä»¶å°±éœ€è¦é‡æ–°å†™ä¸€æ¡è¯­å¥ï¼Œå¹¸å¥½sqliteæ”¯æŒå‚æ•°åŒ–æŸ¥è¯¢ï¼Œæ¯æ¬¡åªéœ€è¦æ›´æ”¹æŸ¥è¯¢æ¡ä»¶å°±å¯ä»¥è€Œä¸ç”¨æ›´æ”¹æ•´æ¡sqlè¯­å¥ï¼Œå¦‚æœç°åœ¨åªæƒ³æŸ¥è¯¢åŒ—äº¬åœ°åŒºçš„äººå£ä¿¡æ¯ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢å¦‚ä¸‹ï¼š</p>

<pre><code>-(void)operateDatabase
{ const char * sql = "select name,regioninfo from people,region where people.region=region.regionid and regioninfo=?";
sqlite3_stmt *statement; //åˆ›å»ºsqlè¯­å¥å¯¹è±¡
int sqlResult = sqlite3_prepare_v2(database, sql, -1, &amp;statement, NULL); //å‡†å¤‡sqlè¯­å¥
sqlite3_bind_text(statement, 1, "beijing", -1,SQLITE_TRANSIENT); //ç»‘å®šå‚æ•°
if ( sqlResult== SQLITE_OK) //æ˜¯å¦å‡†å¤‡ç»“æŸ
{ while (sqlite3_step(statement) == SQLITE_ROW) //å¼€å§‹éå†æŸ¥è¯¢ç»“æœ
{ NSLog(@"name %s, region %s",sqlite3_column_text(statement, 0),sqlite3_column_text(statement, 1));
}
}
}
</code></pre>

<p>è¾“å‡ºç»“æœï¼š</p>

<pre><code>name jhon, regionbeijingname july, regionbeijingname ribet, regionbeijing
</code></pre>

<p>å¯è§éœ€è¦æ›´æ”¹çš„æ¡ä»¶sqlä¸­ç”¨?æ¥ä»£æ›¿ï¼Œç„¶åç”¨sqlite3_bind_textå‡½æ•°æ¥ç»‘å®šå‚æ•°ã€‚æ ¹æ®ç±»å‹ä¸åŒç»‘å®šçš„å‡½æ•°ä¹Ÿä¸åŒ</p>

<pre><code>SQLITE_API int SQLITE_STDCALL sqlite3_bind_blob(sqlite3_stmt*, int, const void*, int n, void(*)(void*));
SQLITE_API int SQLITE_STDCALL sqlite3_bind_blob64(sqlite3_stmt*, int, const void*, sqlite3_uint64,void(*)(void*));
SQLITE_API int SQLITE_STDCALL sqlite3_bind_double(sqlite3_stmt*, int, double);
SQLITE_API int SQLITE_STDCALL sqlite3_bind_int(sqlite3_stmt*, int, int);
SQLITE_API int SQLITE_STDCALL sqlite3_bind_int64(sqlite3_stmt*, int, sqlite3_int64);
SQLITE_API int SQLITE_STDCALL sqlite3_bind_null(sqlite3_stmt*, int);
SQLITE_API int SQLITE_STDCALL sqlite3_bind_text(sqlite3_stmt*,int,const char*,int,void(*)(void*));
SQLITE_API int SQLITE_STDCALL sqlite3_bind_text16(sqlite3_stmt*, int, const void*, int, void(*)(void*));
SQLITE_API int SQLITE_STDCALL sqlite3_bind_text64(sqlite3_stmt*, int, const char*, sqlite3_uint64,void(*)(void*), unsigned char encoding);
SQLITE_API int SQLITE_STDCALL sqlite3_bind_value(sqlite3_stmt*, int, const sqlite3_value*);
SQLITE_API int SQLITE_STDCALL sqlite3_bind_zeroblob(sqlite3_stmt*, int, int n);
</code></pre>

<p>ä¸Šé¢åˆ—å‡ºäº†æ‰€æœ‰æ”¯æŒç»‘å®šç±»å‹çš„å‡½æ•°ã€‚</p>

<blockquote><p>ç»“æŸ</p>

<p>æœ¬ç¯‡åªæ˜¯åˆ—å‡ºäº†SQLiteå¸¸ç”¨çš„åŸºç¡€æ–¹æ³•ï¼Œå®é™…å¼€å‘ä¸­æ•°æ®åº“å¯èƒ½è¦æ¯”è¿™å¤æ‚è®¸å¤šï¼Œè€Œä¸”è¿˜è¦è€ƒè™‘æ•°æ®ç«äº‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚å…·ä½“è¿˜æ˜¯è¦è‡ªå·±åœ¨å¼€å‘ä¸­å®è·µã€‚</p></blockquote>

<pre><code>Q Qï¼š2211523682/790806573

å¾®ä¿¡ï¼š18370997821/13148454507

å¾®åšWB:http://weibo.com/u/3288975567?is_hot=1

gitåšæ–‡ï¼šhttp://al1020119.github.io/

githubï¼šhttps://github.com/al1020119
</code></pre>

<p><img src="/images/iCocosCoder.jpg" title="Caption" ></p>

<p><img src="/images/iCocosPublic.jpg" title="Caption" ></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">iCocos</span></span>

      




<time class='entry-date' datetime='2016-07-01T02:59:42+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>2:59 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/senior/'>senior</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/06/22/socketbian-cheng-udppian/" title="Previous Post: Socketç¼–ç¨‹-UDPç¯‡">&laquo; Socketç¼–ç¨‹-UDPç¯‡</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/07/01/sqlzfengzhuang/" title="Next Post: SQLiteå°è£…ç¯‡">SQLiteå°è£…ç¯‡ &raquo;</a>
      
    </p>
  </footer>
</article>



  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title="SQLiteç²¾åç¯‡"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"icocoscao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
    <h1>æ–‡ç« åˆ†ç±»</h1>
    <ul id="categories">
        <li class='category'><a href='/blog/categories/algorithms/'>algorithms (6)</a></li>
<li class='category'><a href='/blog/categories/and/'>and (11)</a></li>
<li class='category'><a href='/blog/categories/apples/'>apples (2)</a></li>
<li class='category'><a href='/blog/categories/application/'>application (1)</a></li>
<li class='category'><a href='/blog/categories/architecture/'>architecture (2)</a></li>
<li class='category'><a href='/blog/categories/audio/'>audio (5)</a></li>
<li class='category'><a href='/blog/categories/audio-video/'>audio-video (1)</a></li>
<li class='category'><a href='/blog/categories/data/'>data (6)</a></li>
<li class='category'><a href='/blog/categories/developer/'>developer (16)</a></li>
<li class='category'><a href='/blog/categories/foundation/'>foundation (31)</a></li>
<li class='category'><a href='/blog/categories/full/'>full (13)</a></li>
<li class='category'><a href='/blog/categories/low-level/'>low-level (4)</a></li>
<li class='category'><a href='/blog/categories/lve/'>lve (5)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (4)</a></li>
<li class='category'><a href='/blog/categories/others/'>others (1)</a></li>
<li class='category'><a href='/blog/categories/performance/'>performance (12)</a></li>
<li class='category'><a href='/blog/categories/php-lover/'>php-lover (2)</a></li>
<li class='category'><a href='/blog/categories/practical/'>practical (1)</a></li>
<li class='category'><a href='/blog/categories/radio/'>radio (5)</a></li>
<li class='category'><a href='/blog/categories/reverse/'>reverse (7)</a></li>
<li class='category'><a href='/blog/categories/senior/'>senior (31)</a></li>
<li class='category'><a href='/blog/categories/stack/'>stack (13)</a></li>
<li class='category'><a href='/blog/categories/structures/'>structures (6)</a></li>
<li class='category'><a href='/blog/categories/summarize/'>summarize (5)</a></li>
<li class='category'><a href='/blog/categories/tools/'>tools (5)</a></li>
<li class='category'><a href='/blog/categories/video/'>video (5)</a></li>

    </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/12/30/bao-chi-chu-cin-ji-xu-qian-jin/">ä¿æŒåˆå¿ƒç»§ç»­å‰è¿›-å¹´ç»ˆç¯‡</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/26/ios-daobao/">è‡ªåŠ¨æ‰“åŒ…ä¸Šä¼ ä»£ç </a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/03/phpwan-mei-da-pei-mysql/">PHPå®Œç¾æ­é…ä¹‹Mysqlåˆæ¢</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/02/zhong-zheng-linux/">é‡æ•´Linuxä¸€æ¬¡å°±å¤Ÿäº†</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/01/wan-zhuan-thinkphp-5-dot-star/">å®Œè™ThinkPHP 5.* è¿œä¸æ­¢è¿™äº›ğŸ˜±ğŸ˜‚</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/al1020119">@al1020119</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'al1020119',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





<section>
<h1>åšå®¢<abbr title="The word 'åšå®¢' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'åšå®¢', not for image.">&trade;</abbr></h1>
<a href="http://al1020119.github.io/blog/2016/07/01/sqljinghua/"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=http://al1020119.github.io/blog/2016/07/01/sqljinghua/" alt="post-qrcode"></a></section>


<section>
<h1>github<abbr title="The word 'github' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'github', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosgithub.png" alt="post-qrcode"></a></section>


<section>
<h1>å¾®ä¿¡<abbr title="The word 'å¾®ä¿¡' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å¾®ä¿¡', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosWX.png" alt="post-qrcode"></a></section>


<section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosMGC.png" alt="post-qrcode"></a><section>
  
  
</section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocos520.png" alt="post-qrcode"></a></section>
<section>
    <h1>è®¿å®¢ç»Ÿè®¡</h1>
    <br/>
    <a href="http://s07.flagcounter.com/more/2SH"><img src="http://s07.flagcounter.com/count/2SH/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
</section><section>
    <h1>æ–°æµªå¾®åš</h1>
    <ul id="weibo">
        <li>
            
            <!-- åœ¨æ­¤æ’å…¥è·å¾—çš„å¾®åšç§€ä»£ç  -->
            <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3288975567&verifier=20ffcedd&dpc=1"></iframe>
            
        </li>
    </ul>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - iCocos -
<span class="credit">welcome to <a href="http://al1020119.github.io">æ›¹#é»</a></span>
</p>

</footer>
  






<!--
-->



</body>
</html>
