
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>é6S-å®ç°3D Touch - iOSæ¢¦å·¥å‚</title>
  <meta name="author" content="iCocos">

  
  <meta name="description" content="iCocosåšå®¢">
  <meta name="keywords" content="iCocos, iOSå¼€å‘, åšå®¢, æŠ€æœ¯åˆ†æ, æ–‡ç« , å­¦ä¹ , æ›¹é», æ›¹ç†é¹">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://al1020119.github.io/blog/2016/04/05/fei6sshixian3dtouch/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iOSæ¢¦å·¥å‚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iOSæ¢¦å·¥å‚</a></h1>
  
    <h2>iCocosâ€”â€”ä¸æˆ˜èƒœè‡ªå·±ï¼Œä½•ä»¥æ”¹å˜æœªæ¥ï¼</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="al1020119.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">åšæ–‡</a></li>
  <li><a href="/blog/archives">å½’æ¡£</a></li>
  <li><a href="/icocos">iCocos</a></li>
  <li><a href="/about">æ–‡ç« </a></li>
  <li><a href="/other">å…¶ä»–</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">é6S-å®ç°3D Touch</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-05T13:32:08+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>1:32 pm</span></time>
        
        
        |   <a href="#comments">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>é¦–å…ˆå…ˆç»™æˆ‘è¿™å›°éš¾çš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›é“ä¸ªæ­‰å“ˆï¼ŒçœŸçš„å°½åŠ›äº†ã€‚
æœ¬ç« æ’ç‰ˆæ˜¯å‚ç…§<a href="http://bbs.pediy.com/showthread.php?t=205133%E5%A4%A7%E7%A5%9E%E7%9A%84%E6%9D%A5%E6%8E%92%E7%9A%84%EF%BC%8C%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%86%99%E5%BF%83%E5%BE%97%E6%96%87%EF%BC%8C%E4%B9%9F%E6%8A%8A%E6%89%80%E5%AD%A6%E5%88%B0%E7%9A%84%E5%88%86%E4%BA%AB%E7%BB%99%E5%A4%A7%E5%AE%B6">http://bbs.pediy.com/showthread.php?t=205133%E5%A4%A7%E7%A5%9E%E7%9A%84%E6%9D%A5%E6%8E%92%E7%9A%84%EF%BC%8C%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%86%99%E5%BF%83%E5%BE%97%E6%96%87%EF%BC%8C%E4%B9%9F%E6%8A%8A%E6%89%80%E5%AD%A6%E5%88%B0%E7%9A%84%E5%88%86%E4%BA%AB%E7%BB%99%E5%A4%A7%E5%AE%B6</a></p>

<p>æœ€è¿‘æ‰æ¥è§¦ä¸ä¹…çš„é€†å‘å·¥ç¨‹,åˆ·å¤œ,çˆ†è‚,æŠŠã€ŠiOSåº”ç”¨é€†å‘å·¥ç¨‹ã€‹è¿™æœ¬ä¹¦çš„å·¥å…·ï¼Œå…¨éƒ¨çœ‹äº†ä¸€éï¼Œå¹¶ä¸”å°è¯•äº†ä¸€éï¼Œæ„Ÿè§‰éœ€è¦ç‚¹ä»€ä¹ˆã€‚ é‚£å°±æ˜¯å®è·µï¼  æœ€è¿‘6sæ‰‹æœºå‡ºäº†3DTouchï¼Œæ— å¥ˆæ‰‹ä¸­æ²¡æœ‰è¿™æ¬¾æœºå‹ï¼Œæ°å¥½æœ€è¿‘å¯¹é€†å‘å°æœ‰å¿ƒå¾—ï¼Œåˆå¬è¯´è¿‡å·²ç»æœ‰æ’ä»¶èƒ½å®ç°åŒæ ·çš„éœ€æ±‚ï¼Œè¯æ˜ç¡®å®æœ‰å¯è¡Œæ€§ï¼Œäºæ˜¯å¼€åŠ¨ã€‚æ ¹æ®ç‚¹å‡»çš„åˆ¤æ–­å’Œå‡ºç°ï¼Œåˆæ­¥æ„Ÿè§‰ï¼Œè¿™åº”è¯¥ä¸éœ€è¦å¤šå°‘è¡Œä»£ç å°±èƒ½æå®šï¼Œåº”è¯¥åªè¦æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿ï¼Œæˆ–è€…æ˜¯æ›´æ”¹ä¸€ä¸ªæ‰‹åŠ¿çš„ç‚¹å‡»äº‹ä»¶ï¼Œè®©ç³»ç»Ÿè®¤ä¸ºå‘ç”Ÿäº†3DTouchç‚¹å‡»äº‹ä»¶ï¼Œå°±å¯ä»¥äº†ã€‚</p>

<ul>
<li>æ‰€éœ€å·¥å…·: cycriptï¼ŒopenSSHï¼Œclass-dump</li>
<li>æµ‹è¯•ç¯å¢ƒï¼šiOS9.0.2ï¼ŒiPhone5s</li>
<li>å¤‡æ³¨ï¼šå› ä¸ºè‡ªèº«æ²¡æœ‰3DTouchï¼Œæ‰€ä»¥éœ€è¦ä¸‹è½½ä¸€ä¸ªæ’ä»¶ï¼Œè®©æœºå™¨æ‹¥æœ‰3DTouchåŠŸèƒ½ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯forcyï¼Œé€šè¿‡è¦†ç›–é•¿æŒ‰æ‰‹åŠ¿ï¼Œå®ç°</li>
</ul>


<p>é€šè¿‡æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œå¾—åˆ°å…³é”®è¯  Shortcut Menu peek pop
è¿™ä¸ªè¯å°†æ¥å°±æ˜¯è¦åœ¨æ‰¾å…³é”®æ–¹æ³•æ—¶åˆ»æ‰€è¦ç”¨åˆ°çš„</p>

<!--more-->


<h4>ç°åœ¨å¼€å§‹ï¼</h4>

<p>é€šè¿‡sshè¿æ¥åˆ°æ‰‹æœºï¼Œç„¶åå°†cycriptæ³¨å…¥åˆ°SpringBoard</p>

<pre><code>huangjipingde-iPhone:~ root# cycript -p SpringBoard
</code></pre>

<p>é¦–å…ˆ å…ˆéš†é‡ä»‹ç»1ä¸ªæ–¹æ³•ï¼Œ2ä¸ªå‡½æ•°</p>

<ul>
<li>1æ–¹æ³• [view recursiveDescription]  è¯¥æ–¹æ³•å¯ä»¥å½“åšæ˜¯Revealçš„æ–‡å­—ç‰ˆï¼Œç”¨æ¥æŸ¥çœ‹å½“å‰é¡µé¢çš„å¸ƒå±€</li>
<li><p>2å‡½æ•°ï¼ŒåŸç†å‡æ˜¯runtimeï¼Œä½†æ˜¯ç¬¬äºŒä¸ªæ²¡æœ‰æ€ä¹ˆçœ‹æ‡‚ã€‚ã€‚ã€‚</p></li>
<li><p>printMethods æ‰“å°å‡ºè¯¥ç±»æ‰€æœ‰çš„æ–¹æ³•ï¼Œåè¾¹æ¥çš„æ˜¯å®ç°çš„åœ°å€,åœ¨è¿™å„¿è¡¥å……ä¸€ä¸‹ï¼Œå¦‚æœæƒ³å¯¹æŸä¸ªæ–¹æ³•æ‰“æ–­ç‚¹ï¼Œä½†æ˜¯åˆä¸æƒ³ä½¿ç”¨idaæŸ¥çœ‹æ–¹æ³•åç§»ï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™å®ç°çš„åœ°å€å¤„ï¼Œæ·»åŠ æ–­ç‚¹ï¼Œè™½ç„¶ä¸çŸ¥é“æ–­åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œä½†æ˜¯å¯ä»¥è‚¯å®šä¸€å®šæ˜¯åœ¨æ‰§è¡Œè¯¥æ–¹æ³•çš„æ—¶å€™ã€‚æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p></li>
</ul>


<p>ä»£ç :</p>

<pre><code>function printMethods(className){
var count = new new Type("I");
var methods = class_copyMethodList(objc_getClass(className),count);
var methodsArray = [];
for (var i = 0; i &lt; *count; i++){
var method = methods[i];
methodsArray.push({selector:method_getName(method), implentation:method_getImplementation(method)});
}
free(methods);
free(count);
return methodsArray;
}
</code></pre>

<p><img src="/images/nixiangqudong001.png" title="Caption" ></p>

<ol>
<li><p>tryPrintIvarsæ‰“å°å‡ºå¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š
ä»£ç :</p>

<p>  function tryPrintIvars(a){
  var x={};
  for(i in <em>a){
  try{
  x[i] = (</em>a)[i];
  } catch(e){}
  }
   return x;}</p></li>
</ol>


<p><img src="/images/nixiangqudong002.png" title="Caption" ></p>

<p>å‡†å¤‡å·¥ä½œéƒ½åšå¥½äº†ï¼Œå°†ä¸¤ä¸ªå‡½æ•°éƒ½å…ˆè¾“å…¥è¿›å»</p>

<p><img src="/images/nixiangqudong003.png" title="Caption" ></p>

<p>å› ä¸ºæœ€åçš„ç›®æ ‡æ˜¯åº”ç”¨å›¾æ ‡ï¼Œæ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬ä»ä¸»ç•Œé¢å¼€å§‹ç€æ‰‹æ‰“å°å®ƒçš„UIå¸ƒå±€
ä»£ç :</p>

<pre><code>[[UIApplication sharedApplication].keyWindow.rootViewController.view recursiveDescription]
</code></pre>

<p><img src="/images/nixiangqudong004.png" title="Caption" ></p>

<p>ç„¶åå‡ºæ¥äº†ä¸€å¤§ç‰‡ï¼Œçº¢å‘¦å‘¦çš„ä»£ç ï¼Œçœ‹ç€éƒ½çœ¼ç›ç–¼ï¼Œ4ç‚¹é’Ÿæ—¶çœ‹å¾—çœ¼ç›éƒ½çäº†å•Šã€‚æ­¤æ—¶åº”æƒ³ï¼Œä¸»ç•Œé¢å¯ä»¥æ»šåŠ¨ï¼Œæ˜¯ä¸€ä¸ªscrollViewï¼Œæ˜¯scrollViewå°±å¾—æœ‰contentSizeï¼Œç„¶åä¸€çœ‹æ‰‹æœºçš„é¡µé¢ï¼Œæ€»å…±æœ‰5é¡µï¼Œç”±äº5sæœºå‹çš„å®½åº¦æ˜¯320ï¼Œæ‰€ä»¥è¿™æ—¶å€™å¯ä»¥å¤§èƒ†çŒœæµ‹å®ƒçš„contentSizeçš„æœ€å¤§å®½åº¦æ˜¯1600ï¼Œç„¶åcommond+Få¤§æ³•</p>

<p><img src="/images/nixiangqudong005.png" title="Caption" ></p>

<p>å‡†ç¡®å‘½ä¸­ï¼ŒåŒæ—¶ï¼Œè¿˜æ³¨æ„åˆ°ï¼Œå®ƒçš„contentOffsetæ˜¯960åˆæ­¤æ—¶æˆ‘çš„é¡µé¢æ­£æ˜¯ç¬¬4é¡µï¼ŒåŸºæœ¬é”å®šç›®æ ‡ï¼ŒæŸ¥æ‰¾frameçš„åæ ‡æ˜¯960ï¼Œ0çš„viewï¼Œæ­¤æ—¶å¯ä»¥å¾—åˆ°å¤§é‡ä¿¡æ¯äº†ï¼ŒSBRootIconListViewï¼Œè¿™ä¸ªå°±æ˜¯ç”¨æ¥è£…ä¸€é¡µæ‰€æœ‰å›¾æ ‡çš„Viewï¼ŒSBIconListModelè¿™ä¸ªé‡Œè¾¹ï¼Œæˆ‘çŒœæ˜¯è£…äº†è¯¥viewé‡Œè¾¹çš„æ¨¡å‹ä¿¡æ¯ï¼Œæ³¨æ„ï¼Œ11 iconsï¼Œæ­£å¥½æ˜¯æˆ‘ä»¬é¡µé¢æ‰€æœ‰çš„å›¾æ ‡æ•°ï¼Œæ­¤æ—¶å†çœ‹åè¾¹SBIconViewçš„size 62ï¼Œ62  è¿™å’Œå›¾æ ‡å°ºå¯¸çš„å·®è·åªæœ‰2ä¸ªç‚¹ï¼ŒåŸºæœ¬é”å®šï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ç›®æ ‡</p>

<p><img src="/images/nixiangqudong006.png" title="Caption" ></p>

<ul>
<li><p>æ­¤æ—¶ï¼Œè®©æˆ‘ä»¬æ‰¾åˆ°æ˜¯ä»€ä¹ˆåœ¨å¤„ç†SBIconViewçš„äº‹ä»¶ï¼Œæˆ‘ä»¬æ‰€çŸ¥é“çš„ï¼Œviewä¸€èˆ¬æ˜¯ç”¨æ¥å±•ç¤ºçš„ï¼Œäº‹ä»¶çš„å‘ç”Ÿä¸€èˆ¬éƒ½ä¼šäº¤ç»™ä»£ç†æ¥è´Ÿè´£ã€‚è®©æˆ‘ä»¬ä½¿ç”¨nextResponderï¼Œæˆ–è€…å¯»æ‰¾ä»–ä»¬çš„ä»£ç†ï¼Œæ¥å®šä½åˆ°ä¸€ä¸ªcontrolleræ–‡ä»¶ï¼Œå¾ˆå¹¸è¿ï¼Œç›´æ¥ä¸€æ­¥å°±æ‰¾åˆ°äº†ï¼Œå°±æ˜¯å®ƒï¼šSBIconControllerï¼</p></li>
<li><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥class-dumpå‡ºSpringBoardçš„å¤´æ–‡ä»¶äº†ï¼Œå»æŸ¥çœ‹ä¸€ä¸‹å®ƒçš„é‡Œè¾¹éƒ½æœ‰äº›ä»€ä¹ˆæ–¹æ³•å’Œå±æ€§ï¼Œå¦‚æœæƒ³å·æ‡’ï¼Œå»githubç›´æ¥æœç´¢ä¹Ÿè¡Œã€‚ã€‚ã€‚
æ ¹æ®å…³é”®è¯å’Œæ–¹æ³•åè¯‘çš„æ„æ€å¤§è‡´é”å®šå‡ºæ¥ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•</p></li>
</ul>


<p>psï¼š  è¿™å„¿çš„char æ˜¯BOOLç±»å‹
ä»£ç :</p>

<pre><code>-(void)_handleShortcutMenuPeek:(id)arg1 ;
-(SBApplicationShortcutMenu *)presentedShortcutMenu;
-(char)_canRevealShortcutMenu;
-(id)_aggregateLoggingAppKeyForShortcutMenu:(id)arg1 ;
-(void)applicationShortcutMenu:(id)arg1 activateShortcutItem:(id)arg2 index:(int)arg3 ;
-(void)applicationShortcutMenu:(id)arg1 startEditingForIconView:(id)arg2 ;
-(void)applicationShortcutMenu:(id)arg1 launchApplicationWithIconView:(id)arg2 ;
-(void)applicationShortcutMenuDidPresent:(id)arg1 ;
-(void)_revealMenuForIconView:(id)arg1 presentImmediately:(char)arg2 ;
</code></pre>

<p>è‡ªå·±å†™ä¸€ä¸ªtweakï¼Œhookæ‰€æœ‰çš„è¿™äº›å‡½æ•°ï¼Œç»™ä»–ä»¬æ‰€æœ‰çš„å®ç°ä¹‹å‰åŠ ä¸Šä¸€ä¸ªNSLogï¼ˆï¼‰ï¼ŒæŸ¥çœ‹è°ƒç”¨çš„é¡ºåºï¼Œå’Œä¼ è¿›æ¥çš„å€¼çš„ç±»å‹ã€‚ ä»¥åŠä¸€æ¬¡Peekäº‹ä»¶æ‰€å…³è”åˆ°äº†å“ªäº›æ–¹æ³•ã€‚
ä»£ç :</p>

<pre><code>%hook SBIconController

- (void)_revealMenuForIconView:(id)arg1 presentImmediately:(BOOL)arg2 {
NSLog(@"ZZT3D _revealMenuForIconView:arg1:%s,%@--arg2:%c",object_getClassName(arg1), arg1, arg2);
    %orig;
}

- (void)_handleShortcutMenuPeek:(id)arg1
{
NSLog(@"ZZT3D _handleShortcutMenuPeek:%s,%@",object_getClassName(arg1),arg1);
%orig;
}

-(char)_canRevealShortcutMenu
{
NSLog(@"ZZT3D _canRevealShortcutMenu");
  return %orig;
}
-(id)_aggregateLoggingAppKeyForShortcutMenu:(id)arg1{

 NSLog(@"ZZT3D ggregateLoggingAppKeyForShortcutMenu:%s,%@",object_getClassName(arg1),arg1);
    return %orig;
}

-(void)applicationShortcutMenu:(id)arg1 activateShortcutItem:(id)arg2 index:(int)arg3
{
NSLog(@"ZZT3D activateShortcutItem:arg1%s,%@â€”arg2%s,%@--arg3:%d",object_getClassName(arg1),arg1,object_getClassName(arg2),arg2,arg3);
%orig;
}


-(void)applicationShortcutMenu:(id)arg1 startEditingForIconView:(id)arg2 {
NSLog(@"ZZT3D startEditingForIconView:arg1%s,%@â€”arg2%s,%@",object_getClassName(arg1),arg1,object_getClassName(arg2),arg2);
%orig;

}
-(void)applicationShortcutMenu:(id)arg1 launchApplicationWithIconView:(id)arg2{
NSLog(@"ZZT3D launchApplicationWithIconView:arg1%s,%@â€”arg2%s,%@",object_getClassName(arg1),arg1,object_getClassName(arg2),arg2);
%orig;
}

-(void)applicationShortcutMenuDidPresent:(id)arg1{
NSLog(@"ZZT3D applicationShortcutMenuDidPresent:%s,%@",object_getClassName(arg1),arg1);
%orig;
}

%end
</code></pre>

<p>æ­¤æ—¶æˆ‘ä»¬æ‹¿æ‰‹æœºè¿›è¡Œä¸€æ¬¡é•¿æŒ‰æ“ä½œï¼Œä½¿å…¶å¼¹å‡ºShotcutMenuèœå•ï¼Œç„¶ååœ¨openSSHä¸­æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—grep ZZT3D /var/log/syslogæŸ¥çœ‹ä¸€ä¸‹ï¼Œè¯¥äº‹ä»¶å¤„ç†åˆ†åˆ«ä½¿ç”¨äº†é‚£å‡ ä¸ªæ–¹æ³•ã€‚</p>

<p><img src="/images/nixiangqudong007.png" title="Caption" ></p>

<p>å› ä¸ºæ˜¯è¦æ¬ºéª—ç³»ç»Ÿï¼Œæ‰€ä»¥æ–¹æ³•åº”è¯¥æ˜¯åœ¨å‰æ–¹ï¼Œåˆæ­¥å®šä½åˆ°è¿™3ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªé¡¾åæ€ä¹‰è¿”å›å€¼å°±æ˜¯èƒ½ä¸èƒ½æ˜¾ç¤ºshotcutMenuï¼Œç¬¬äºŒä¸ªï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä¼ è¿›æ¥äº†ä¸€ä¸ªæ‰‹åŠ¿ï¼Œé€šè¿‡è¿™æ‰‹åŠ¿çš„ä¿¡æ¯ï¼ŒåŸºæœ¬å¯ä»¥æ¨æ–­ï¼Œè¿™ä¸ªå°±æ˜¯æ’ä»¶ä½œè€…ç”¨æ¥æ¬ºéª—ç³»ç»Ÿçš„æ‰‹åŠ¿ï¼Œè€Œè¯¥æ–¹æ³•ï¼Œå°±æ˜¯æ‰‹åŠ¿çš„targetæ–¹æ³•ï¼Œç¬¬ä¸‰ä¸ªï¼Œæ ¹æ®æ„æ€å¯ä»¥å¾—çŸ¥ï¼Œä»XXiconViewï¼Œæ˜¯å¦ç«‹å³æ˜¾ç¤ºã€‚æ ¸å¿ƒå°±åœ¨äºè¿™å„¿äº†ã€‚æœ€åï¼Œæˆ‘ä»¬å†æ‰“å°ä¸€éSBIconViewçš„æ‰€æœ‰å±æ€§ï¼Œç”¨æ¥ç¡®è®¤ä¸€ä¸‹</p>

<p><img src="/images/nixiangqudong008.png" title="Caption" ></p>

<p>ç»§ç»­æœç´¢å…³é”®è¯ï¼Œæœç„¶åˆæœ‰å¤§æ”¶è·_shortcutMenuPeekGestureæœ‰ä¸€ä¸ªå¦‚æ­¤æ‰‹åŠ¿ï¼Œé‡Œè¾¹çš„ä¸œè¥¿çš„æ‰‹åŠ¿ã€‚</p>

<p><img src="/images/nixiangqudong009.png" title="Caption" ></p>

<p>çŒœæµ‹å¾—åˆ°äº†æå¤§çš„è‚¯å®šï¼Œä¸‹é¢å°±å¼€å§‹ç¼–å†™tweakäº†
ç”±äºæ˜¯è¦ç»™æ¯ä¸€ä¸ªiconViewéƒ½æ·»åŠ æ‰‹åŠ¿ï¼Œå¹¶ä¸”åªæ·»åŠ ä¸€æ¬¡ï¼Œæ‰€ä»¥ç¿»çœ‹äº†iconViewå¤´æ–‡ä»¶ï¼ŒæŸ¥çœ‹ä»–çš„initæ–¹æ³•ï¼Œé€‰æ‹©äº†åœ¨initWithContentTypeä¸­åˆå§‹åŒ–ã€‚
è´´ä¸ŠTweak.xmçš„æºç 
å…³äºä»£ç çš„ç¼–å†™ï¼Œä¸­é—´ä¹Ÿè¸©è¿‡ä¸å°‘å‘ï¼Œæ¯”å¦‚_revealMenuForIconViewä¸­çš„yesï¼Œnoçš„è®¾ç½®ï¼Œè¿˜å¥½ä¸€å¼€å§‹çŒœçš„æ—¶å€™å°±å…¨éƒ¨æ‰‹åŠ¨èµ‹å€¼ã€‚
è‡³äºæ‰‹åŠ¿ä¸ºä»€ä¹ˆä¼ å€¼éœ€è¦å¦‚æ­¤æ€ªå¼‚ï¼Œå› ä¸ºæ£€æµ‹å‘ç°åŸæ–¹æ³•åªè¯†åˆ«é•¿æŒ‰æ‰‹åŠ¿ï¼Œå¹¶ä¸è¯†åˆ«è½»æ‰«æ‰‹åŠ¿ï¼Œä½†æ˜¯å› ä¸ºä¸ªäººä¹ æƒ¯ï¼Œä¸æƒ³è¦†ç›–ç³»ç»Ÿçš„æ‰‹åŠ¿ï¼Œåªæƒ³å•çº¯çš„å¢åŠ ä¸€ä¸ªåŠŸèƒ½ã€‚è€¿ç›´çš„æ¥¼ä¸»å°è¯•å°†ä¸€ä¸ªè½»æ‰«æ‰‹åŠ¿ï¼Œå¼ºè¡Œå˜æˆé•¿æŒ‰æ‰‹åŠ¿ã€‚å¾ˆå¤šå±æ€§éƒ½æ˜¯readonlyï¼Œä½†æ˜¯è¿™ä¸ªä½¿ç”¨kvcè½»æ¾æå®šï¼Œç°åœ¨è½»æ‰«ä¸€ä¸‹æ‰‹æœºï¼å‡ºç°äº†æ„æƒ³ä¹‹ä¸­çš„å¼¹çª—ï¼
ä»£ç :</p>

<pre><code>#import "ZZ3DTouch.h"

%hook SBIconView 

- (id)initWithContentType:(id)arg1{
// è®¾ç½®3Dtouchæ‰‹åŠ¿
  // æ‰‹åŠ¿ä¼ è¿‡å»çš„å°±æ˜¯æ‰‹åŠ¿è‡ªå·±æœ¬èº«,æœ¬èº«æ‹¥æœ‰æ‰€åœ¨çš„view
  self.shortcutMenuPeekGesture = [[%c(UISwipeGestureRecognizer) alloc] initWithTarget:[%c(SBIconController) sharedInstance] action:@selector(_handleShortcutMenuPeek:)];
  self.shortcutMenuPeekGesture.direction = UISwipeGestureRecognizerDirectionUp;

  return %orig;
}

%end

%hook SBIconController

- (void)_revealMenuForIconView:(id)arg1 presentImmediately:(BOOL)arg2 {

  // yes æ”¹ä¸ºnoä¹‹åæ²¡æœ‰æ˜¾ç¤ºï¼Œæˆ–è€…æ²¡æœ‰è®¾ç½®ä¹Ÿä¼šä¸æ˜¾ç¤º

  %orig(iconView, YES);

}

- (void)_handleShortcutMenuPeek:(id)arg1

{
  UISwipeGestureRecognizer *swipe = arg1;
  UILongPressGestureRecognizer *press = [[UILongPressGestureRecognizer alloc] init];
  [press setValue:@(UIGestureRecognizerStateBegan) forKey:@"state"];
  [press setValue:swipe.view forKey:@"view"];

%orig(press);

}
%end
</code></pre>

<p><img src="/images/nixiangqudong010.png" title="Caption" ></p>

<p><img src="/images/nixiangqudong011.png" title="Caption" ></p>

<hr />

<pre><code>Q Qï¼š2211523682/790806573

å¾®ä¿¡ï¼š18370997821/13148454507

å¾®åšWB:http://weibo.com/u/3288975567?is_hot=1

gitåšæ–‡ï¼šhttp://al1020119.github.io/

githubï¼šhttps://github.com/al1020119
</code></pre>

<p><img src="/images/iCocosCoder.jpg" title="Caption" ></p>

<p><img src="/images/iCocosPublic.jpg" title="Caption" ></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">iCocos</span></span>

      




<time class='entry-date' datetime='2016-04-05T13:32:08+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>1:32 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/reverse/'>reverse</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/03/30/youxifanbianyi/" title="Previous Post: æ¸¸æˆåç¼–è¯‘">&laquo; æ¸¸æˆåç¼–è¯‘</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/04/10/nixiangzhifubao/" title="Next Post: é€†å‘æ”¯ä»˜å®">é€†å‘æ”¯ä»˜å® &raquo;</a>
      
    </p>
  </footer>
</article>



  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title="é6S-å®ç°3D Touch"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"icocoscao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
    <h1>æ–‡ç« åˆ†ç±»</h1>
    <ul id="categories">
        <li class='category'><a href='/blog/categories/apples/'>apples (2)</a></li>
<li class='category'><a href='/blog/categories/audio-video/'>audio-video (1)</a></li>
<li class='category'><a href='/blog/categories/developer/'>developer (16)</a></li>
<li class='category'><a href='/blog/categories/foundation/'>foundation (32)</a></li>
<li class='category'><a href='/blog/categories/full/'>full (13)</a></li>
<li class='category'><a href='/blog/categories/low-level/'>low-level (4)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (4)</a></li>
<li class='category'><a href='/blog/categories/others/'>others (1)</a></li>
<li class='category'><a href='/blog/categories/performance/'>performance (12)</a></li>
<li class='category'><a href='/blog/categories/reverse/'>reverse (25)</a></li>
<li class='category'><a href='/blog/categories/senior/'>senior (40)</a></li>
<li class='category'><a href='/blog/categories/stack/'>stack (13)</a></li>
<li class='category'><a href='/blog/categories/summarize/'>summarize (5)</a></li>
<li class='category'><a href='/blog/categories/tools/'>tools (5)</a></li>

    </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/08/31/duo-xian-cheng-an-quan-%3Fying-gai-bu-zhi-zhe-xie-%3F!/">å¤šçº¿ç¨‹å®‰å…¨ï¼Ÿåº”è¯¥ä¸æ­¢è¿™äº›ğŸ˜‚ï¼</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/30/xiu-xing-pian-ioskai-fa-zhong-chang-jian-she-ji-mo-shi/">ä¿®è¡Œç¯‡-ioså¼€å‘ä¸­å¸¸è§è®¾è®¡æ¨¡å¼</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/28/xiu-xing-pian-shu-ju-jie-gou-chang-jian-cao-zuo-yu-zong-jie/">ä¿®è¡Œç¯‡-æ•°æ®ç»“æ„å¸¸è§æ“ä½œä¸æ€»ç»“</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/25/xiu-xing-pian-suan-fa-zhi-jing-hua-suan-fa-and-mou-pao/">ä¿®è¡Œç¯‡-ç®—æ³•ä¹‹ç²¾å-ç®—æ³•&amp;å†’æ³¡</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/23/xiu-xing-pian-23chong-she-ji-mo-shi/">ä¿®è¡Œç¯‡-23ç§è®¾è®¡æ¨¡å¼</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/al1020119">@al1020119</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'al1020119',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
<h1>æ‰«ä¸€æ‰«<abbr title="The word 'æ‰«ä¸€æ‰«' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'æ‰«ä¸€æ‰«', not for image.">&trade;</abbr></h1>
<a href="http://al1020119.github.io/blog/2016/04/05/fei6sshixian3dtouch/"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=http://al1020119.github.io/blog/2016/04/05/fei6sshixian3dtouch/" alt="post-qrcode"></a></section>
<section>
    <h1>è®¿å®¢ç»Ÿè®¡</h1>
    <br/>
    <a href="http://s07.flagcounter.com/more/2SH"><img src="http://s07.flagcounter.com/count/2SH/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
</section><section>
    <h1>æ–°æµªå¾®åš</h1>
    <ul id="weibo">
        <li>
            
            <!-- åœ¨æ­¤æ’å…¥è·å¾—çš„å¾®åšç§€ä»£ç  -->
            <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3288975567&verifier=20ffcedd&dpc=1"></iframe>
            
        </li>
    </ul>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - iCocos -
<span class="credit">welcome to <a href="http://al1020119.github.io">æ›¹#é»</a></span>
</p>

</footer>
  






<!--
-->



</body>
</html>
