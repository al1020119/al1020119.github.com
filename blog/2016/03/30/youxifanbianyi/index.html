
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>æ¸¸æˆåç¼–è¯‘ - iOSæ¢¦å·¥å‚</title>
  <meta name="author" content="iCocos">

  
  <meta name="description" content="iCocosåšå®¢">
  <meta name="keywords" content="iCocos, iOSå¼€å‘, åšå®¢, æŠ€æœ¯åˆ†æ, æ–‡ç« , å­¦ä¹ , æ›¹é», æ›¹ç†é¹">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://al1020119.github.io/blog/2016/03/30/youxifanbianyi/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iOSæ¢¦å·¥å‚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iOSæ¢¦å·¥å‚</a></h1>
  
    <h2>iCocosâ€”â€”ä¸æˆ˜èƒœè‡ªå·±ï¼Œä½•ä»¥æ”¹å˜æœªæ¥ï¼</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="al1020119.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">åšæ–‡</a></li>
  <li><a href="/blog/archives">å½’æ¡£</a></li>
  <li><a href="/icocos">iCocos</a></li>
  <li><a href="/about">æ–‡ç« </a></li>
  <li><a href="/other">å…¶ä»–</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">æ¸¸æˆåç¼–è¯‘</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-03-30T13:32:08+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>1:32 pm</span></time>
        
        
        |   <a href="#comments">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p> ipaæ¸¸æˆåç¼–è¯‘
çœ‹ä¸æ‡‚çš„è¯·é£˜è¿‡ï¼Œä¸è¦ç»§ç»­ã€‚
è¿™ä¸æ˜¯ç»™æ–°æ‰‹çœ‹çš„ï¼Œä¹Ÿä»£è¡¨ä½ ä¸éœ€è¦è§£å†³ç¨‹åºçš„ä¿®æ”¹é—®é¢˜ã€‚
è¿™äº›æŠ€å·§ä¸åªç”¨äºæ¸¸æˆçš„ä¿®æ”¹ã€‚</p>

<p>ä¸‹è¼‰ Windows å·¥å…·</p>

<p>Windows :
winscp <a href="http://winscp.net/eng/download.php">http://winscp.net/eng/download.php</a>
PuTTY <a href="http://putty.very.rulez.org/latest/x86/putty.exe">http://putty.very.rulez.org/latest/x86/putty.exe</a></p>

<p>Mac / Linux :
ç”¨å…§ç½®çš„ Terminal ä¾¿å¯</p>

<!--more-->


<p>æ²¡ wifi ç”¨ iPhone Tunnel Suite 3.0
<a href="http://bbs.weiphone.com/read-htm-tid-597149.html">http://bbs.weiphone.com/read-htm-tid-597149.html</a></p>

<p>è‹¹æœç”µè„‘ç”¨ iPhoneSSH
<a href="http://bbs.weiphone.com/read-htm-tid-720564.html">http://bbs.weiphone.com/read-htm-tid-720564.html</a></p>

<p>iPhone/iPod Touch åœ¨ cydia å…§å®‰è£ deb åŒ…
å®‰è£…è¿™äº› deb åŒ…æœ€æ–¹ä¾¿çš„æ–¹æ³•æ˜¯åœ¨ Cydia å†…æœç´¢åŠç›´æ¥å®‰è£…ï¼Œè¿™é‡Œæä¾›çš„ä¸‹è½½åŒ…åŠä¾èµ–åŒ…çš„é“¾æ¥ä¸‹è½½ç‚¹æ˜¯æ–¹ä¾¿æ‰‹å·¥å®‰è£…æ—¶ç”¨</p>

<p>OpenSSH (openssh) åŠ OpenSSL(openssl) ï¼ˆä¸iPhone/iPod Touch ç»ˆç«¯æ“ä½œï¼‰
<a href="http://apt.saurik.com/debs/openssh_5.2p1-8_iphoneos-arm.deb">http://apt.saurik.com/debs/openssh_5.2p1-8_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/openssl_0.9.8k-9_iphoneos-arm.deb">http://apt.saurik.com/debs/openssl_0.9.8k-9_iphoneos-arm.deb</a></p>

<p>unzip åŠ zip ï¼ˆè§£å‹ç¼©åŠå‹ç¼©æ‰“åŒ…å·¥å…·ï¼‰
<a href="http://apt.saurik.com/debs/unzip_5.52-5_iphoneos-arm.deb">http://apt.saurik.com/debs/unzip_5.52-5_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/zip_2.32-5_iphoneos-arm.deb">http://apt.saurik.com/debs/zip_2.32-5_iphoneos-arm.deb</a></p>

<p>vbindiff (iPhone ä¸Šçš„åå…­è¿›åˆ¶æŸ¥çœ‹å·®å¼‚åŠä¿®æ”¹å™¨)
<a href="http://apt.saurik.com/debs/vbindiff_3.0b1-3_iphoneos-arm.deb">http://apt.saurik.com/debs/vbindiff_3.0b1-3_iphoneos-arm.deb</a></p>

<p>Link Identity Editor (ldid) åŠ Darwin CC Tools (odcctools)ï¼ˆä¿®æ”¹åç”¨ ldid ç­¾å, odcctools åŒ…æ‹¬ otool, linker , assembleræ±‡ç¼–)
<a href="http://apt.saurik.com/debs/ldid_610-5_iphoneos-arm.deb">http://apt.saurik.com/debs/ldid_610-5_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/odcctools_286-8_iphoneos-arm.deb">http://apt.saurik.com/debs/odcctools_286-8_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/uuid_1.6.0-2_iphoneos-arm.deb">http://apt.saurik.com/debs/uuid_1.6.0-2_iphoneos-arm.deb</a></p>

<p>Diff Utilities (diffutils) (æ–‡æœ¬å·®å¼‚å·¥å…· diff)
<a href="http://apt.saurik.com/debs/diffutils_2.8.1-6_iphoneos-arm.deb">http://apt.saurik.com/debs/diffutils_2.8.1-6_iphoneos-arm.deb</a></p>

<p>less (æ–‡æœ¬æŸ¥çœ‹å·¥å…·)
<a href="http://apt.saurik.com/debs/less_418-3_iphoneos-arm.deb">http://apt.saurik.com/debs/less_418-3_iphoneos-arm.deb</a></p>

<p>Vi IMproved (vim) æˆ– nano (æ–‡æœ¬ç¼–è¾‘å·¥å…·)
<a href="http://apt.saurik.com/debs/vim_7.1-3_iphoneos-arm.deb">http://apt.saurik.com/debs/vim_7.1-3_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb">http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb</a>
æˆ–
<a href="http://apt.saurik.com/debs/nano_2.0.7-5_iphoneos-arm.deb">http://apt.saurik.com/debs/nano_2.0.7-5_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb">http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb</a></p>

<p>GNU Debugger (gdb) (ç¨‹åºè°ƒè¯•å·¥å…·) iOS 4.3.x æ›´æ–°
<a href="http://apt.saurik.com/debs/gdb_1518-11_iphoneos-arm.deb">http://apt.saurik.com/debs/gdb_1518-11_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb">http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/readline_6.0-7_iphoneos-arm.deb">http://apt.saurik.com/debs/readline_6.0-7_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/sqlite3_3.5.9-12_iphoneos-arm.deb">http://apt.saurik.com/debs/sqlite3_3.5.9-12_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/sqlite3-lib_3.5.9-2_iphoneos-arm.deb">http://apt.saurik.com/debs/sqlite3-lib_3.5.9-2_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/sqlite3-dylib_3.5.9-1_iphoneos-arm.deb">http://apt.saurik.com/debs/sqlite3-dylib_3.5.9-1_iphoneos-arm.deb</a></p>

<p>GNU Debugger (gdb) (ç¨‹åºè°ƒè¯•å·¥å…·)
<a href="http://apt.saurik.com/debs/gdb_962-5_iphoneos-arm.deb">http://apt.saurik.com/debs/gdb_962-5_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb">http://apt.saurik.com/debs/ncurses_5.7-9_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/readline_6.0-7_iphoneos-arm.deb">http://apt.saurik.com/debs/readline_6.0-7_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/sqlite3_3.5.9-12_iphoneos-arm.deb">http://apt.saurik.com/debs/sqlite3_3.5.9-12_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/sqlite3-lib_3.5.9-1_iphoneos-arm.deb">http://apt.saurik.com/debs/sqlite3-lib_3.5.9-1_iphoneos-arm.deb</a>
<a href="http://apt.saurik.com/debs/sqlite3-dylib_3.5.9-1_iphoneos-arm.deb">http://apt.saurik.com/debs/sqlite3-dylib_3.5.9-1_iphoneos-arm.deb</a></p>

<p>adv-cmds (ps å·¥å…·)
<a href="http://apt.saurik.com/debs/adv-cmds_119-5_iphoneos-arm.deb">http://apt.saurik.com/debs/adv-cmds_119-5_iphoneos-arm.deb</a></p>

<p>grep (grep æ–‡æœ¬æœç´¢å·¥å…·)
<a href="http://apt.saurik.com/debs/grep_2.5.4-3_iphoneos-arm.deb">http://apt.saurik.com/debs/grep_2.5.4-3_iphoneos-arm.deb</a></p>

<p>ARM å‚è€ƒä¹¦ç±</p>

<p><a href="http://bbs.weiphone.com/read-htm-tid-363306.html">http://bbs.weiphone.com/read-htm-tid-363306.html</a></p>

<p>ARMæŒ‡ä»¤é›†åŠä½¿ç”¨æ–¹æ³•</p>

<p>ARM System Developer&rsquo;s Guide (ä¸»è¦æ˜¯çœ‹ç¬¬ä¸‰ç«  Chapter 3)</p>

<p>ARM Assembly Language Programming</p>

<p>ä¿®æ”¹åŠç”¨ gdb è°ƒè¯•æ¸¸æˆæµç¨‹</p>

<p>(1) å®‰è£…åŠè¯•ç©æ¸¸æˆï¼Œæ¯ä¸ªæ¸¸æˆçš„ä¿®æ”¹æ–¹æ³•éƒ½ä¸åŒï¼Œæ²¡æœ‰ç©è¿‡è¿™æ¸¸æˆï¼Œæ€æ ·çŸ¥é“è¦ä¿®æ”¹ä»€ä¹ˆå‘¢ï¼Ÿ
è¿™æ•™ç¨‹ç”¨äº† Final Fantasy 2 ä½œä¾‹å­</p>

<p>(2) ç”¨ iTunes å®‰è£… Final Fantasy 2 ç ´è§£ç‰ˆæœ¬ (æœªç ´è§£çš„ä¸èƒ½åæ±‡ç¼–)</p>

<p>(3) ç”¨putty / ssh è¿æ¥iPhone / iPod Touchï¼Œå‡è®¾ä½ çš„iPhone / iPod Touch çš„IPåœ°å€æ˜¯192.168.1.104</p>

<p>Connection type: é€‰ SSH
Port é€‰ 22
æŒ‰ Open</p>

<p>PuTTY è¿æ¥ 192.168.1.104 å</p>

<p>Login æ‰“ root
Password(å‡è®¾ä½ æ²¡æœ‰æ›´æ”¹å¯†ç ) æ‰“ alpine</p>

<p>Mac / Linux Terminal å†…æ‰“
ssh <a href="&#109;&#97;&#105;&#x6c;&#116;&#111;&#58;&#x72;&#x6f;&#x6f;&#116;&#64;&#49;&#x39;&#50;&#x2e;&#49;&#x36;&#56;&#46;&#x31;&#x2e;&#49;&#x30;&#52;">&#114;&#x6f;&#x6f;&#x74;&#64;&#x31;&#x39;&#x32;&#x2e;&#x31;&#x36;&#56;&#x2e;&#49;&#x2e;&#49;&#48;&#52;</a></p>

<p>(4) è¿›å…¥æ¸¸æˆè·¯å¾„ç›®å½•å†…(å…ˆå†³æ¡ä»¶æ˜¯å·²ç”¨ PuTTy / Terminal è¿æ¥iPhone / iPod Touch)
æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>cd /var/mobile/Applications/*/FinalFantasy2.app
</code></pre>

<p>(5) åˆ°ä¸Šä¸€å±‚è·¯å¾„ç›®å½•å»ºç«‹ cheat ä¸´æ—¶å·¥ä½œè·¯å¾„ç›®å½•åŠæ¸¸æˆç¨‹å¼ä¸´æ—¶ä¿®æ”¹æ¡£
æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>cd ..
mkdir -p cheat
cd cheat
cp -p ../FinalFantasy2.app/FinalFantasy2 FinalFantasy2.original
</code></pre>

<p>(6) åæ±‡ç¼–åŸæ¸¸æˆç¨‹å¼
å¤åˆ¶ä»£ç </p>

<pre><code>otool -tv FinalFantasy2.original &gt; FinalFantasy2.original.txt
</code></pre>

<p>(7) æŸ¥çœ‹åæ±‡ç¼–ä»£ç åˆ†æå¹¶æ‰¾å‡ºè¦ä¿®æ”¹çš„åœ°æ–¹(æ¯ä¸ªæ¸¸æˆçš„ä¿®æ”¹åœ°æ–¹éƒ½ä¸åŒ, è¿™ç‚¹æœ€éš¾)
è¦ä¿®æ”¹æ¸¸æˆï¼Œä½ ä¼šæœ‰ä»¥ä¸‹çš„å›°éš¾æˆ–é—®é¢˜ï¼š</p>

<p>(i) æ²¡æœ‰é«˜é˜¶æºä»£ç ï¼Œåªæœ‰åæ±‡ç¼–ä»£ç 
åæ±‡ç¼–ä»£ç åˆ†ææ˜¯å›°éš¾çš„ä½†ç»å¯¹ä¸æ˜¯ä¸å¯èƒ½ä½œåˆ†æï¼Œä½ å¯ä»¥æ‰¾åˆ°äº›ä¸é”™çš„ARM Assemblyçš„å‚è€ƒä¹¦
åœ¨ä¸Šé¢äº¦å·²æä¾›äº†ä¸€äº›å¾ˆå¥½çš„ ARM æŒ‡ä»¤å‚è€ƒ
å¸¸è§çš„æ˜¯ä»¥ä¸‹è¿™äº›åŸºæœ¬çš„æŒ‡ä»¤åŠå…¶æ‰§è¡Œæ¡ä»¶ç ï¼š</p>

<p>MOV æˆ– MVN å¯„å­˜å™¨æ•°å€¼çš„ä¼ é€æ“ä½œ
ADD æˆ– SUB åŠ å‡çš„ç®—æœ¯æ“ä½œ
CMP æˆ– CMN æ¯”è¾ƒæ“ä½œ
ANDã€ORRã€EOR é€»è¾‘æ“ä½œ
Bã€BLã€BNEã€BGE åˆ†æ”¯/è·³è½¬æŒ‡ä»¤
MUL ä¹˜æ³•æ“ä½œ æˆ– LSL æ˜¯ äºŒè¿›åˆ¶å·¦ç§»ï¼Œå·¦ç§»ä¸€ä½ï¼Œå³åè¿›åˆ¶ä¹˜2å€
LDR æˆ– STR åŠ è½½åŠå­˜å‚¨æ•°æ®</p>

<p>æ¯ä¸ªæŒ‡ä»¤éƒ½å¯åŠ ä¸Šæ‰§è¡Œæ¡ä»¶ç æ ¹æ®ä¸Šä¸€ä¸ªè¿ç®—ã€é€»è¾‘æˆ–æ¯”è¾ƒæŒ‡ä»¤çš„ç»“æœå†³å®šæ˜¯å¦æ‰§è¡ŒæŒ‡ä»¤</p>

<p>æ‰§è¡Œæ¡ä»¶ç  (Condition Codes)ï¼š
â‘  CS åŠ CCï¼ˆCarryï¼‰è¿›ä½æ¡ä»¶ç ï¼ŒCSï¼è¿›ä½ï¼Œå¦åˆ™ï¼CC(ä¸è¿›ä½).
â‘¡ EQ åŠ NE ï¼ˆEqual æˆ– Zeroï¼‰ç›¸ç­‰æˆ–é›¶æ¡ä»¶ç ï¼ŒEQï¼è¿ç®—ç»“æœä¸ºç›¸ç­‰æˆ–é›¶æ—¶ï¼Œå¦åˆ™ï¼NE(ä¸ç›¸ç­‰).
â‘¢ VS åŠ VCï¼ˆOverflowï¼‰æº¢å‡ºæ¡ä»¶ç ã€‚ VS=æº¢å‡ºï¼Œå¦åˆ™ï¼VC(ä¸æº¢å‡º)ã€‚
â‘£ PL åŠ MI æ¡ä»¶ç ã€‚ PLï¼ˆPlus/Positiveï¼‰ï¼ç»“æœä¸ºæ­£ï¼ŒMIï¼ˆMinus/Negativeï¼‰ï¼ç»“æœä¸ºè´Ÿã€‚</p>

<p>â‘¤ GT åŠ LT æ¡ä»¶ç ã€‚ GTï¼ˆGreater Thanï¼‰ï¼å¤§äº(PL+VC+NE / MI+VS+NE)ï¼ŒLTï¼ˆLess Thanï¼‰ï¼å°äº(MI+VC / PL+VS)ã€‚
â‘¥ GE åŠ LE æ¡ä»¶ç ã€‚ GEï¼ˆGreater Than or Equalï¼‰ï¼å¤§æˆ–ç­‰äº(PL+VC / MI+VS)ï¼ŒLEï¼ˆLess Than or Equalï¼‰ï¼å°æˆ–ç­‰äº(MI+VC / PL+VS / EQ)ã€‚
â‘¦ HI åŠ LO æ¡ä»¶ç ã€‚ HIï¼ˆHigher Thanï¼‰ï¼æ— ç¬¦å·æ•°(unsigned)é«˜äº(CS+NE)ï¼ŒLOï¼ˆLower Thanï¼‰ï¼æ— ç¬¦å·æ•°(unsigned)ä½äº(CC)ã€‚
â‘§ HS åŠ LS æ¡ä»¶ç ã€‚ HSï¼ˆHigher or Sameï¼‰ï¼æ— ç¬¦å·æ•°(unsigned)é«˜äºæˆ–ç›¸ç­‰(CS/EQ)ï¼ŒLSï¼ˆLower or Sameï¼‰ï¼æ— ç¬¦å·æ•°(unsigned)ä½äºæˆ–ç›¸ç­‰(CC/EQ)ã€‚
â‘¨ AL åŠ NV æ¡ä»¶ç ã€‚ æ¡ä»¶ç é»˜è®¤ä¸ºALï¼ˆAlwaysï¼‰ï¼æ— æ¡ä»¶æ‰§è¡Œï¼ŒNVï¼ˆNeverï¼‰æ˜¯ALçš„ç›¸åï¼ä¸æ‰§è¡Œã€‚</p>

<p>ä¾‹å­åŠå…¶æ³¨è§£æ„æ€
å¤åˆ¶ä»£ç </p>

<p>CMP R0, R1       @å¯„å­˜å™¨æ•°å€¼ R0 åŠ R1 çš„æ¯”è¾ƒ
MOVGT R2, R0     @å¦‚æœç»“æœ R0 >(å¤§äº) R1ï¼Œåˆ™æ‰§è¡ŒMOV R2, R0å³ R2ï¼R0
MOVLE R2, R1     @å¦‚æœç»“æœ R0 &lt;=(å°æˆ–ç­‰äº) R1ï¼Œåˆ™æ‰§è¡ŒMOV R2, R1å³ R2ï¼R1</p>

<p>å¤åˆ¶ä»£ç </p>

<p>LDR R1, [R0]     @æ„æ€æ˜¯ R1 = <em>R0ï¼Œä»R0æŒ‡å‘çš„åœ°å€å¤„çš„æ•°æ®è½½å…¥åˆ°å¯„å­˜å™¨ R1
STR R1, [R0]     @æ„æ€æ˜¯ </em>R0 = R1ï¼ŒæŠŠå¯„å­˜å™¨ R1å†…çš„æ•°æ®å†™åˆ° R0 å†…æŒ‡å‘çš„åœ°å€å¤„</p>

<p>ARM æŒ‡ä»¤é›†åŠä½¿ç”¨æ–¹æ³•</p>

<p>(ii) çœ‹ä¸æ‡‚æ¸¸æˆç¨‹å¼æµç¨‹ï¼Œæ²¡æ³•åˆ†æ
æœ‰å¾ˆå¤šäººéƒ½å–œæ¬¢ç”¨ IDA Pro Advanced å»åšåˆ†æï¼Œ æ— ç–‘è¿™è½¯ä»¶æ˜¯ä¸ªéå¸¸å¥½çš„é™æ€åˆ†æå·¥å…·ï¼Œå®ƒæœ‰å›¾å½¢è§†å›¾æ˜¾ç¤ºä»£ç æµç¨‹ä½œæœç´¢åŠæ·±å±‚åˆ†æã€‚é™¤äº†å¯åˆ†æåæ±‡ç¼–ä»£ç å¤–ï¼Œäº¦å¯åæ±‡ç¼–ä¸€äº› otool ä¸èƒ½å¤„ç†çš„å·¥ä½œã€‚ ä½† IDA Pro Advanced åœ¨iPhone çš„ç¨‹å¼åªé€‚åˆåšé™æ€çš„åˆ†æã€‚</p>

<p>ä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ IDA Pro Advanced 5.2 åŠå…¶å‚è€ƒä¹¦ï¼Œå»ºè®®ä½ ä½¿ç”¨åŠŸèƒ½åŠè§†å›¾æ¯”è¾ƒå¼ºå¤§çš„ Windows ç‰ˆæœ¬ã€‚
<a href="http://bbs.weiphone.com/read-htm-tid-363306.html">http://bbs.weiphone.com/read-htm-tid-363306.html</a></p>

<p>åªçœ‹ä»£ç æ˜¯ä¸èƒ½ä½œåˆ†æï¼Œè¦é…åˆåŠ¨æ€è°ƒè¯•å»äº†è§£ç¨‹å¼çš„ç»†èŠ‚åœ¨å®é™…è¿è¡Œæ—¶å‘ç”Ÿçš„æ•°æ®åŠå˜åŒ–ã€‚åœ¨ç¬¬15æ­¥å°±æœ‰ç”¨ gdb ä½œåŠ¨æ€è°ƒè¯•çš„ä¾‹å­å»è®¾ç½®æ–­ç‚¹ã€ç»§ç»­ã€è·Ÿè¸ªåŠåˆ†æä»£ç ã€‚gdb çš„å‚è€ƒä¹¦å¯åœ¨ä¸Šé¢çš„é“¾æ¥ä¸‹è½½ã€‚</p>

<p>(iii) æ‰¾ä¸åˆ°æ¸¸æˆçš„æ•°æ®ä¾‹å¦‚é‡‘é’±ï¼Œç»éªŒå€¼ï¼Œè£…å¤‡ï¼Œç­‰çº§æš‚å­˜åœ¨é‚£ï¼Ÿ</p>

<p>å¼•ç”¨</p>

<p>æ–¹æ³•ä¸€ï¼šåœ¨ gdb è®¾ç½®æ–­ç‚¹åˆ†æ
ARM CPU æœ‰ä¸ªç‰¹æ€§ä¾¿æ˜¯ä¸€äº›åŠ å‡è®¡ç®—è¦ä¼ é€åˆ°CPUå¯„å­˜å™¨(register) è¿›è¡Œï¼Œå› æ­¤ä½ ä¼šç»å¸¸çœ‹åˆ°è¿™äº›è¦æ‰¾çš„æ•°æ®ä¼šå…ˆä»å†…å­˜ç”¨LDR æŒ‡ä»¤è½½å…¥åˆ°å¯„å­˜å™¨, ç»è¿‡ä¸€äº›è®¡ç®—(åŠ æˆ–å‡)ååŠé˜²æº¢ä½åˆ¤æ–­åä¾¿ç”¨STR æŒ‡ä»¤å­˜å‚¨è¿™å¯„å­˜å™¨å›å†…å­˜åœ°å€ã€‚</p>

<p>å¦å¤–ç”±äºè¿™äº›ç¨‹å¼å¤§å¤šæ˜¯ç”¨ Objective C æˆ– C++ è¯­è¨€å†™æˆï¼Œè¿™äº›ç¨‹åºå‘˜ä¼šç”¨ä¸€äº›æè¿°æ€§çš„å‡½æ•°åï¼Œä¾‹å¦‚å¸¦æœ‰ Money, Price, Gold, Exp, Item, Life, Level å­—æ®µç­‰ã€‚</p>

<p>åˆ©ç”¨è¿™ä¸¤ç‚¹ä¾¿å¯ä»¥å°†ç¨‹åºé”å®šåœ¨æŸäº›å‡½æ•°ä¸Šï¼Œå†åˆ©ç”¨ gdb è°ƒè¯•å·¥å…·æš‚åœåœ¨æŸäº›ç‚¹ä¸€æ­¥ä¸€æ­¥åœ°å•æ­¥æ‰§è¡ŒåŠæŸ¥çœ‹ä¸€äº›å¯„å­˜å™¨ï¼Œå°è¯æ˜¯å¦ä¸ä½ è¦æ‰¾çš„æ•°æ®æ˜¯å¦æœ‰å…³ã€‚</p>

<pre><code>åœ¨FinalFantasy2 çš„è¿™å®ä¾‹ä¸­, æ˜¯ç”¨è¿™æ–¹æ³•æ‰¾åˆ°ä¿®æ”¹ç‚¹
ç”¨ less å·¥å…·å»æ‰¾å¯» Money
putty / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>less FinalFantasy2.original.txt



åœ¨ less å·¥å…·å…§æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>/Money


å»å¼€å§‹æ‰¾å¯»(æŒ‰ N é”®å»ç»§ç»­æ‰¾å¯»)ï¼Œä¾¿ä¼šæ‰¾åˆ°è¿™æ®µä»£ç åƒæ˜¯è¦å­˜å‚¨é‡‘é’±æ•°æ®(SetMoney)ï¼Œ0007b218æ˜¯è¿›å…¥è¿™æ®µä»£ç çš„å¼€å§‹åœ°å€
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>__ZN14cFF2GlobalWork19sysGAMEPrm_SetMoneyEj:
0007b218 e59f300c ldr r3, [pc, #12] ; 0x7b22c
0007b21c e580120c str r1, [r0, #524]
0007b220 e1510003 cmp r1, r3
0007b224 8580320c strhi r3, [r0, #524]
0007b228 e12fff1e bx lr



é¦–å…ˆåœ¨iPhoneæˆ–iPod Touch å¼€å§‹Final Fantasy 2 ç›´è‡³æ¸¸æˆå·² ResumeåŠè¿›å…¥æ¸¸æˆã€‚


â‘  åœ¨PuTTY / Terminal æ‰¾FinalFantasy2 çš„è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å·(process id)

PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>ps ax



å¾—åˆ°
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>1115   ??  Ss     1:30.86 /var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/FinalFantasy2.app/FinalFantasy2



æ‰¾åˆ°FinalFantasy2 æ¸¸æˆç°æ—¶è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å·æ˜¯ 1115

â‘¡ ç”¨gdb è¿›å…¥è°ƒè¯•è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å·1115
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>gdb -p 1115



æ­¤æ—¶æ¸¸æˆä¼šæš‚åœï¼ŒéŸ³ä¹ä¹Ÿæš‚åœ

â‘¢ ç”¨gdb è®¾å®šæ–­ç‚¹breakpointåœ¨åå…­è¿›åˆ¶åœ°å€0x7b218

PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>break *0x7b218



â‘£ ç»§ç»­ continue æ¸¸æˆ
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>c



â‘¤ å°†Final Fantasy 2 æ¸¸æˆè¿›å…¥æˆ˜æ–—ï¼Œæˆ˜èƒœåæ¸¸æˆä¼šåœ¨åå…­è¿›åˆ¶åœ°å€0x7b218å¤„åœæ­¢

â‘¥ æš‚åœåï¼Œç¦»å¼€è¿™åˆ†æ”¯__ZN14cFF2GlobalWork19sysGAMEPrm_SetMoneyEj
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>finish



â‘¦ åæ±‡ç¼–ç°æ—¶åœ°å€ä¸Šé¢çš„ä»£ç 
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>disassem $pc-28 $pc


å¾—åˆ°
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>0x0003baac &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG 180&gt;: bl 0x78e30 &lt;_ZN14cFF2GlobalWork8InstanceEv&gt;
0x0003bab0 &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG 184&gt;: mov r4, r0
0x0003bab4 &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG 188&gt;: bl 0x78e30 &lt;_ZN14cFF2GlobalWork8InstanceEv&gt;
0x0003bab8 &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG 192&gt;: bl 0x7b230 &lt;_ZN14cFF2GlobalWork19sysGAMEPrm_GetMoneyEv&gt;
0x0003babc &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG 196&gt;: add r1, r0, r5
0x0003bac0 &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG 200&gt;: mov r0, r4
0x0003bac4 &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG 204&gt;: bl 0x7b218 &lt;_ZN14cFF2GlobalWork19sysGAMEPrm_SetMoneyEj&gt;



è¿™æ—¶ä¼šå‘ç°åœ¨_ZN14cFF2GlobalWork19sysGAMEPrm_GetMoneyEv
</code></pre>

<p>åŠ_ZN14cFF2GlobalWork19sysGAMEPrm_SetMoneyEj
ä¸­é—´0x0003babc åœ°å€çš„ä»£ç add r1, r0, r5 æ˜¯æœ€å¯ç–‘çš„</p>

<pre><code>â‘§ å–æ¶ˆæ–­ç‚¹1åŠè®¾å®šæ–°æ–­ç‚¹breakpointåœ¨åå…­è¿›åˆ¶åœ°å€0x0003babc åŠé‡æ–°ç»§ç»­continue æ¸¸æˆ
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>disable 1
break *0x3babc
c



åœ¨iPhoneæˆ–iPod TouchæŸ¥çœ‹ç°æ—¶æ¸¸æˆçš„é‡‘é’±ä¾‹å¦‚æ˜¯4888ï¼Œå°†Final Fantasy 2 æ¸¸æˆè¿›å…¥æˆ˜æ–—ï¼Œæˆ˜èƒœåæ¸¸æˆä¼šæ–°æ–­ç‚¹2åœ°å€0x3babcå¤„åœæ­¢

â‘¨ å½“æ¸¸æˆåœ¨æ–°æ–­ç‚¹2æš‚åœæ—¶æŸ¥çœ‹å¯„å­˜å™¨å°±å‘ç° r0 æ˜¯å½“æ—¶çš„é‡‘é’±ä½™é¢åŠ r5 æ˜¯æˆ˜èƒœåå¾—åˆ°çš„é‡‘é’±
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>i r $r0 $r1 $r5 $pc



â‘© å‡è®¾å·²æ‰¾åˆ°åº”ä¿®æ”¹çš„åœ°å€æ˜¯ 0003babcï¼Œä¾¿å¯ç»§ç»­ä¸‹é¢ç¬¬(8)æ­¥
</code></pre>

<p>å¼•ç”¨</p>

<p>æ–¹æ³•äºŒï¼šåœ¨ gdb æœç´¢å†…å­˜æ•°æ®å€¼åŠè®¾ç½®è§‚å¯Ÿç‚¹(watchpoint)</p>

<pre><code>æ¸¸æˆçš„æ•°æ®éƒ½ä¼šæš‚å­˜åœ¨å †(heap)å†…å­˜, äºæ¸¸æˆé€€å‡ºå‰å‚¨å­˜åœ¨ iPhone æˆ– iPod Touchçš„é—ªå­˜è®°å¿†ä½“å†…, ä¸€äº›ç»éªŒå€¼æˆ–é‡‘é’±çš„æ•°å­—æ˜¯æ¯”è¾ƒç‹¬ç‰¹ï¼Œåœ¨å†…å­˜é‡å¤å‡ºç°çš„æœºä¼šä¸å¤šï¼Œè¿™äº›å”¯ä¸€çš„æ•°å­—ä¾¿å¯ç”¨è¿™æ–¹æ³•å»è¿›è¡Œæœç´¢ã€‚

è¿™é‡Œç”¨äº† Zenonia 2 v1.0 ä½œä¾‹å­ï¼Œä¸‹é¢çš„æ¸¸æˆæˆªå›¾ä¾¿çœ‹åˆ°ç”¨ä¸€ä¸ªç‹¬ç‰¹çš„ç»éªŒå€¼æ•°å­— 672 å»å¼€å§‹è¿™æ–¹æ³•



â‘  åœ¨ PuTTY / Terminal ç”¨  ps ax  çš„æŒ‡ä»¤æ‰¾åˆ° ZENONIA2 æ¸¸æˆç°æ—¶è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å·æ˜¯ 1123

â‘¡ ä½¿ç”¨ gdb è¿›å…¥è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å· 1123
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>gdb -p 1123



æ­¤æ—¶æ¸¸æˆä¼šæš‚åœï¼ŒéŸ³ä¹ä¹Ÿæš‚åœ

â‘¢ ç”¨ gdb è¾“å…¥è¿™äº›æŒ‡ä»¤åŒ…æ‹¬ï¼Œå†…å­˜å¼€å§‹åœ°å€(0x800000)ã€ç»“æŸåœ°å€(0x880000)åŠè¦æœç´¢çš„æ•°å­—672å¦‚ä¸‹:

PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>set $x=0x800000
while(*++$x!=672 &amp;&amp; $x&lt;0x880000)
end



â‘£ è¾“å…¥ end ä¹‹åç­‰å€™æ•°åç§’ ....ï¼Œå¾…gdbå»æœç´¢è¿™æ®µå†…å­˜åœ°å€

â‘¤ gdb æœç´¢å®Œæ¯•å
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>p/x $x


å¾—åˆ°
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>$1 = 0x85e28c
</code></pre>

<p>è¿™ä»£è¡¨ gdb å·²æ‰¾åˆ°åœ¨ 0x85e28c çš„å†…å­˜åœ°å€çš„å­˜å‚¨æ•°å­—æ˜¯ 672</p>

<pre><code>PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>x/dw 0x85e28c


å¾—åˆ°ç¡®è®¤ 0x85e28c çš„å†…å­˜åœ°å€çš„å­˜å‚¨æ•°å­—æ˜¯ 672
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>0x85e28c:    672



 â‘¥ ç”¨ gdb ç»§ç»­æœç´¢
PuTTY / Terminal æ‰“ (æˆ–æŒ‰æ–¹å‘é”® â†‘ 4æ¬¡ï¼Œç„¶åå›è½¦ï¼Œå…é‡å¤è¾“å…¥)
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>while(*++$x!=672 &amp;&amp; $x&lt;0x880000)
end


å†ç­‰åå¤šç§’ï¼Œgdb æœç´¢å®Œæ¯•å
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>p/x $x


å¾—åˆ°
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>$2 = 0x880000
</code></pre>

<p>è¿™ä»£è¡¨ gdb å·²åˆ°ç»“æŸçš„åœ°å€ 0x880000ï¼Œéƒ½æ²¡æœ‰æ‰¾åˆ°ã€‚è¿™ä¹Ÿè¡¨ç¤ºæ•°å­— 672 æ˜¯å”¯ä¸€å‡ºç°åœ¨ 0x85e28c è¦æ‰¾çš„å†…å­˜èŒƒå›´å†…ã€‚</p>

<pre><code>â‘¦ ç”¨ gdb æ›´æ”¹å†…å­˜åœ°å€ 0x85e28c çš„å­˜å‚¨æ•°å­—ä¸º 1000
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>set {int}0x85e28c=1000



PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>x/dw 0x85e28c



å¾—åˆ°ç¡®è®¤å·²æˆåŠŸæ›´æ”¹æ•°å­—
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>0x85e28c:    1000



â‘§ ç»§ç»­ continue æ¸¸æˆ
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>c



â‘¨ åœ¨å›åˆ°æ¸¸æˆé‡Œé€€å‡º STATUS ç”»é¢å†è¿›å…¥ STATUSï¼Œç”»é¢å†…æ•°æ®é‡åˆ·åï¼Œç¡®è®¤å·²æˆåŠŸæ›´æ”¹ç»éªŒå€¼æ•°å­—ä¸º1000


ç•™æ„:ç”±äºæ¸¸æˆæ•°æ®åœ¨å †(heap)å†…å­˜çš„åœ°å€ä¸æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æ¯æ¬¡è¿è¡Œçš„è¿›ç¨‹éƒ½è¦å†æœç´¢æ–°çš„å†…å­˜åœ°å€ã€‚å¦å¤–ï¼Œæœç´¢çš„å†…å­˜åœ°å€èŒƒå›´ä¹Ÿä¼šæ”¹å˜ï¼Œå¦‚æœåœ¨ 0x800000 è‡³ 0x880000 èŒƒå›´å†…æ‰¾ä¸åˆ°çš„è¯ï¼Œå°±è¦å¾€åè¯• 0x880000 è‡³ 0x900000 æ–°çš„èŒƒå›´ã€‚

     å¦å¤–ï¼šç”¨ç›¸åŒæœç´¢æ–¹æ³•ä¹Ÿå¯ä»¥æ‰¾åˆ°é‡‘é’±æ•°å­—åœ¨è¿™æ¬¡è¿è¡Œè¿›ç¨‹æ˜¯åœ¨å†…å­˜åœ°å€ 0x874c04

â‘© æ‰¾åˆ°ç»éªŒå€¼åœ°å€åä¾¿å¯è®¾ç½®è§‚å¯Ÿç‚¹(watchpoint)äºå†…å­˜åœ°å€ 0x85e28c

è®¾ç½®è§‚å¯Ÿç‚¹çš„ç›®çš„æ˜¯å½“å†…å­˜åœ°å€å€¼è¢«è¯»æˆ–è¢«å†™æ—¶ï¼Œä¼šæ˜¾ç¤ºæ•°æ®åŠæš‚åœç¨‹åº

PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>watch *0x85e28c


åŠç»§ç»­æ¸¸æˆ
PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>c
</code></pre>

<p>ç•™æ„:æ¸¸æˆåœ¨è§‚å¯Ÿç‚¹(watchpoint) ç”Ÿæ•ˆä¸‹è¿è¡Œæ˜¯éå¸¸çš„æ…¢ï¼Œæœ‰äº›æ¸¸æˆæ˜¯ä¸èƒ½æ­£å¸¸è¿ä½œï¼Œæœ‰æ—¶å€™æ‰‹æœºä¹Ÿè¦é‡å¯ï¼Œæ‰€ä»¥ä¸‹é¢çš„æ­¥éª¤æ˜¯ä¸ä¸€å®šå¯ä»¥è¿›è¡Œçš„</p>

<pre><code>â‘ª å°†æ¸¸æˆè¿›å…¥æˆ˜æ–—æ‰“æ€ªåç¨‹åºä¾¿ä¼šæš‚åœåœ¨ 0x9f508 åœ°å€ï¼Œgdb ä¼šæ˜¾ç¤º
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>Hardware watchpoint 1: *8774284
Old value = 1000
New value = 1086
0x0009f508 in CMvPlayer::CheckLevelUp ()



PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>x/14i $pc-16


å¾—åˆ°
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>0x9f4f8 &lt;_ZN9CMvPlayer12CheckLevelUpEj+60&gt;:    b.n    0x9f508 &lt;_ZN9CMvPlayer12CheckLevelUpEj+76&gt;
0x9f4fa &lt;_ZN9CMvPlayer12CheckLevelUpEj+62&gt;:    adds    r0, r4, #0
0x9f4fc &lt;_ZN9CMvPlayer12CheckLevelUpEj+64&gt;:    movs    r1, #1
0x9f4fe &lt;_ZN9CMvPlayer12CheckLevelUpEj+66&gt;:    movs    r2, #0
0x9f500 &lt;_ZN9CMvPlayer12CheckLevelUpEj+68&gt;:    subs    r5, r5, r3
0x9f502 &lt;_ZN9CMvPlayer12CheckLevelUpEj+70&gt;:    bl    0x9f338 &lt;_ZN9CMvPlayer9OnLevelUpEii&gt;
0x9f506 &lt;_ZN9CMvPlayer12CheckLevelUpEj+74&gt;:    movs    r3, #1
0x9f508 &lt;_ZN9CMvPlayer12CheckLevelUpEj+76&gt;:    str    r5, [r4, r6]
0x9f50a &lt;_ZN9CMvPlayer12CheckLevelUpEj+78&gt;:    cmp    r3, #0
0x9f50c &lt;_ZN9CMvPlayer12CheckLevelUpEj+80&gt;:    beq.n    0x9f516 &lt;_ZN9CMvPlayer12CheckLevelUpEj+90&gt;
0x9f50e &lt;_ZN9CMvPlayer12CheckLevelUpEj+82&gt;:    cmp    r5, #0
0x9f510 &lt;_ZN9CMvPlayer12CheckLevelUpEj+84&gt;:    beq.n    0x9f516 &lt;_ZN9CMvPlayer12CheckLevelUpEj+90&gt;
0x9f512 &lt;_ZN9CMvPlayer12CheckLevelUpEj+86&gt;:    movs    r5, #0
0x9f514 &lt;_ZN9CMvPlayer12CheckLevelUpEj+88&gt;:    b.n    0x9f4c6 &lt;_ZN9CMvPlayer12CheckLevelUpEj+10&gt;



PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>i r $r5 $r4 $r6 $pc
p/x $r4+$r6


å¾—åˆ°
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>r5             0x43E    1086
r4             0x85DC00    8772608
r6             0x68c    1676
pc             0x9f508    652552
$5 = 0x85e28c



è¿™æ—¶ç¡®è®¤äº† 0x9f508 åœ°å€è¿™å¥ä»£ç 
str    r5, [r4, r6]
çš„æ„æ€æ˜¯ï¼Œr4 + r6 = 0x85e28c ï¼ŒæŠŠå¯„å­˜å™¨ r5 å†…çš„æ•°å­—(1086) å†™åˆ° 0x85e28c çš„åœ°å€
</code></pre>

<p>ã€€
    ç¨‹åºå› è¦å†™è¿›è¿™0x85e28c çš„åœ°å€ï¼Œæ‰€ä»¥æš‚åœäº†ï¼Œè¿™å°±æ˜¯è§‚å¯Ÿç‚¹(watchpoint) çš„å¼ºå¤§åŠŸèƒ½ã€‚</p>

<pre><code>PuTTY / Terminal æ‰“
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>bt


å¾—åˆ°
</code></pre>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>#0  0x0009f508 in CMvPlayer::CheckLevelUp ()
#1  0x0009ff2e in CMvPlayer::DoUpdate ()
#2  0x00094744 in CMvObject::Update ()
#3  0x000969cc in CMvObjectMgr::Update ()
#4  0x000662e6 in CMvGameState::UpdateGame ()



è¿™æ—¶å°±å¯æ ¹æ®ä¸Šé¢å¾—åˆ°çš„ä¿¡æ¯åœ¨è¿™æ®µä»£ç çš„å‰åèŒƒå›´è¿›è¡Œè·Ÿè¸ªã€è®¾ç½®æ–­ç‚¹åŠè¿›ä¸€æ­¥çš„åˆ†æ
</code></pre>

<p>æœ‰æ–°çš„æ–¹æ³•æ—¶ï¼Œå†ç»§ç»­æ›´æ–° &hellip;&hellip;&hellip;&hellip;</p>

<p>(iv) ä¸çŸ¥é“ä¿®æ”¹ç‚¹åœ¨é‚£åŠæ”¹ä¸ºä»€ä¹ˆï¼Ÿ</p>

<p>ä¿®æ”¹ç¨‹åºæ˜¯ä¸èƒ½æ’å…¥ç¨‹åºä»£ç ï¼Œä¸»è¦åŸå› æ˜¯ç§»ä½åçš„ç¨‹åºæ˜¯ä¸èƒ½è¿è¡Œçš„ã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯æ‰¾åˆ°è¦ä¿®æ”¹çš„ä½ç½®åœ¨åŸæ¡£æ¡ˆä½ç½®ä¿®æ”¹ä»£ç æ”¹ä¸ºä½ éœ€è¦çš„æŒ‡ä»¤ã€‚ ä¿®æ”¹ç‚¹ä¸€å®šè¦ç»è¿‡åˆ†æä»£ç åå†ä¸æ–­åœ°ç”¨åŠ¨æ€åˆ†æç¡®å®šåï¼Œåœ¨é€‚å½“çš„åœ°æ–¹é‡è¦†è¯•éªŒåŠè°ƒè¯•éªŒè¯ä¿®æ”¹åçš„ç»“æœ ã€‚</p>

<ul>
<li>ä¸€äº›RPGæ¸¸æˆçš„ç‰¹æ€§ï¼Œä¾‹å¦‚æ˜¯é‡‘é’±æˆ–ç»éªŒå€¼æ˜¯ä¼šåœ¨æˆ˜æ–—åé‡ç®—åŠæ›´æ–°ï¼Œä¸€èˆ¬éƒ½æ˜¯è¦æ‰¾åˆ°åŠä¿®æ”¹æ›´æ–°æ•°æ®å‰çš„æŒ‡ä»¤ã€‚é‡‘é’±çš„ä¿®æ”¹ç‚¹ä¹Ÿå¯ä»¥ä¿®æ”¹åœ¨ä¹°å–è£…å¤‡æ—¶çš„æŒ‡ä»¤ã€‚è¿ç»­å‡çº§çš„ä¿®æ”¹ä¸»è¦æ˜¯çœ‹è¯¥æ¸¸æˆæ˜¯æ€æ ·å‡çº§ï¼Œä¾‹å¦‚ Inotia 2æ˜¯æ ¹æ®ç»éªŒå€¼å»å‡çº§ï¼Œåªè¦æ‰¾åˆ°åˆ¤æ–­ç»éªŒå€¼çš„æŒ‡ä»¤ä»£ç åœ°å€ï¼Œä¿®æ”¹å…¶åˆ¤æ–­çš„æŒ‡ä»¤ä¾¿å¯ã€‚</li>
</ul>


<p>å¯¹äºæ¸¸æˆæ¥è¯´ï¼Œä¸€èˆ¬çš„æŒ‡ä»¤ä¿®æ”¹ä¾‹å­å¦‚ä¸‹ï¼š</p>

<p>â‘  ä¿®æ”¹å¯„å­˜å™¨çš„å¢åŠ æ•°å­—ä¾‹å¦‚
    Final Fantasy II å¢åŠ æˆ˜èƒœåæ‰€å¾—é‡‘é’±
    åœ°å€ 0003babc
    add r1, r0, r5
    æ”¹ä¸º
    add r1, r0, r5, lsl #5</p>

<p>â‘¡ ä¿®æ”¹å¯„å­˜å™¨å‡å°‘çš„æ•°å­—ä¸ºé›¶ä¾‹å¦‚
    Inotia 2 v 1.1.0 ä¸æ‰£æŠ€èƒ½ç‚¹
    åœ°å€ 00021b9c
    sub r3, #1
    æ”¹ä¸º
    sub r3, #0</p>

<pre><code>åœ°å€ 00037b46 
sub r1, #1 
æ”¹ä¸º 
sub r1, #0 
</code></pre>

<p>â‘¢ ä¿®æ”¹æ¯”è¾ƒçš„å¯„å­˜å™¨ä¾‹å¦‚
    èŠ±å„¿æœµæœµå¼€-v1.0 ä¸æ­»ä½œå¼Šç‰ˆ (è¿™é‡Œ r2 å¯„å­˜å™¨æ˜¯èŠ±æœµå·²ç»½æ”¾çš„æ•°é‡)
    åœ°å€ 00004ee8
    cmp r2, r3
    æ”¹ä¸º
    cmp r2, #1 ; 0x1</p>

<p>â‘£ ä¿®æ”¹arm 32 ä½ä¸ºä¸¤ä¸ªarm thumb 16 ä½ä»£ç ä¾‹å¦‚
    Inotia 2 v 1.1.0 rollç‚¹å…¨18
    åœ°å€ 0005c404
    bl 0x9914
    æ”¹ä¸º
    mov r0, #9
    mov r0, #9</p>

<pre><code>åœ°å€ 0005c404, 0005c40e, 0005c41c, 0005c426 
bl 0x9914 
æ”¹ä¸º 
mov r0, #9 
mov r0, #9 
</code></pre>

<p>â‘¤ è¦åˆ é™¤ä»£ç ä¾¿è¦ç”¨ nop (no operation) å–ä»£
    thumb 16 bits nop æ˜¯ 46c0<br/>
    arm 32 bits nop æ˜¯ e1a00000</p>

<p>(8) åœ¨FinalFantasy2 çš„è¿™å®ä¾‹ä¸­ï¼Œå‡è®¾å·²æ‰¾åˆ°åº”ä¿®æ”¹çš„åœ°å€æ˜¯ 0003babcï¼Œä»£ç æ˜¯ e0801005
å¤åˆ¶ä»£ç </p>

<pre><code>0003bab8        eb00fddc        bl 0x7b230
0003babc        e0801005        add r1, r0, r5   @æ„æ€æ˜¯ r1 = r0 +r5 ; r0 æ˜¯å½“æ—¶çš„é‡‘é’±ä½™é¢; r5 æ˜¯æˆ˜èƒœåå¾—åˆ°çš„é‡‘é’±
0003bac0        e1a00004        mov r0, r4
0003bac4        eb00fdd3        bl 0x7b218     @åˆ†æ”¯åˆ°å‡½æ•°å __ZN14cFF2GlobalWork19sysGAMEPrm_SetMoneyEj å»æ›´æ–°é‡‘éŒ¢ä½™é¢
</code></pre>

<p>(9) ä¿®æ”¹ç›®æ ‡ : å°†æ‰€å¾—é‡‘é’±ä¹˜å¤§32å€
0003babcçš„åº”ä¿®æ”¹ç›®æ ‡ä»£ç æ˜¯
å¤åˆ¶ä»£ç </p>

<pre><code>add r1, r0, r5, lsl#5 @æ„æ€æ˜¯ r1 = r0 +( r5 äºŒè¿›åˆ¶å·¦ç§»äº”ä½,å³åè¿›åˆ¶ä¹˜å¤§32å€)
</code></pre>

<p>(10) æ‰¾æ–°ARMæŒ‡ä»¤ä»£ç 
add r1, r0, r5 çš„ARMæŒ‡ä»¤ä»£ç æ˜¯ e0801005
ä¿®æ”¹ç›®æ ‡æ˜¯è¦æ‰¾åˆ° add r1, r0, r5, lsl#5 çš„ARMæŒ‡ä»¤ä»£ç  ?</p>

<p>ç”¨ vim æˆ– nano å»ºç«‹ armtest.s å¦‚ä¸‹
å¤åˆ¶ä»£ç </p>

<pre><code>    .file "armtest.s"
    .globl _main
    .code 32
_main:
    add r1, r0, r5
    add r1, r0, r5, lsl #5
</code></pre>

<p>ç•™æ„: ä¸€äº›ç¨‹å¼åæ±‡ç¼–åæ˜¯ARM Thumb, ARM Thumb æ˜¯16 bits è€ŒARM æ˜¯32 bits. ARM 32 bits åŠ ARM Thumb çš„åˆ†åˆ«è¯·æ‰¾ä¸Šé¢ ARM Assembler çš„å‚è€ƒ(ARM Thumb çš„å¯ç”¨æŒ‡ä»¤æ˜¯æ¯” ARM 32 bits å°‘)ã€‚ å¦‚æœè¦æ‰¾ ARM Thumb ä»£ç è¦å°†ä¸Šé¢çš„.code 32æ”¹ä¸º.code 16 åŠåŠ ä¸Š .thumb_func _main å¦‚ä¸‹
å¤åˆ¶ä»£ç </p>

<pre><code>    .code 16
    .thumb_func _main
</code></pre>

<p>æ±‡ç¼– arm æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>as armtest.s -o armtest.o ; otool -tv armtest.o
</code></pre>

<p>ä¾¿çœ‹åˆ°</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>(__TEXT,__text) section
_main:
00000000    e0801005    add r1, r0, r5
00000004    e0801285    add r1, r0, r5, lsl #5
</code></pre>

<p>åŠå¾—åˆ°add r1, r0, r5, lsl #5 ç›®æ ‡ARMæŒ‡ä»¤ä»£ç ä¸º e0801285</p>

<p>(11) å»ºç«‹ä¿®æ”¹ç¨‹å¼ç¬¬ä¸€ç‰ˆFinalFantasy2.v1åŠç”¨åå…­è¿›åˆ¶ä¿®æ”¹å™¨ä¿®æ”¹ä»£ç </p>

<p>æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>cp -p FinalFantasy2.original FinalFantasy2.v1      
vbindiff FinalFantasy2.v1
</code></pre>

<p>è¿›å…¥vibindiff åæŒ‰GåŠè¾“å…¥åœ°å€3AABCè·³åˆ°è¦ä¿®æ”¹çš„ä½ç½®å¦‚ä¸‹</p>

<p>ç•™æ„: åœ¨ç¬¬8æ­¥æ—¶æ‰¾åˆ°çš„ä½ç½®æ˜¯0003Babcï¼Œä½†ä¿®æ”¹ç¨‹å¼çš„ä½ç½®è¦å‡å»åå…­è¿›åˆ¶0x1000å¾—åˆ°3Aabc
(0x3babc å‡ 0x1000 ç­‰äº 0x3aabc)</p>

<p>æŒ‰Eé”®å¼€å§‹ä¿®æ”¹ï¼Œå°†
05 10 80 E0
æ”¹ä¸º
85 12 80 E0</p>

<p>ç„¶åæŒ‰Escé”®åŠYé”®ç¡®è®¤ä¿®æ”¹</p>

<p>æœ€åæŒ‰Qé”®ç¦»å¼€ vbindiff ä¿®æ”¹å™¨</p>

<p>å¦‚ä¸‹</p>

<p>ç•™æ„: ä¿®æ”¹å™¨æ˜¾ç¤ºçš„05 10 80 E0ä¸åæ±‡ç¼–çš„ä»£ç e0801005çš„ä½ç½®é¡ºåºæ˜¯å€’çš„</p>

<p>(12) åæ±‡ç¼–ä¿®æ”¹ç¨‹å¼ç¬¬ä¸€ç‰ˆ v1 åŠæ¯”è¾ƒåŸç‰ˆæœ¬ original
æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>otool -tv FinalFantasy2.v1 &gt; FinalFantasy2.v1.txt
diff FinalFantasy2.original.txt FinalFantasy2.v1.txt
</code></pre>

<p>ä¹Ÿå¯ä»¥ç”¨ otool -otV</p>

<p>å¾—åˆ°</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>&lt; FinalFantasy2.original:
---
&gt; FinalFantasy2.v1:
59597c59597
&lt; 0003babc    e0801005    add    r1, r0, r5
---
&gt; 0003babc    e0801285    add    r1, r0, r5, lsl #5
</code></pre>

<p>(13) å¯¹ä¿®æ”¹ç¨‹å¼ç¬¬ä¸€ç‰ˆé‡æ–°ç­¾å
æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>ldid -s FinalFantasy2.v1
</code></pre>

<p>(14) å°†ç­¾ååçš„ç¨‹å¼æ”¾å›ç¨‹å¼è·¯å¾„è¿›è¡Œæµ‹è¯•
é¦–å…ˆå¤‡ä»½åŸç¨‹å¼(ç•™æ„:è¦ç”¨mvç§»åŠ¨ä¸è¦ç”¨cp)
æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>mv ../FinalFantasy2.app/FinalFantasy2 ../FinalFantasy2.app/FinalFantasy2.bak
</code></pre>

<p>å®‰è£…ä¿®æ”¹åçš„ç¨‹å¼åŠæ›´æ–°æƒé™
æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>cp -p FinalFantasy2.v1 ../FinalFantasy2.app/FinalFantasy2
chown mobile:mobile ../FinalFantasy2.app/FinalFantasy2
chmod 0755 ../FinalFantasy2.app/FinalFantasy2
</code></pre>

<p>(15) ç”¨ gdb è°ƒè¯•æ¸¸æˆ</p>

<p>è°ƒè¯•æ˜¯ç”¨ gdbï¼Œåœ¨è¿™é‡Œçš„ç›®çš„æ˜¯è®¾ç½®æ–­ç‚¹ä½¿æ¸¸æˆæš‚åœï¼ŒæŸ¥çœ‹CPUçš„å¯„å­˜å™¨ï¼Œå°è¯ä¿®æ”¹æ˜¯å¦æˆåŠŸã€‚ç”±äºæ¸¸æˆå ç”¨å¾ˆå¤šå†…å­˜ï¼Œåœ¨æ¸¸æˆè¿è¡Œæ—¶è°ƒè¯•å†åŠ ssh è¿æ¥å¾ˆå¤šæ—¶å€™éƒ½ä¼šå´©æºƒã€‚æ‰€ä»¥ç”¨ iPod Touch 3ä»£ æˆ– iPhone 3GS åšè¿™é¡¹å·¥ä½œä¼šæœ‰ä¼˜åŠ¿ã€‚</p>

<p>é¦–å…ˆåœ¨iPhoneæˆ–iPod Touch å¼€å§‹Final Fantasy 2 ç›´è‡³æ¸¸æˆå·²ResumeåŠè¿›å…¥æ¸¸æˆã€‚</p>

<p>åœ¨iPhoneæˆ–iPod TouchæŸ¥çœ‹ç°æ—¶æ¸¸æˆçš„é‡‘é’±ä¾‹å¦‚æ˜¯ 7223</p>

<p>â‘  åœ¨putty / Terminal æ‰¾ FinalFantasy2 çš„è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å· (process id)</p>

<p>PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>ps ax
</code></pre>

<p>å¾—åˆ°</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>1115   ??  Ss     1:30.86 /var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/FinalFantasy2.app/FinalFantasy2
</code></pre>

<p>æ‰¾åˆ° FinalFantasy2 æ¸¸æˆç°æ—¶è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å·æ˜¯ 1115</p>

<p>â‘¡ ç”¨ gdb è¿›å…¥è°ƒè¯•è¿è¡Œä¸­çš„è¿›ç¨‹ç¼–å· 1115
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>gdb -p 1115
</code></pre>

<p>æ­¤æ—¶æ¸¸æˆä¼šæš‚åœï¼ŒéŸ³ä¹ä¹Ÿæš‚åœ</p>

<p>â‘¢ ç”¨ gdb è®¾å®šæ–­ç‚¹breakpointåœ¨åå…­è¿›åˆ¶åœ°å€ 0x3babc (å³åœ¨ç¬¬8æ­¥æ—¶æ‰¾åˆ°çš„ä½ç½®0003babc)
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>break *0x3babc
</code></pre>

<p>â‘£ ç»§ç»­ continue æ¸¸æˆ
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>c
</code></pre>

<p>â‘¤ å°†Final Fantasy 2 æ¸¸æˆè¿›å…¥æˆ˜æ–—ï¼Œæˆ˜èƒœåæ¸¸æˆä¼šåœ¨åå…­è¿›åˆ¶åœ°å€ 0x3babcå¤„åœæ­¢</p>

<p>â‘¥ æš‚åœåï¼ŒæŸ¥çœ‹ CPU å¯„å­˜å™¨ register (info register æŒ‡ä»¤)
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>i r $r0 $r1 $r5 $pc
</code></pre>

<p>å¾—åˆ°</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>r0             0x1c37    7223
r1             0x25    37
r5             0x25    37
pc             0x3babc    244412
</code></pre>

<p>å°è¯äº† r0=7223 æ˜¯ç°æ—¶çš„é‡‘é’±
æ¸¸æˆæš‚åœåœ¨ pc=0x3babc</p>

<p>â‘¦ æŸ¥çœ‹ä¸‹ä¸€æ­¥å°†è¦è¿è¡Œçš„åæ±‡ç¼–æŒ‡ä»¤
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>x/i $pc
</code></pre>

<p>å¾—åˆ° add r1, r0, r5, lsl #5ï¼Œå°è¯æˆåŠŸä¿®æ”¹æŒ‡ä»¤</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>0x3babc &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG+196&gt;:    add    r1, r0, r5, lsl #5
</code></pre>

<p>â‘§ è¿è¡Œä¸‹ä¸€æ­¥ stepi æŒ‡ä»¤
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>si
</code></pre>

<p>æŸ¥çœ‹ CPU å¯„å­˜å™¨ register (info register æŒ‡ä»¤)
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>i r $r0 $r1 $r5 $pc
</code></pre>

<p>å¾—åˆ°
å¤åˆ¶ä»£ç </p>

<pre><code>r0             0x1c37    7223
r1             0x20d7    8407
r5             0x25    37
pc             0x3bac0    244416
</code></pre>

<p>æ­¤æ—¶å°è¯äº† r1 = r0 +( r5 x 32)
            = 7223 + (27 x 32)
            = 8407</p>

<p>æŸ¥çœ‹ä¸‹ä¸€æ­¥å°†è¦è¿è¡Œçš„åæ±‡ç¼–æŒ‡ä»¤
putty / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>x/i $pc
</code></pre>

<p>å¾—åˆ°</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>0x3bac0 &lt;_ZN10FF2cBattle12SENRIHIN_CHKEP12thBATMonsterP6X86REG+200&gt;:    mov    r0, r4
</code></pre>

<p>â‘¨ ç»§ç»­ continue æ¸¸æˆ
PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>c
</code></pre>

<p>â‘© Final Fantasy 2 æ¸¸æˆæ˜¾ç¤ºæˆ˜èƒœåå¾—åˆ°37çš„é‡‘é’±ï¼Œä½†å®é™…é‡‘é’±ä½™é¢æ˜¯ 8407ï¼Œå°è¯ä¿®æ”¹æ¸¸æˆå·²æˆåŠŸã€‚</p>

<p>â‘ª ç¦»å¼€ gdb</p>

<p>æŒ‰ä¸‹Ctrl+C ç»„åˆé”®åœæ­¢æ‰§è¡Œè¿›ç¨‹</p>

<p>PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>quit
</code></pre>

<p>åŠæŒ‰ y é”®ç¡®è®¤ç¦»å¼€ gdb</p>

<p>ç•™æ„:åœ¨ä¸Šé¢ç¬¬â‘¥æ­¥æš‚åœæ—¶ï¼Œä½ å¯ä»¥è¾“å…¥æŒ‡ä»¤å»æ›´æ”¹CPU å¯„å­˜å™¨ register
ä¾‹å¦‚æ‰“
set $r5=1000
å»è¯•è¯•å¢åŠ é‡‘é’±æ•°ç›®</p>

<p>(16) å‡è®¾å·²è°ƒè¯•å®Œæˆï¼Œä¾¿å¯å°†ä¿®æ”¹åçš„ç¨‹å¼æ‰“åŒ…å‘å¸ƒ</p>

<p>è¿›å…¥æ¸¸æˆè·¯å¾„ç›®å½•å†…ï¼Œæ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>cd /var/mobile/Applications/*/FinalFantasy2.app
</code></pre>

<p>åˆ°ä¸Šä¸€å±‚è·¯å¾„ç›®å½•
å¤åˆ¶ä»£ç </p>

<pre><code>cd ..
</code></pre>

<p>å»ºç«‹ IPA æ‰€è¦çš„è·¯å¾„åŠæ¡£æ¡ˆåŠåˆ é™¤ä¸éœ€è¦çš„å¤‡ä»½æ¡£æ¡ˆ</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>rm -fr Payload
mkdir -p Payload
cp -pr FinalFantasy2.app Payload/
rm -fr Payload/FinalFantasy2.app/FinalFantasy2*.bak
</code></pre>

<p>æ‰“åŒ… ipa ä¸º FinalFantasy2_v1.ipod4g.ipa
å¤åˆ¶ä»£ç </p>

<pre><code>zip -r FinalFantasy2_v1.ipod4g.ipa Payload iTunesArtwork
</code></pre>

<p>æ‰¾ç°æ—¶çš„è·¯å¾„
å¤åˆ¶ä»£ç </p>

<pre><code>pwd
</code></pre>

<p>å¾—åˆ°</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>/var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
</code></pre>

<p>ç”¨ winscp æˆ–Terminal çš„ scp æŒ‡ä»¤ä¼ é€è¿™æ¡£ä½œå‘å¸ƒ</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>/var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/FinalFantasy2_v1.ipod4g.ipa
</code></pre>

<p>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX æ˜¯éšæœºè·¯å¾„</p>

<p>(17) å…¶ä»–æœ‰ç”¨çš„æŠ€å·§</p>

<p>â‘  ç”±äºä¿®æ”¹æ¸¸æˆçš„ç¨‹å¼ä»£ç æ˜¯å¾ˆå°‘é‡, ç›¸å¯¹é‡è¦†è°ƒè¯•åŠåŠ¨æ€åˆ†æå·¥ä½œæ¯”è¾ƒå¤šï¼Œæ­¤æ•™ç¨‹ä¾¿ä»‹ç»äº†ç”¨iPhone çš„å·¥å…·ç›´æ¥åšä¿®æ”¹åŠåæ±‡ç¼–ã€‚è¿™æ ·å¯¹äºå°‘é‡ä¿®æ”¹ç¨‹å¼ä»£ç åŠé‡è¦†åœ¨iPhoneè°ƒè¯•æ˜¯æ¯”è¾ƒè¦ä¼ å›PCåšä¿®æ”¹æ˜¯æ›´æœ‰æ•ˆç‡çš„ã€‚</p>

<p>â‘¡ è°ƒè¯•çš„å·¥å…· gdb æ˜¯æ¯”è¾ƒéš¾ç”¨ï¼Œä½†æœ‰äº›æ–¹æ³•æ˜¯å¯æé«˜ä½¿ç”¨ gdb çš„æ•ˆç‡ã€‚</p>

<p>ä¾‹å¦‚ï¼šåœ¨ gdb å»ºç«‹å® macro define
åœ¨ iphone å»ºç«‹è¿™æ¡£æ¡ˆ(~/.gdbinit) å†…å®¹ä¸º
å¤åˆ¶ä»£ç </p>

<pre><code>define ascii_char
set $_c=*(unsigned char *)($arg0)
if ( $_c &lt; 0x20 || $_c &gt; 0x7E )
printf "."
else
printf "%c", $_c
end
end
document ascii_char
Print the ASCII value of arg0 or '.' if value is unprintable
end
define hex_quad
printf "%02X %02X %02X %02X  %02X %02X %02X %02X",  \
*(unsigned char*)($arg0), *(unsigned char*)($arg0 + 1),  \
*(unsigned char*)($arg0 + 2), *(unsigned char*)($arg0 + 3), \
*(unsigned char*)($arg0 + 4), *(unsigned char*)($arg0 + 5), \
*(unsigned char*)($arg0 + 6), *(unsigned char*)($arg0 + 7)
end
document hex_quad
Print eight hexadecimal bytes starting at arg0
end
define hexdump
printf "%08X : ", $arg0
hex_quad $arg0
printf " - "
hex_quad ($arg0+8)
printf " "
ascii_char ($arg0)
ascii_char ($arg0+1)
ascii_char ($arg0+2)
ascii_char ($arg0+3)
ascii_char ($arg0+4)
ascii_char ($arg0+5)
ascii_char ($arg0+6)
ascii_char ($arg0+7)
ascii_char ($arg0+8)
ascii_char ($arg0+9)
ascii_char ($arg0+0xA)
ascii_char ($arg0+0xB)
ascii_char ($arg0+0xC)
ascii_char ($arg0+0xD)
ascii_char ($arg0+0xE)
ascii_char ($arg0+0xF)
printf "\n"
end
document hexdump
Display a 16-byte hex/ASCII dump of arg0
end
define hexdump1
hexdump $arg0
x/8h $arg0
printf "\n"
disassem $arg0 $arg0+16
printf "\n"
end
document hexdump1
Display a 16-byte hex/ASCII dump and disassembly of arg0
end
</code></pre>

<p>åœ¨ç”¨ gdb è°ƒè¯•æ—¶æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>hexdump1 $pc
</code></pre>

<p>ä¾¿å¯åˆ—å‡º$pcä½ç½®ååå…­ä½çš„å†…å®¹åŠåæ±‡ç¼–çš„ä»£ç </p>

<p>â‘¢ åœ¨æ–­ç‚¹è®¾å®šä¸€äº›è¦è‡ªåŠ¨è¿è¡Œçš„æŒ‡ä»¤</p>

<p>ä¸‹é¢çš„æ„æ€æ˜¯å»ºç«‹æ–­ç‚¹ï¼‘
åŠåœ¨æ–­ç‚¹ï¼‘åœæ­¢æ—¶è¿è¡ŒæŸ¥çœ‹ä¸€äº›æš‚å­˜å™¨(i r $r0 $r1 $r5 $pc)åŠåæ±‡ç¼–ä¸‹å››ä¸ªæŒ‡ä»¤ä»£ç (x/4i $pc)</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>break *0x3babc
commands 1
i r $r0 $r1 $r5 $pc
x/4i $pc
end
</code></pre>

<p>â‘£ åœ¨ gdb æ–­ç‚¹æš‚åœæ—¶ï¼Œæ˜¯å¯æ”¹å˜å†…å­˜åŠæŒ‡ä»¤
FinalFantasy2 çš„ä¾‹å­ï¼Œ0x0003babcåœ°å€çš„æŒ‡ä»¤æ˜¯
æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>x/i 0x0003babc
</code></pre>

<p>å¾—åˆ°ä»£ç æ˜¯
å¤åˆ¶ä»£ç </p>

<pre><code>add r1, r0, r5
</code></pre>

<p>æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>x/xw 0x0003babc
</code></pre>

<p>å¾—åˆ°ä»£ç æ•°å€¼æ˜¯
å¤åˆ¶ä»£ç </p>

<pre><code>0xe0801005
</code></pre>

<p>æ”¹å˜æŒ‡ä»¤ä»£ç æ•°å€¼æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>set {int}0x0003babc = 0xe0801285
</code></pre>

<p>æ£€æŸ¥æ”¹å˜åçš„æŒ‡ä»¤æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>x/i 0x0003babc
</code></pre>

<p>å¾—åˆ°æ”¹å˜åçš„æŒ‡ä»¤ä»£ç æ˜¯
å¤åˆ¶ä»£ç </p>

<pre><code>add r1, r0, r5, lsl #5
</code></pre>

<p>è¿™æ ·å°±ä¸ç”¨ç¦»å¼€ gdb å³æ—¶çœ‹åˆ°ä¿®æ”¹ä»£ç åçš„æ•ˆæœ</p>

<p>â‘¤ gdb æ‰§è¡Œåˆ°ç¨‹åºä¸­å…¶ä»–åœ°å€çš„å‘½ä»¤</p>

<pre><code>ä¾‹å­ï¼š
stepi                           å•æ­¥æ‰§è¡Œä¸€ä¸ªæœºå™¨æŒ‡ä»¤(å‘½ä»¤æ­¥å…¥å‡½æ•°)
nexti                           å•æ­¥æ‰§è¡Œä¸€ä¸ªæœºå™¨æŒ‡ä»¤(å‘½ä»¤æ­¥è¿‡å‡½æ•°)
nexti 2                        ç»§ç»­æ‰§è¡Œæœºå™¨æŒ‡ä»¤çš„æ•°ç›®ä¸º 2 ä¸ªæŒ‡ä»¤
finish                          ç»§ç»­æ‰§è¡Œè‡³å½“å‰å‡½æ•°ç»“æŸåï¼Œåœæ­¢äºå…¶è°ƒç”¨ç‚¹
until *0x7b224            ç»§ç»­æ‰§è¡Œè‡³ç‰¹å®šåœ°å€*0x7b224
jump *0x3baac           è·³è½¬è‡³ç‰¹å®šåœ°å€*0x3baac æ‰§è¡Œ
</code></pre>

<p>â‘¥ gdb è°ƒè¯•è®°å½•çš„å‘½ä»¤</p>

<pre><code>ä¾‹å­ï¼š
set logging file ./log1.txt      è®¾å®šè®°å½•æ¡£
set logging on                     å¼€å§‹è®°å½•
set logging off                     åœæ­¢è®°å½•
</code></pre>

<p>â‘¦ å­¦ä¹ åˆ«äººä¿®æ”¹ç¨‹åºçš„æ–¹æ³•
çœ‹åˆ«äººä¿®æ”¹ç¨‹åºæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹æ³•ï¼Œåªè¦ä½ æœ‰åŸç‰ˆæœ¬åŠä¿®æ”¹åçš„ç‰ˆæœ¬ï¼Œå°±å¯ä»¥çŸ¥é“ä¿®æ”¹çš„åœ°å€åŠæ–¹æ³•
ä¾‹å¦‚ï¼š
ä¸‹è½½èŠ±å„¿æœµæœµå¼€-v1.0.rar åŸç‰ˆæœ¬</p>

<p>ä¸‹è½½èŠ±å„¿æœµæœµå¼€-v1.0.rar ä¸æ­»ä½œå¼Šä¿®æ”¹ç‰ˆ</p>

<p>è§£å‹åå°†ä¸¤ä¸ª ipa æ–‡ä»¶ï¼Œç”¨ winscp ä¼ åˆ°iPhone è·¯å¾„ /var/root/flower å†…</p>

<p>åœ¨ PuTTY / Terminal è¿æ¥iPhone / iPod Touchå</p>

<p>æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>cd /var/root/flower
</code></pre>

<p>è§£å‹åŸæ¸¸æˆç‰ˆæœ¬ç¨‹åº
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>unzip *-v1.0.ipa
mv Payload/FlowerChainCN.app/FlowerChainCN FlowerChainCN.original
</code></pre>

<p>åˆ é™¤ä¸éœ€è¦çš„çš„è·¯å¾„åŠæ¡£æ¡ˆ
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>rm -fr Payload/ iTunesArtwork *.ipa
</code></pre>

<p>è§£å‹ä¸æ­»ä½œå¼Šä¿®æ”¹ç‰ˆç¨‹åº
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>unzip *-v1.0.ipod4g.ipa
mv Payload/FlowerChainCN.app/FlowerChainCN FlowerChainCN.patched
</code></pre>

<p>åˆ é™¤ä¸éœ€è¦çš„çš„è·¯å¾„åŠæ¡£æ¡ˆ
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>rm -fr Payload/ iTunesArtwork *.ipa
</code></pre>

<p>åæ±‡ç¼–åŸæ¸¸æˆç¨‹å¼åŠä¿å­˜åæ±‡ç¼–æ–‡æœ¬æ–‡ä»¶ä¸º FlowerChainCN.original.txt
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>otool -tv FlowerChainCN.original &gt; FlowerChainCN.original.txt
</code></pre>

<p>åæ±‡ç¼–ä¸æ­»ä½œå¼Šä¿®æ”¹ç‰ˆç¨‹å¼åŠä¿å­˜åæ±‡ç¼–æ–‡æœ¬æ–‡ä»¶ä¸º FlowerChainCN.patched.txt
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>otool -tv FlowerChainCN.patched &gt; FlowerChainCN.patched.txt
</code></pre>

<p>æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬åŠæ‰¾å‡ºå·®å¼‚
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>diff FlowerChainCN.original.txt FlowerChainCN.patched.txt
</code></pre>

<p>å¾—åˆ°
å¤åˆ¶ä»£ç </p>

<pre><code>&lt; FlowerChainCN.original:
---
&gt; FlowerChainCN.patched:
3060c3060
&lt; 00004ee8 e1520003 cmp r2, r3
---
&gt; 00004ee8 e3520001 cmp r2, #1 ; 0x1
</code></pre>

<p>åŸç‰ˆæœ¬åˆ—åœ¨å·¦è¾¹åŠæŠŠå·®å¼‚åˆ—åœ¨å³è¾¹å¹¶è¾“å‡ºå·®å¼‚æ–‡æœ¬ä¿å­˜ä¸º FlowerChainCN.diff.txt
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>diff -y --left-column FlowerChainCN.original.txt FlowerChainCN.patched.txt &gt; FlowerChainCN.diff.txt
</code></pre>

<p>ç”¨ less å·¥å…·æ‰“å¼€å·®å¼‚æ–‡æœ¬ FlowerChainCN.diff.txt
åœ¨ PuTTY / Terminal æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>less FlowerChainCN.diff.txt
</code></pre>

<p>åœ¨ less å·¥å…·å†…æœå¯»å·®å¼‚åˆ†éš”å­—ç¬¦ |
åœ¨ less å·¥å…·å†…æ‰“
å¤åˆ¶ä»£ç </p>

<pre><code>/\|
</code></pre>

<p>å¾—åˆ°ä¸‹é¢å·®å¼‚çš„æ˜¾ç¤ºå»åšè¿›ä¸€æ­¥åˆ†æ
å¤åˆ¶ä»£ç </p>

<pre><code>00004ee8 e1520003 cmp r2, r3 | 00004ee8 e3520001 cmp r2, #1 ; 0x1
</code></pre>

<p>åœ¨ PuTTY / Terminal æ‰“è¿™å¥ä¹Ÿå¯çœ‹åˆ°åŸç‰ˆæœ¬ä¸Šä¸‹çš„ä»£ç 
å¤åˆ¶ä»£ç </p>

<pre><code>grep -C5 '|' FlowerChainCN.diff.txt
</code></pre>

<p>æˆ–
å¤åˆ¶ä»£ç </p>

<pre><code>grep -C5 00004ee8  FlowerChainCN.original.txt
</code></pre>

<p>â‘§ æœ€åé€ä¸Šæˆ‘è‡ªè´­ç ´è§£çš„ä¸€ä¸ªå¾ˆå®ç”¨çš„iPhoneå°å·¥å…· - 64ä½è®¡ç®—å™¨
è¿™å°å·¥å…·é™¤äº†å¯ä»¥åš64ä½çš„è®¡ç®—å¤–ï¼Œè¿˜å¯ä»¥è¾“å…¥æ–‡å­—åŠæ˜¾ç¤ºUnicodeçš„ä»£ç </p>

<pre><code>64 Bit Calculator

 64_Bit_Calc-v1.2.ipod4g.ipa (788 K) ä¸‹è½½æ¬¡æ•°:233 




64 Bit Calculator (iPad)   64_Bit_Calc_iPad-v1.2.ipa (1521 K) ä¸‹è½½æ¬¡æ•°:116 
</code></pre>

<p>å…³äº FinalFantasy2 1.0.4 ç‰ˆæœ¬ ldid ç­¾åæ—¶å‡ºç°é”™è¯¯ä¿¡æ¯ Segmentation fault</p>

<p>åˆä»£ iPhone ä½¿ç”¨ARMv6 æŒ‡ä»¤é›†, ç›´åˆ°3GS, iPad, IPhone 4è®¾å¤‡è‹¹æœå¼€å§‹é‡‡ç”¨äº† ARMv7 æŒ‡ä»¤é›†</p>

<p>å¦‚æœä½ æ‰“æŒ‡ä»¤</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>otool -f FinalFantasy2
</code></pre>

<p>å°±ä¼šçœ‹åˆ°</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>architecture 0
    cputype 12
    cpusubtype 6
architecture 1
    cputype 12
    cpusubtype 9
</code></pre>

<p>ä½ å¯ä»¥æŠŠ FinalFantasy2 åˆ‡å¼€ä¸º FinalFantasy2V6</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>lipo -thin armv6  FinalFantasy2 -output FinalFantasy2V6
chmod +x FinalFantasy2V6
chown mobile:mobile FinalFantasy2V6
</code></pre>

<p>åŠåˆ‡å¼€ä¸º FinalFantasy2V7</p>

<p>å¤åˆ¶ä»£ç </p>

<pre><code>cp -p FinalFantasy2 FinalFantasy2tmp
echo -ne "\x09" | dd bs=1 seek=15 conv=notrunc status=noxfer of=FinalFantasy2tmp
echo -ne "\x06" | dd bs=1 seek=35 conv=notrunc status=noxfer of=FinalFantasy2tmp
lipo -thin armv6 FinalFantasy2tmp -output FinalFantasy2V7
rm FinalFantasy2tmp
chmod +x FinalFantasy2V7
chown mobile:mobile FinalFantasy2V7
</code></pre>

<p>ä½† iPhone çš„ otool ä¸æ”¯æŒåæ±‡ç¼– ARMv7 æŒ‡ä»¤é›†, ä½ è¦ç”¨æ–°ç‰ˆæœ¬çš„ IDA Pro åæ±‡ç¼–</p>

<p>åœ¨ iPhone ä½ åªå¯ä»¥åæ±‡ç¼– FinalFantasy2V6, ä¿®æ”¹åŠç”¨ ldid å»ç­¾å</p>

<p>FinalFantasy2V6 ç­¾ååä¾¿å¯æ›¿ä»£åŸç‰ˆæœ¬ä½¿ç”¨, æ¸¸æˆæ¥è¯´ARMv6 æŒ‡ä»¤é›†ä¹Ÿå¯ä»¥, åªä¸è¿‡åœ¨æ–°çš„è®¾å¤‡ä¸Šä½¿ç”¨æ—¶ä¸æ˜¯æœ€ä¼˜åŒ–.</p>

<p>.</p>

<hr />

<pre><code>Q Qï¼š2211523682/790806573

å¾®ä¿¡ï¼š18370997821/13148454507

å¾®åšWB:http://weibo.com/u/3288975567?is_hot=1

gitåšæ–‡ï¼šhttp://al1020119.github.io/

githubï¼šhttps://github.com/al1020119
</code></pre>

<p><img src="/images/iCocosCoder.jpg" title="Caption" ></p>

<p><img src="/images/iCocosPublic.jpg" title="Caption" ></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">iCocos</span></span>

      




<time class='entry-date' datetime='2016-03-30T13:32:08+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>1:32 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/reverse/'>reverse</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/03/28/huoqushoujiduanxintongxunlulianxiren/" title="Previous Post: è·å–çŸ­ä¿¡-è”ç³»äºº">&laquo; è·å–çŸ­ä¿¡-è”ç³»äºº</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/04/05/fei6sshixian3dtouch/" title="Next Post: é6S-å®ç°3D Touch">é6S-å®ç°3D Touch &raquo;</a>
      
    </p>
  </footer>
</article>



  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title="æ¸¸æˆåç¼–è¯‘"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"icocoscao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END --></div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
    <h1>æ–‡ç« åˆ†ç±»</h1>
    <ul id="categories">
        <li class='category'><a href='/blog/categories/algorithms/'>algorithms (6)</a></li>
<li class='category'><a href='/blog/categories/and/'>and (14)</a></li>
<li class='category'><a href='/blog/categories/apples/'>apples (2)</a></li>
<li class='category'><a href='/blog/categories/application/'>application (1)</a></li>
<li class='category'><a href='/blog/categories/architecture/'>architecture (2)</a></li>
<li class='category'><a href='/blog/categories/audio/'>audio (8)</a></li>
<li class='category'><a href='/blog/categories/audio-video/'>audio-video (1)</a></li>
<li class='category'><a href='/blog/categories/data/'>data (6)</a></li>
<li class='category'><a href='/blog/categories/developer/'>developer (16)</a></li>
<li class='category'><a href='/blog/categories/foundation/'>foundation (31)</a></li>
<li class='category'><a href='/blog/categories/full/'>full (13)</a></li>
<li class='category'><a href='/blog/categories/low-level/'>low-level (4)</a></li>
<li class='category'><a href='/blog/categories/lve/'>lve (8)</a></li>
<li class='category'><a href='/blog/categories/news/'>news (4)</a></li>
<li class='category'><a href='/blog/categories/others/'>others (1)</a></li>
<li class='category'><a href='/blog/categories/performance/'>performance (12)</a></li>
<li class='category'><a href='/blog/categories/practical/'>practical (1)</a></li>
<li class='category'><a href='/blog/categories/radio/'>radio (8)</a></li>
<li class='category'><a href='/blog/categories/reverse/'>reverse (25)</a></li>
<li class='category'><a href='/blog/categories/senior/'>senior (40)</a></li>
<li class='category'><a href='/blog/categories/stack/'>stack (13)</a></li>
<li class='category'><a href='/blog/categories/structures/'>structures (6)</a></li>
<li class='category'><a href='/blog/categories/summarize/'>summarize (5)</a></li>
<li class='category'><a href='/blog/categories/tools/'>tools (5)</a></li>
<li class='category'><a href='/blog/categories/video/'>video (8)</a></li>

    </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/12/01/wan-zhuan-thinkphp-5-dot-star/">å®Œè™ThinkPHP 5.* è¿œä¸æ­¢è¿™äº›ğŸ˜±ğŸ˜‚</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/11/13/wan-nue-yiicong-zhe-li-kai-shi/">å®Œè™Yiiä»è¿™é‡Œå¼€å§‹ğŸ˜±ğŸ˜‚</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/20/apptai-pang-liao-jian-fei/">Appå¤ªèƒ–äº†â€”â€”å‡è‚¥ğŸ˜‚</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/16/ioskai-fa-chang-yong-gong-neng-dai-ma-ji-jin-(you-xiu-pian-)/">iOSå¼€å‘â€”â€”å¸¸ç”¨åŠŸèƒ½ä»£ç é›†é”¦ï¼ˆå‹ç§€ç¯‡ï¼‰</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/14/ioszhuang-bi-pian-xiang-ying-shi-bian-cheng/">iOSè£…é€¼ç¯‡â€”â€”å“åº”å¼ç¼–ç¨‹</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/al1020119">@al1020119</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'al1020119',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





<section>
<h1>åšå®¢<abbr title="The word 'åšå®¢' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'åšå®¢', not for image.">&trade;</abbr></h1>
<a href="http://al1020119.github.io/blog/2016/03/30/youxifanbianyi/"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=http://al1020119.github.io/blog/2016/03/30/youxifanbianyi/" alt="post-qrcode"></a></section>


<section>
<h1>github<abbr title="The word 'github' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'github', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosgithub.png" alt="post-qrcode"></a></section>


<section>
<h1>å¾®ä¿¡<abbr title="The word 'å¾®ä¿¡' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å¾®ä¿¡', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosWX.png" alt="post-qrcode"></a></section>


<section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocosMGC.png" alt="post-qrcode"></a><section>
  
  
</section>
<h1>å…¬ä¼—å·<abbr title="The word 'å…¬ä¼—å·' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'å…¬ä¼—å·', not for image.">&trade;</abbr></h1>
<a><img src="/images/iCocos520.png" alt="post-qrcode"></a></section>
<section>
    <h1>è®¿å®¢ç»Ÿè®¡</h1>
    <br/>
    <a href="http://s07.flagcounter.com/more/2SH"><img src="http://s07.flagcounter.com/count/2SH/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
</section><section>
    <h1>æ–°æµªå¾®åš</h1>
    <ul id="weibo">
        <li>
            
            <!-- åœ¨æ­¤æ’å…¥è·å¾—çš„å¾®åšç§€ä»£ç  -->
            <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3288975567&verifier=20ffcedd&dpc=1"></iframe>
            
        </li>
    </ul>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - iCocos -
<span class="credit">welcome to <a href="http://al1020119.github.io">æ›¹#é»</a></span>
</p>

</footer>
  






<!--
-->



</body>
</html>
