
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>iOSæ¢¦å·¥å‚</title>
  <meta name="author" content="iCocos">

  
  <meta name="description" content="ã€€ã€€æœ¬æ–‡è°ƒç ”Xcodeçš„ç‰ˆæœ¬æ˜¯ 7.1ï¼ŒåŸºæœ¬æ˜¯æ¢ç´¢äº†èœå•çš„æ¯ä¸€ä¸ªæŒ‰é’®ã€‚è™½ç„¶ä»xcode4ä¸€ç›´ç”¨åˆ°äº†xcode7ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½åªæ˜¯ç”¨äº†ä¸€äº›åŸºç¡€çš„åŠŸèƒ½ï¼Œè¯´æ¥ä¹Ÿæƒ­æ„§ã€‚åœ¨ä¸€æ¬¡å¶ç„¶çš„æœºé‡çªç„¶å‘ç°äº†â€œæ˜¾ç¤ºè°ƒç”¨å±‚çº§â€çš„é€‰é¡¹æ‰çŸ¥é“èœå•äº†çš„æŒ‰é’®å¹¶ä¸éƒ½æ˜¯æ²¡æœ‰ç”¨ï¼Œè€Œæ˜¯å¾ˆæœ‰ç”¨åªæ˜¯ä½ ä¸çŸ¥é“ç½¢äº†ã€‚ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://al1020119.github.io/posts/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iOSæ¢¦å·¥å‚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script>
function addBlankTargetForLinks () {
    $('a[href^="http"]').each(function(){
                              $(this).attr('target', '_blank');
                              });
}
$(document).bind('DOMNodeInserted', function(event) {
             addBlankTargetForLinks();
             });
</script>
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iOSæ¢¦å·¥å‚</a></h1>
  
    <h2>ä¸æˆ˜èƒœè‡ªå·±ï¼Œä½•ä»¥æ”¹å˜æœªæ¥ï¼</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="al1020119.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">é¦–é¡µ</a></li>
  <li><a href="/blog/archives">å½’æ¡£</a></li>
  <li><a href="/icocos">iCocos</a></li>
  <li><a href="/other">å…¶ä»–</a></li>
  <li><a href="/about">å…³äº</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/11/xcode-menu/">Xcode Menu</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><p>ã€€ã€€æœ¬æ–‡è°ƒç ”Xcodeçš„ç‰ˆæœ¬æ˜¯ 7.1ï¼ŒåŸºæœ¬æ˜¯æ¢ç´¢äº†èœå•çš„æ¯ä¸€ä¸ªæŒ‰é’®ã€‚è™½ç„¶ä»xcode4ä¸€ç›´ç”¨åˆ°äº†xcode7ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½åªæ˜¯ç”¨äº†ä¸€äº›åŸºç¡€çš„åŠŸèƒ½ï¼Œè¯´æ¥ä¹Ÿæƒ­æ„§ã€‚åœ¨ä¸€æ¬¡å¶ç„¶çš„æœºé‡çªç„¶å‘ç°äº†â€œæ˜¾ç¤ºè°ƒç”¨å±‚çº§â€çš„é€‰é¡¹æ‰çŸ¥é“èœå•äº†çš„æŒ‰é’®å¹¶ä¸éƒ½æ˜¯æ²¡æœ‰ç”¨ï¼Œè€Œæ˜¯å¾ˆæœ‰ç”¨åªæ˜¯ä½ ä¸çŸ¥é“ç½¢äº†ã€‚ æœ¬æƒ³è¿™ç§ä¸œè¥¿ä»”ç»†æ€»ç»“äº†ä¹Ÿä¸ä¸€å®šæœ‰ä»·å€¼è¿˜è€½è¯¯æ—¶é—´ï¼Œä½†æ˜¯ä¸¤ä¸ªæƒ³æ³•æœ€ç»ˆè¿˜æ˜¯é©±åŠ¨äº†æˆ‘ä»”ç»†å¼„å®Œï¼Œä¸€æ˜¯xcode7.1æ‰åˆšæ›´æ–°æ²¡å¤šä¹…ï¼Œè¿™ä¸ªæ—¶æ•ˆæ€§è¿˜è¡Œï¼ˆxcodeæ¯å¹´èœå•å˜åŒ–éƒ½ä¸å°ï¼‰ï¼›äºŒæ˜¯è¿™ç§æ–‡ç« å±äºå¹²è´§æ€§è´¨ï¼Œè‡ªå·±æœ‰æ—¶åœ¨å¤§é¡¹ç›®ä¸­ä¸ç¡®å®šæˆ–è€…å®³æ€•ä¸€ä¸‹ç‚¹é”™äº†çš„æ—¶å€™å¯ä»¥æ¥å›çœ‹ä¸€ä¸‹ï¼Œå¹¶ä¸”å…¶ä»–åšå‹ä¹Ÿå¯ä»¥æŸ¥è¯¢ã€‚</p>

<blockquote><p>ä¸‹é¢åˆ’äº†åˆ é™¤çº¿çš„é€‰é¡¹æ˜¯å¤ªåŸºç¡€çš„é€‰é¡¹å¯ä»¥å¿½ç•¥ï¼Œæ ‡çº¢çš„é€‰é¡¹æ˜¯éœ€è¦æ³¨æ„çš„ã€‚</p></blockquote>

<h2>File:</h2>

<p><img src="/images/xcodemenu001.png" title="Caption" ></p>

<pre><code>New : å¯ä»¥æ–°å»ºtap,çª—å£ï¼Œæ–°æ–‡ä»¶ï¼Œplaygroundï¼Œworkspaceï¼Œtargetç­‰ç­‰ã€‚

Add Files to XX: ä¸ºè¿™ä¸ªé¡¹ç›®ä¸­å¼•å…¥æ–‡ä»¶

Open ï¼šæ‰“å¼€æ–‡ä»¶

Open Recent  ï¼šæ‰“å¼€æœ€è¿‘çš„æ‰“å¼€çš„é¡¹ç›®æˆ–è€…å·¥ä½œç»„

Open Quickly  ï¼šé€šè¿‡æœç´¢æ–‡ä»¶åå¿«é€Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶

Close ï¼šè¿™å‡ ä¸ªé€‰é¡¹çš„éƒ½æ˜¯å…³é—­æ“ä½œã€‚

Save ï¼šä¿å­˜

Duplicateï¼šå¤åˆ¶

Revert  to Savedï¼šå°†æ­¤æ–‡ä»¶çš„ä¿®æ”¹ç›´æ¥å›é€€åˆ°ä¸Šæ¬¡ä¿å­˜æ—¶

Unlock ï¼šè¦å¯¹ç¬¬ä¸‰æ–¹åº“æˆ–ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œä¿®æ”¹æ—¶è§£é”

Show in Finder ï¼šåœ¨Finder ä¸­å±•ç¤º

Open with External Editor  ï¼šä½¿ç”¨å¤–éƒ¨ç¼–è¾‘å™¨æ‰“å¼€

Save As Workspaceï¼š å¦å­˜ä¸ºå·¥ä½œç»„

Page Setup ï¼šé¡µé¢è®¾ç½®ï¼Œä¸ºæ‰“å°è€Œç”Ÿ

Printâ€¦ ï¼šç”¨æ‰“å°æœºæ‰“å°å½“å‰æ–‡ä»¶ 
</code></pre>

<h2>Edit:</h2>

<p><img src="/images/xcodemenu002.png" title="Caption" ></p>

<pre><code>Undo: æ’¤é”€

Redo ï¼šåæ’¤é”€

Cut ï¼šå‰ªåˆ‡

Copy ï¼šæ‹·è´

Paste ï¼šç²˜è´´

Special Paste ï¼šç‰¹æ®Šç²˜è´´ ??

Paste and Preserve formatter ï¼šç²˜è´´å¹¶åŒ¹é…æ ·å¼

Duplicate :å¤åˆ¶

Delete :åˆ é™¤

Select All :å…¨é€‰

Filter : ç­›é€‰ï¼Œå¯ä»¥é€‰æ‹©åœ¨å¯¼èˆªæ ä¸­ç­›é€‰å’Œåœ¨åº“ä¸­ç­›é€‰

Sortï¼šæ’åº (è¿˜ä¸çŸ¥é“æ€ä¹ˆç”¨)

Format ï¼šæ ¼å¼

          Font ï¼šå¯ä»¥æ‰“å¼€å­—ä½“å’Œé¢œè‰²çš„è®¾ç½®æ¡†ï¼Œå¯ä»¥copyæ ·å¼ã€‚

          Text ï¼šå¯ä»¥è®¾ç½®ç¼–ç çš„é¡µé¢å·¦å³å¯¹é½ï¼Œæ˜¾ç¤ºé¡¶éƒ¨æ ‡å°ºã€‚

          Spelling and Grammar ï¼šæ‹¼å†™æç¤ºå’Œè¯­æ³•æç¤ºã€‚

          Substitutionsï¼šä¼šå‡ºæ¥ä¸ªä»ªè¡¨ç›˜ï¼Œæä¾›å¾®æ“ã€‚

          Transformations ï¼šå¯ä»¥å°†è‹±æ–‡è½¬æˆå…¨å¤§å†™ï¼Œå…¨å°å†™ï¼Œé¦–å­—æ¯å¤§å†™ã€‚

          Speech ï¼šå¼€å§‹è¯´è¯ç»“æŸè¯´è¯ã€‚

Refactor: é‡æ„

          Rename é‡å‘½å

          Extract æå–

          Create Superclass  åˆ›å»ºè¶…ç±»

          Move Up ä¸Šç§»

          Move Down ä¸‹ç§»

Convertï¼šè½¬æ¢æˆARC,swiftç­‰

Encapsulate å°è£…

Start Dictation: å¼€å§‹å¬å†™

Emoji &amp; symbolsï¼šemojiè¡¨æƒ…å’Œç‰¹æ®Šç¬¦å· 
</code></pre>

<h2>View:</h2>

<p><img src="/images/xcodemenu003.png" title="Caption" ></p>

<pre><code>Standard Editor ï¼šæ ‡å‡†æ¨¡å—

Assistant Editor ï¼šåŠ©ç†æ¨¡å—

Version Editorï¼š ç‰ˆæœ¬æ¨¡å—

Navigatorsï¼šé‡Œé¢åŒ…å«äº†xcodeå·¦è¾¹8ä¸ªå¯¼èˆªæ¨¡å—çš„åˆ‡æ¢ã€‚

Debug Areaï¼šä¸­ä¸‹éƒ¨çš„è°ƒè¯•æ¡†å’Œæ‰“å°è¾“å‡ºæ¡†ã€‚

Untilities: xcodeå³è¾¹çš„ä¸Šé¢ä¸¤ä¸ªé€‰é¡¹å’Œä¸‹é¢çš„å››ä¸ªé€‰é¡¹ã€‚

          Show File Inspectorï¼šæ˜¾ç¤ºæ–‡ä»¶æ£€æŸ¥

          Show Quick Help Inspectorï¼šæ˜¾ç¤ºå¿«é€Ÿå¸®åŠ©

          File Template Library  æ–‡ä»¶æ¨¡æ¿åº“

          Code Snippet Library  ä»£ç ç‰‡æ®µåº“

          Object Library  å¯¹è±¡åº“

          Media Library  åª’ä½“åº“

          Hide Utilities  éšè—å®ä½“å·¥å…·

Hide Toolbar  éšè—å·¥å…·æ ï¼ˆXCodeé¡¶éƒ¨ï¼‰

Hide Tab Bar  éšè—æ ‡ç­¾æ ï¼ˆç”¨äº†cmd+Tå‡ºæ¥çš„tabåˆ‡æ¢ï¼‰

Enter Full Screenï¼šå…¨å±
</code></pre>

<p> ##Find:</p>

<p><img src="/images/xcodemenu004.png" title="Caption" ></p>

<pre><code>Find in Workspaceâ€¦ åœ¨å·¥ä½œç»„ä¸­æŸ¥æ‰¾

Find and Replace in Workspaceâ€¦ åœ¨å·¥ä½œç»„ä¸­æŸ¥æ‰¾å’Œæ›¿æ¢

...

ä¸Šé¢4ä¸ªæ˜¯åœ¨å“ªåœ°æ–¹æŸ¥æ‰¾æˆ–æ›¿æ¢ï¼Œä¸­é—´4ä¸ªæ˜¯åœ¨ä½ å‡ ä¸ªé€‰ä¸­çš„æ–‡ä»¶æˆ–ç»„ä¸­æŸ¥æ‰¾ï¼Œ

å†ä¸‹é¢4ä¸ªæ˜¯æŸ¥æ‰¾æˆ–æ›¿æ¢ï¼Œç„¶åæ˜¯æ›¿æ¢ã€‚

Find Call Hierarchyï¼šæŸ¥æ‰¾åˆ°è°ƒç”¨å±‚çº§ã€‚

Hide Find Barï¼šéšè—æŸ¥æ‰¾æ 

Use Selection for Find ï¼šä½¿ç”¨é€‰æ‹©çš„åœ°æ–¹å»æŸ¥æ‰¾

Use Selection for Replaceï¼šä½¿ç”¨é€‰æ‹©çš„åœ°æ–¹å»æ›¿æ¢
</code></pre>

<h2>Navigate:</h2>

<p><img src="/images/xcodemenu005.png" title="Caption" ></p>

<pre><code>Reveal in Project Navigator ï¼šåœ¨é¡¹ç›®å¯¼èˆªä¸­æ­ç¤ºå‡ºæ­¤æ–‡ä»¶

Reveal in Symbol Navigator  ï¼šåœ¨ç¬¦å·å¯¼èˆªä¸­æ­ç¤ºå‡ºæŸæ–¹æ³•

Open in Assistant Editorï¼šç”¨åˆ†å±åŠ©ç†æ‰“å¼€

Open in ..   ä½ æƒ³æ€ä¹ˆæ‰“å¼€

Move Focus To Next Area  å°†ç„¦ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªåŒºåŸŸ

Move Focus To Editor   å°†ç„¦ç‚¹ç§»åŠ¨åˆ°ç¼–è¾‘å™¨

Go Forward  å‰è¿›ï¼Œç›¸å½“äºä¸¤ä¸ªæ‰‹æŒ‡å·¦åˆ’å³åˆ’

Go back  åé€€

Jump to Selection è·³è½¬åˆ°é€‰æ‹©

Jump to Definition è·³è½¬åˆ°å®šä¹‰

Jump to OriginalSource è·³åˆ°æºæ–‡ä»¶

Jump to Next Issue  è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé—®é¢˜

Jump to Previous Issue  è·³è½¬åˆ°ä¸Šä¸€ä¸ªé—®é¢˜

Jump to Next Counterpart  ï¼š??

Jump to Previous Counterpart : ??

Jump to Line in xxx.m ï¼šè·³åˆ°è¿™ä¸ªæ–‡ä»¶çš„ç¬¬å‡ è¡Œã€‚

Jump to Next Placeholder ï¼š??

Jump to Previous Placeholderï¼š??
</code></pre>

<h2>Editor:(é€‰ä¸­æ–‡ä»¶çŠ¶æ€ä¸‹)</h2>

<p><img src="/images/xcodemenu006.png" title="Caption" ></p>

<pre><code>Show Completions : æ˜¾ç¤ºè‡ªåŠ¨è¡¥å…¨

Edit All in Scope: åœ¨å½“å‰æ–‡ä»¶å…¨æ–‡ä¿®æ”¹é€‰ä¸­çš„ä¸€ä¸ªå˜é‡æˆ–å•è¯

Fix All in Scope: åœ¨å½“å‰æ–‡ä»¶è‡ªåŠ¨å¤„ç†ä»–èƒ½è§£å†³çš„errorï¼Œç›¸å½“äºç‚¹ 

Show issue: å±•ç¤ºé”™è¯¯å’Œéšè—é”™è¯¯ï¼Œç›¸å½“äºç‚¹å·¦è¾¹çš„æŒ‰é’® 

Issues: å¯ä»¥æ§åˆ¶å±•ç¤ºå…¨éƒ¨é”™è¯¯è­¦å‘Šï¼Œè¿˜æ˜¯ä»…ä»…å±•ç¤ºè­¦å‘Šã€‚

Structure: æ„é€ 

Balance Delimiterï¼šç›´æ¥é€‰ä¸­å…‰æ ‡æ‰€åœ¨çš„æ•´ä¸ªå¤§æ‹¬å·

Re-Indent : å°†æ ¼å¼ç¼©è¿›æ•´ç†ä¸€ä¸‹

è¿™é‡Œè¿˜æœ‰å››ä¸ªï¼Œåˆ†åˆ«æ˜¯å¾€å‰æˆ–å¾€åç§»ä¸€ä¸ªtabï¼Œå¾€ä¸Šå¾€ä¸‹ç§»ä¸€è¡Œ

Code Folding: æä¾›å„ç§æŠ˜å å’Œå–æ¶ˆæŠ˜å 

Focus Follow Selectionï¼šé«˜äº®èšç„¦ä½ å…‰æ ‡æ‰€åœ¨çš„æ¨¡å—

Syntax Coloring: è®¾ç½®å„ä¸ªè¯­æ³•çš„é«˜äº®é…è‰²

Show Invisibles: æ˜¾ç¤ºæ‰€æœ‰éšè—çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ç©ºæ ¼ã€‚

Show Blame for Line: æ˜¾ç¤ºé€‰ä¸­çš„è¡Œçš„ä¿®æ”¹è€…å’Œlogã€‚

Show Code Coverage: å±•ç¤ºä»£ç çš„è¦†ç›–èŒƒå›´
</code></pre>

<h2>Editor:(é€‰ä¸­xibçŠ¶æ€ä¸‹)</h2>

<p><img src="/images/xcodemenu007.png" title="Caption" ></p>

<pre><code>Canvas ç”»å¸ƒ

          Show Selection Highlights: æ˜¾ç¤ºé€‰ä¸­æ§ä»¶çš„é«˜äº®

   Show Resize Knobsï¼šæ˜¾ç¤ºçº¦æŸæ—è¾¹çš„å°æ–¹å—

Show Constraints ï¼šæ˜¾ç¤ºçº¦æŸ

Show Involved Views For Selected Constraintsï¼šæ˜¾ç¤ºçº¦æŸæ¶‰åŠåˆ°çš„è§†å›¾

          Show Layout Rectangles  å¸ƒå±€çŸ©å½¢

Size Class: å±å¹•å¸ƒå±€ç›¸å…³ï¼Œç›¸å½“äºç‚¹xibä¸‹é¢çš„æŒ‰é’®

Show Bounds Rectangles  æ˜¾ç¤ºè¾¹ç•ŒçŸ©å½¢

Hide Document Outlineï¼šéšè—æˆ–æ˜¾ç¤ºå·¦è¾¹çš„å±‚çº§å›¾

Reveal in Document Outlineï¼šåœ¨å·¦è¾¹çš„å±‚çº§å›¾ä¸­æ­ç¤ºå‡ºæ¥

Align  å¯¹å‡†

          Align Left Edges  å·¦è¾¹ç¼˜å¯¹é½

          Align Right Edges  å³è¾¹ç¼˜å¯¹é½

          Align Top Edges  é¡¶éƒ¨è¾¹ç¼˜å¯¹é½

          Align Bottom Edges  åº•éƒ¨è¾¹ç¼˜å¯¹é½

          Align Horizontal Centers  æ¨ªå‘ä¸­å¿ƒå¯¹é½

          Align Vertical Centers  ç«–å‘ä¸­å¿ƒå¯¹é½

          Align Baselines  åŸºçº¿å¯¹é½

          Align Horizontal Center In Container   å¯¹é½å®¹å™¨ä¸­çš„æ°´å¹³ä¸­å¿ƒ

          Align Vertical Center In Container   å¯¹é½å®¹å™¨ä¸­çš„å‚ç›´ä¸­å¿ƒ

Arrange : å¯ä»¥ä¸Šç§»ä¸‹ç§»æˆ–ç§»åˆ°èƒŒæ™¯ç­‰

Embed ï¼š åµŒå…¥ï¼Œå¯ä»¥åµŒnavï¼Œtabbarï¼ŒscrollView

Unembed   è§£é™¤åµŒå…¥

Size to Fit ï¼šå¤§å°ä»¥é€‚åˆ

Snap to Guidesï¼šè®©å¼•å¯¼çº¿å…·æœ‰å¸é™„åŠŸèƒ½ï¼Œè®©æ§ä»¶é è¿‘å°±è‡ªåŠ¨å¯¹é½

Guidesï¼šè®¾ç½®å¼•å¯¼æ ‡å°ºçº¿

Add Horizontal Guide ï¼š æ·»åŠ æ¨ªå‘æ ‡å°ºçº¿

Add Vertical Guide ï¼š æ·»åŠ å‚ç›´æ ‡å°ºçº¿

Automatically Refresh Viewsï¼šè‡ªåŠ¨åˆ·æ–°è§†å›¾

Refresh All Viewsï¼šåˆ·æ–°æ‰€æœ‰è§†å›¾

Debug Selected Viewsï¼šè°ƒè¯•é€‰ä¸­çš„è§†å›¾ï¼Ÿ

Resolve Auto Layout issuesï¼šè§£å†³è‡ªåŠ¨å¸ƒå±€çš„é—®é¢˜ï¼Œç±»ä¼¼äºç‚¹ 

Refactor to Storyboardï¼šæŠŠVCé‡æ„æˆSBï¼Ÿ
</code></pre>

<h2>Product:</h2>

<p><img src="/images/xcodemenu008.png" title="Caption" ></p>

<pre><code>Runï¼šè¿è¡Œ

Testï¼š??

Profileï¼šæ‰“å¼€instrumentä¹‹ç±»çš„

Analyzeï¼šè¿›è¡Œä»£ç åˆ†æï¼Œå¯ä»¥æ£€æµ‹ä¸€äº›ä¸è§„èŒƒçš„OCè¯­æ³•

Archiveï¼šå½’æ¡£

Build forï¼šå’Œä¸Šé¢çš„åŠŸèƒ½ç›¸ä¼¼ã€‚

Perform Actionï¼š??

Buildï¼šç¼–è¯‘

Cleanï¼šæ¸…ä¸€ä¸‹ä¹‹å‰ç¼–è¯‘çš„ç¼“å­˜

Stopï¼šåœæ­¢
</code></pre>

<h2>Debug:</h2>

<p><img src="/images/xcodemenu009.png" title="Caption" ></p>

<pre><code>Pause : æš‚åœ ä¼š åˆ‡æ¢æˆç»§ç»­

Continue to Current Lineï¼šèµ°åˆ°ä½ å…‰æ ‡é€‰ä¸­çš„è¿™è¡Œ

Step Over ï¼š è·¨è¶Š

Step Into ï¼šæ­¥å…¥

Step Out ï¼šèµ°å‡º

Step Over Instructionï¼š è·¨è¿‡æŒ‡ç¤º

Step Over Thread ï¼šå•æ­¥æ‰§è¡Œåœ¨çº¿ç¨‹

Step Into Instruction ï¼šæ­¥å…¥æŒ‡ç¤º

Step Into Thread ï¼šå•æ­¥æ‰§è¡Œçº¿ç¨‹

Capture GPU Frame: æ•è·GPUä½ç½®

Simulate Location: æ¨¡æ‹Ÿæ¨¡æ‹Ÿå™¨çš„ä½ç½®

Simulate Background Fetch: è®©æ¨¡æ‹Ÿå™¨å»åå°

iCloud: è‹¹æœäº‘ç›¸å…³

View Debugging: å…³äºè§†å›¾çš„è°ƒè¯•

Take Screenshot of Active Deviceï¼šæˆªå›¾

Capture View Hierarchy: ç”¨3Då›¾ æ¥æ•è·è§†å›¾å±‚æ¬¡

Show View Frame: åœ¨æ¨¡æ‹Ÿå™¨ä¸Šæ˜¾ç¤ºå„ä¸ªæ§ä»¶çš„å°ºå¯¸å¤§å°

Show Alignment Rectangles: æ˜¾ç¤ºå¯¹é½çŸ©å½¢

Show View Drawing: æ˜¾ç¤ºæŸ¥çœ‹ç»˜å›¾

Show Responsive Scrolling Status: æ˜¾ç¤ºå“åº”æ»šåŠ¨çŠ¶æ€

Deactivate Breakpoints  åœç”¨ä¸­æ–­ç‚¹ã€‚

Breakpoints: ç›¸å½“äºå·¦ä¸‹è§’çš„åŠ å·ï¼Œå¢åŠ å„ç§æ–­ç‚¹ã€‚

Debug Workflowï¼šå¯ä»¥æ˜¾ç¤ºå†…å­˜å’Œæ¸…é™¤æ‰“å°ç­‰æ“ä½œã€‚

Always Show Disassembly: è¿™è¦æ˜¯å‹¾ä¸Šå°±åªæ˜¾ç¤ºå †æ ˆä¿¡æ¯ä¸çœ‹ä»£ç 

Attach to Process by PID or Name: è®¾ç½®æƒé™idæˆ–name

Attach to Progress: é™„åŠ åˆ°è¿›ç¨‹

Detach: è·³è¿‡æ‰€æœ‰çš„æ–­ç‚¹
</code></pre>

<h4>Source Control:</h4>

<p><img src="/images/xcodemenu0010.png" title="Caption" ></p>

<pre><code>ç¬¬ä¸€è¡Œæ˜¯åˆ†æ”¯ç®¡ç†ï¼Œå¯ä»¥åˆ›å»ºåˆ†æ”¯åˆå¹¶åˆ†æ”¯ï¼Œé…ç½®åˆ†æ”¯çš„æºç­‰ç­‰ã€‚

Create Working Copyï¼šé¡¹ç›®ä¸­å¦‚æœæœ‰åœ°æ–¹æ˜¯å¼•ç”¨çš„é‚£å°±copyä¸€ä¸‹ã€‚

Checkoutï¼šå¯ä»¥é€‰æ‹©åˆ‡æ¢åˆ†æ”¯ã€‚

Commit  ï¼šæäº¤

Push ï¼š ä¸Šä¼ ä»£ç 

Pull ï¼šæ‹‰ä»£ç 

Refresh Statusï¼šåˆ·æ–°çŠ¶æ€

Discard Changes ï¼šæ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ã€‚

Add Selected Files : å°†é€‰ä¸­çš„è¿™äº›é—®å·æ–‡ä»¶addä¸€ä¸‹ã€‚

Discard Changes  in selected Files : å°†é€‰ä¸­çš„è¿™äº›æ–‡ä»¶æ”¾å¼ƒä¿®æ”¹ã€‚

Mark Selected  Files as Resolved: ç›¸å½“äºåˆå¹¶æˆ–rebaseè¿‡ç¨‹ä¸­çš„è§£å†³ã€‚

Historyï¼šå¯ä»¥çœ‹å½“å‰åˆ†æ”¯çš„logå†å²ã€‚
</code></pre>

<h2>Window:</h2>

<p><img src="/images/xcodemenu011.png" title="Caption" ></p>

<pre><code>Minimize: æœ€å°åŒ–

Zoomï¼šç›¸å½“äºwindowsçš„â€œè¿˜åŸâ€

Show next tab: å¦‚æœä½ æœ‰ä¸¤ä¸ªtabçš„è¯è¿™ä¸ªå°±æ˜¯åˆ‡æ¢tab

Show previous tab: åŒä¸Š

Documentation and API Referenceï¼šæ‰“å¼€xcodeæ–‡æ¡£

welcome to xcode: æ¥åˆ°å¼€å§‹é¡µé¢

Deviceï¼šç¡¬ä»¶ï¼Œèƒ½çœ‹åˆ°MAC ï¼Œæ¨¡æ‹Ÿå™¨å’Œæ‰‹æœº

Organizerï¼šæ‰“å¼€å¯ä»¥çœ‹åˆ°Archives å’Œ Crashes

Projectï¼šæŸ¥çœ‹æœ€è¿‘é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåˆ é™¤Derived Data

Bring all to Frontï¼šæŠŠæ‰€æœ‰xcodeæ‰“å¼€çš„éƒ½ç½®é¡¶ã€‚
</code></pre>

<h2>Help:</h2>

<p><img src="/images/xcodemenu012.png" title="Caption" ></p>

<pre><code>Search : åœ¨ç›®å½•ä¸­æœç´¢åŠŸèƒ½ã€‚

Documentation and API Referenceï¼šæ‰“å¼€xcodeæ–‡æ¡£

Xcode OverViewï¼šæ‰“å¼€xcodeç»¼è¿°

Release Notesï¼šæ‰“å¼€xcodeå„ç‰ˆæœ¬æ›´æ–°è¿­ä»£çš„logã€‚

What's New in Xcodeï¼šæœ‰ä»€ä¹ˆæ–°ç‰¹æ€§

Quick help for selected Itemï¼šå¿«é€Ÿå¸®åŠ©ï¼Œç›¸å½“äºæŒ‰ç€optionç‚¹ã€‚

Search Documentation for Selected  Textï¼šè¯¦ç»†å¸® åŠ©ï¼Œç›´æ¥åœ¨æ–‡æ¡£é‡Œæ‰¾åˆ°è¿™ä¸ªã€‚
</code></pre>
</div>
  
  




| <a href="/blog/2015/11/11/xcode-menu/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/08/nian-tie-shen-jiu/">ç²˜è´´æ·±ç©¶</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><p>åœ¨iOSä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‰ªè´´æ¿å®ç°åº”ç”¨ç¨‹åºä¹‹ä¸­ä»¥åŠåº”ç”¨ç¨‹åºä¹‹é—´å®ç°æ•°æ®çš„å…±äº«ã€‚æ¯”å¦‚ä½ å¯ä»¥ä»iPhone QQå¤åˆ¶ä¸€ä¸ªurlï¼Œç„¶åç²˜è´´åˆ°safariæµè§ˆå™¨ä¸­æŸ¥çœ‹è¿™ä¸ªé“¾æ¥çš„å†…å®¹ã€‚</p>

<h3>ä¸€ã€åœ¨iOSä¸­ä¸‹é¢ä¸‰ä¸ªæ§ä»¶ï¼Œè‡ªèº«å°±æœ‰å¤åˆ¶-ç²˜è´´çš„åŠŸèƒ½ï¼š</h3>

<ul>
<li>1ã€UITextView</li>
<li>2ã€UITextField</li>
<li>3ã€UIWebView</li>
</ul>


<h3>äºŒã€UIKit frameworkæä¾›äº†å‡ ä¸ªç±»å’Œåè®®æ–¹ä¾¿æˆ‘ä»¬åœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­å®ç°å‰ªè´´æ¿çš„åŠŸèƒ½ã€‚</h3>

<ul>
<li>1ã€UIPasteboardï¼šæˆ‘ä»¬å¯ä»¥å‘å…¶ä¸­å†™å…¥æ•°æ®ï¼Œä¹Ÿå¯ä»¥è¯»å–æ•°æ®</li>
<li>2ã€UIMenuControllerï¼šæ˜¾ç¤ºä¸€ä¸ªå¿«æ·èœå•ï¼Œç”¨æ¥å¤åˆ¶ã€å‰ªè´´ã€ç²˜è´´é€‰æ‹©çš„é¡¹ã€‚</li>
<li>3ã€UIResponderä¸­çš„ canPerformAction:withSender:ç”¨äºæ§åˆ¶å“ªäº›å‘½ä»¤æ˜¾ç¤ºåœ¨å¿«æ·èœå•ä¸­ã€‚</li>
<li>4ã€å½“å¿«æ·èœå•ä¸Šçš„å‘½ä»¤ç‚¹å‡»çš„æ—¶å€™ï¼ŒUIResponderStandardEditActionså°†ä¼šè¢«è°ƒç”¨ã€‚</li>
</ul>


<h3>ä¸‰ã€ä¸‹é¢è¿™äº›é¡¹èƒ½è¢«æ”¾ç½®åˆ°å‰ªè´´æ¿ä¸­</h3>

<ul>
<li>1ã€UIPasteboardTypeListString â€”  å­—ç¬¦ä¸²æ•°ç»„, åŒ…å«kUTTypeUTF8PlainText</li>
<li>2ã€UIPasteboardTypeListURL â€”   URLæ•°ç»„ï¼ŒåŒ…å«kUTTypeURL</li>
<li>3ã€UIPasteboardTypeListImage â€”   å›¾å½¢æ•°ç»„, åŒ…å«kUTTypePNG å’ŒkUTTypeJPEG</li>
<li>4ã€UIPasteboardTypeListColor â€”   é¢œè‰²æ•°ç»„</li>
</ul>


<h3>å››ã€å‰ªè´´æ¿çš„ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š</h3>

<p>ç³»ç»Ÿçº§ï¼šä½¿ç”¨UIPasteboardNameGeneralå’ŒUIPasteboardNameFindåˆ›å»ºï¼Œç³»ç»Ÿçº§çš„å‰ªè´´æ¿ï¼Œå½“åº”ç”¨ç¨‹åºå…³é—­ï¼Œæˆ–è€…å¸è½½æ—¶ï¼Œæ•°æ®éƒ½ä¸ä¼šä¸¢å¤±ã€‚
åº”ç”¨ç¨‹åºçº§ï¼šé€šè¿‡è®¾ç½®ï¼Œå¯ä»¥è®©æ•°æ®åœ¨åº”ç”¨ç¨‹åºå…³é—­ä¹‹åä»ç„¶ä¿å­˜åœ¨å‰ªè´´æ¿ä¸­ï¼Œä½†æ˜¯åº”ç”¨ç¨‹åºå¸è½½ä¹‹åæ•°æ®å°±ä¼šå¤±å»ã€‚æˆ‘ä»¬å¯ç”¨é€šè¿‡pasteboardWithName:createï¼šæ¥åˆ›å»ºã€‚</p>

<p>äº†è§£è¿™äº›ä¹‹åï¼Œä¸‹é¢é€šè¿‡ä¸€ç³»åˆ—çš„ä¾‹å­æ¥è¯´æ˜å¦‚ä½•åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å‰ªè´´æ¿ã€‚</p>

<p>ä¾‹å­ï¼š</p>

<h5>1ã€å¤åˆ¶å‰ªè´´æ–‡æœ¬ã€‚</h5>

<pre><code>ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œå¯ä»¥åœ¨tableviewä¸Šæ˜¾ç¤ºä¸€ä¸ªå¿«æ·èœå•ï¼Œä¸Šé¢åªæœ‰å¤åˆ¶æŒ‰é’®ï¼Œå¤åˆ¶tableviewä¸Šçš„æ•°æ®ä¹‹åï¼Œç„¶åç²˜è´´åˆ°titleä¸Šã€‚
</code></pre>

<p>å®šä¹‰ä¸€ä¸ªå•å…ƒæ ¼ç±»CopyTableViewCellï¼Œåœ¨è¿™ä¸ªç±»çš„ä¸Šæ˜¾ç¤ºå¿«æ·èœå•ï¼Œå®ç°å¤åˆ¶åŠŸèƒ½ã€‚</p>

<pre><code>@interface CopyTableViewCell : UITableViewCell {
    id delegate;
}
@property (nonatomic, retain) id delegate;
@end
</code></pre>

<p>å®ç°CopyTableViewCell ï¼š</p>

<pre><code>#import "CopyTableViewCell.h"

@implementation CopyTableViewCell

@synthesize delegate;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    if ((self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])) {
    }
    return self;
}
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
}
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    [[self delegate] performSelector:@selector(showMenu:)
                          withObject:self afterDelay:0.9f];

    [super setHighlighted:highlighted animated:animated];

}
- (BOOL)canBecomeFirstResponder
{
    return YES;
}
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender{
    if (action == @selector(cut:)){
        return NO;
    }
    else if(action == @selector(copy:)){
        return YES;
    }
    else if(action == @selector(paste:)){
        return NO;
    }
    else if(action == @selector(select:)){
        return NO;
    }
    else if(action == @selector(selectAll:)){
        return NO;
    }
    else
    {
        return [super canPerformAction:action withSender:sender];
    }
}
- (void)copy:(id)sender {
    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
    [pasteboard setString:[[self textLabel]text]];
}
- (void)dealloc {
    [super dealloc];
}
@end
</code></pre>

<p>å¤åˆ¶ä»£ç 
å®šä¹‰CopyPasteTextControllerï¼Œå®ç°ç²˜è´´åŠŸèƒ½ã€‚
    @interface CopyPasteTextController : UIViewController<UITableViewDelegate> {
        //ç”¨æ¥æ ‡è¯†æ˜¯å¦æ˜¾ç¤ºå¿«æ·èœå•
        BOOL menuVisible;
        UITableView *tableView;
    }</p>

<pre><code>@property (nonatomic, getter=isMenuVisible) BOOL menuVisible;

@property (nonatomic, retain) IBOutlet UITableView *tableView;
@end
</code></pre>

<p>å®ç°CopyPasteTextController ï¼š</p>

<pre><code>#import "CopyPasteTextController.h"
#import "CopyTableViewCell.h"

@implementation CopyPasteTextController
@synthesize menuVisible,tableView;
- (void)viewDidLoad {
    [super viewDidLoad];
    [self setTitle:@"æ–‡å­—å¤åˆ¶ç²˜è´´"];
    //ç‚¹å‡»è¿™ä¸ªæŒ‰é’®å°†å‰ªè´´æ¿çš„å†…å®¹ç²˜è´´åˆ°titleä¸Š
    UIBarButtonItem *addButton = [[[UIBarButtonItem alloc]
                                      initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh
                                      target:self
                                      action:@selector(readFromPasteboard:)]
                                     autorelease];
    [[self navigationItem] setRightBarButtonItem:addButton];
}


// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 9;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier =@"Cell";
    CopyTableViewCell *cell = (CopyTableViewCell *)[tableView
                                                           dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[CopyTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        [cell setDelegate:self];
    }

    // Configure the cell.
    NSString *text = [NSString stringWithFormat:@"Row %d", [indexPath row]];
    [[cell textLabel] setText:text];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([self isMenuVisible])
    {
        return;
    }
    [[[self tableView] cellForRowAtIndexPath:indexPath] setSelected:YES
                                                           animated:YES];
}
//æ˜¾ç¤ºèœå•
- (void)showMenu:(id)cell {
    if ([cell isHighlighted]) {
        [cell becomeFirstResponder];

        UIMenuController * menu = [UIMenuController sharedMenuController];
        [menu setTargetRect: [cell frame] inView: [self view]];
        [menu setMenuVisible: YES animated: YES];
    }
}
- (void)readFromPasteboard:(id)sender {
    [self setTitle:[NSString stringWithFormat:@"Pasteboard = %@",
                      [[UIPasteboard generalPasteboard] string]]];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Relinquish ownership any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    [self.tableView release];

    // Relinquish ownership of anything that can be recreated in viewDidLoad or on demand.
    // For example: self.myOutlet = nil;
}
</code></pre>

<p>å¤åˆ¶ä¸€è¡Œæ•°æ®ï¼š
ç‚¹å‡»å³ä¸Šè§’çš„æŒ‰é’®ç²˜è´´ï¼Œå°†æ•°æ®æ˜¾ç¤ºåœ¨titleä¸Šï¼š</p>

<h6>2ã€å›¾ç‰‡å¤åˆ¶ç²˜è´´</h6>

<p>   ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œå°†å›¾ç‰‡å¤åˆ¶å’Œå‰ªè´´åˆ°å¦å¤–ä¸€ä¸ªUIImageViewä¸­é—´ã€‚</p>

<ul>
<li>1ã€åœ¨ç•Œé¢ä¸Šæ”¾ç½®ä¸¤ä¸ªuiimageviewï¼Œä¸€ä¸ªæ˜¯å›¾ç‰‡çš„æ•°æ®æºï¼Œä¸€ä¸ªæ˜¯å°†å›¾ç‰‡ç²˜è´´åˆ°çš„åœ°æ–¹ã€‚CopyPasteImageViewController ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>


<p>@interface CopyPasteImageViewController : UIViewController {
    UIImageView <em>imageView;
    UIImageView </em>pasteView;
    UIImageView <em>selectedView;
}
@property (nonatomic, retain) IBOutlet UIImageView </em>imageView;
@property (nonatomic, retain) IBOutlet UIImageView <em>pasteView;
@property (nonatomic, retain) UIImageView </em>selectedView;
- (void)placeImageOnPasteboard:(id)view;
@end
* 2ã€å½“è§¦æ‘¸å›¾ç‰‡çš„æ—¶å€™æˆ‘ä»¬æ˜¾ç¤ºå¿«æ·èœå•ï¼š</p>

<hr />

<pre><code>- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    NSSet *copyTouches = [event touchesForView:imageView];
    NSSet *pasteTouches = [event touchesForView:pasteView];

    [self becomeFirstResponder];
    if ([copyTouches count] &gt; 0) {
        [self performSelector:@selector(showMenu:)
                   withObject:imageView afterDelay:0.9f];
    }
    else  if([pasteTouches count] &gt; 0) {
        [self performSelector:@selector(showMenu:)
                   withObject:pasteView afterDelay:0.9f];
    }
    [super touchesBegan:touches withEvent:event];
}

- (void)showMenu:(id)view {
    [self setSelectedView:view];

    UIMenuController * menu = [UIMenuController sharedMenuController];
    [menu setTargetRect: CGRectMake(5, 10, 1, 1) inView: view];
    [menu setMenuVisible: YES animated: YES];
}
</code></pre>

<p>è¿™é‡Œçš„å¿«æ·èœå•ï¼Œæ˜¾ç¤ºä¸‰ä¸ªèœå•é¡¹ï¼šå‰ªè´´ã€ç²˜è´´ã€å¤åˆ¶ï¼š</p>

<hr />

<pre><code>- (BOOL)canPerformAction:(SEL)action withSender:(id)sender{
    if (action == @selector(cut:)) {
        return ([self selectedView] == imageView) ? YES : NO;
    } else if (action == @selector(copy:)) {
        return ([self selectedView] == imageView) ? YES : NO;
    } else if (action == @selector(paste:)) {
        return ([self selectedView] == pasteView) ? YES : NO;
    } else if (action == @selector(select:)) {
        return NO;
    } else if (action == @selector(selectAll:)) {
        return NO;
    } else {
        return [super canPerformAction:action withSender:sender];
    }
}
- (void)cut:(id)sender {
    [self copy:sender];
    [imageView setHidden:YES];
}
- (void)copy:(id)sender {
    [self placeImageOnPasteboard:[self imageView]];
}
- (void)paste:(id)sender {
    UIPasteboard *appPasteBoard =
    [UIPasteboard pasteboardWithName:@"CopyPasteImage" create:YES];
    NSData *data =[appPasteBoard dataForPasteboardType:@"com.marizack.CopyPasteImage.imageView"];
    pasteView.image = [UIImage imageWithData:data];
}
</code></pre>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/11/08/nian-tie-shen-jiu/">é˜…è¯»å…¨æ–‡ğŸ˜˜</a>
    </footer>
  




| <a href="/blog/2015/11/08/nian-tie-shen-jiu/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/03/chang-yong-guan-jian-zi-zong-jie/">å¸¸ç”¨å…³é”®å­—æ€»ç»“</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><table>
<thead>
<tr>
<th> Name  </th>
<th style="text-align:center;"> Typedef</th>
<th style="text-align:right;">  Header</th>
<th>     True Value  </th>
<th> False Value</th>
</tr>
</thead>
<tbody>
<tr>
<td> BOOL</td>
<td style="text-align:center;">     signed char objc.h</td>
<td style="text-align:right;">     YES</td>
<td>    NO</td>
<td></td>
</tr>
<tr>
<td> bool  </td>
<td style="text-align:center;"> _Bool (int)   </td>
<td style="text-align:right;"> stdbool.h true    </td>
<td> false</td>
<td></td>
</tr>
<tr>
<td> Boolean</td>
<td style="text-align:center;">  unsigned char</td>
<td style="text-align:right;">  MacTypes.h  TRUE    </td>
<td> FALSE</td>
<td></td>
</tr>
<tr>
<td> NSNumber</td>
<td style="text-align:center;">     __NSCFBoolean</td>
<td style="text-align:right;">  Foundation.h    </td>
<td> @(YES)</td>
<td>   @(NO)</td>
</tr>
<tr>
<td> CFBooleanRef</td>
<td style="text-align:center;">     struct</td>
<td style="text-align:right;">     CoreFoundation.h    </td>
<td> kCFBooleanTrue</td>
<td>   kCFBooleanFalse</td>
</tr>
</tbody>
</table>


<table>
<thead>
<tr>
<th> æ ‡å¿—    </th>
<th style="text-align:center;"> å€¼</th>
<th style="text-align:right;">  å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td> NULL</td>
<td style="text-align:center;">     (void *)0   </td>
<td style="text-align:right;"> CæŒ‡é’ˆçš„å­—é¢é›¶å€¼</td>
</tr>
<tr>
<td> nil   </td>
<td style="text-align:center;"> (id)0 </td>
<td style="text-align:right;"> Objective-Cå¯¹è±¡çš„å­—é¢é›¶å€¼</td>
</tr>
<tr>
<td> Nil   </td>
<td style="text-align:center;"> (Class)0  </td>
<td style="text-align:right;"> Objective-Cç±»çš„å­—é¢é›¶å€¼</td>
</tr>
<tr>
<td> NSNull    </td>
<td style="text-align:center;"> [NSNull null] </td>
<td style="text-align:right;"> ç”¨æ¥è¡¨ç¤ºé›¶å€¼çš„å•ç‹¬çš„å¯¹è±¡</td>
</tr>
</tbody>
</table>

</div>
  
  




| <a href="/blog/2015/11/03/chang-yong-guan-jian-zi-zong-jie/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/10/metal/">Metalæ·±ç©¶</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><p>å­¦ä¹ ä½¿ç”¨è‹¹æœGPUåŠ é€Ÿ3Dç»˜å›¾çš„æ–°API:Metalï¼</p>

<p>åœ¨iOS 8é‡Œï¼Œè‹¹æœå‘å¸ƒäº†ä¸€ä¸ªæ–°çš„æ¥å£å«åšMetalï¼Œå®ƒæ˜¯ä¸€ä¸ªæ”¯æŒGPUåŠ é€Ÿ3Dç»˜å›¾çš„APIã€‚</p>

<p>Metalå’ŒOpenGL ESç›¸ä¼¼ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåº•å±‚APIï¼Œè´Ÿè´£å’Œ3Dç»˜å›¾ç¡¬ä»¶äº¤äº’ã€‚å®ƒä»¬ä¹‹é—´çš„ä¸åŒåœ¨äºï¼ŒMetalä¸æ˜¯è·¨å¹³å°çš„ã€‚ä¸ä¹‹ç›¸åçš„ï¼Œå®ƒè®¾è®¡çš„åœ¨è‹¹æœç¡¬ä»¶ä¸Šè¿è¡Œå¾—æå…¶é«˜æ•ˆï¼Œä¸OpenGL ESç›¸æ¯”ï¼Œå®ƒæä¾›äº†æ›´å¿«çš„é€Ÿåº¦å’Œæ›´ä½çš„å¼€é”€ã€‚</p>

<p>åœ¨è¿™ç¯‡æ•™ç¨‹é‡Œï¼Œä½ å°†ä¼šè·å¾—äº²èº«çš„ç»å†ï¼Œä½¿ç”¨Metalå’ŒSwiftæ¥åˆ›å»ºä¸€ä¸ªæœ‰åŸºæœ¬è„‰ç»œçš„åº”ç”¨ï¼šç”»ä¸€ä¸ªç®€å•çš„ä¸‰è§’å½¢ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å°†ä¼šå­¦ä¹ ä¸€äº›Metalé‡Œæœ€é‡è¦çš„ç±»ï¼Œæ¯”å¦‚devicesã€command queuesï¼Œç­‰ç­‰ã€‚</p>

<p>è¿™ç¯‡æ•™ç¨‹æ˜¯è®¾è®¡ä¸ºä»»ä½•äººå¯ä»¥é˜…è¯»æ˜ç™½ï¼Œæ— è®ºä½ æ˜¯å¦å­¦ä¹ è¿‡3Dç»˜å›¾ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¼šè¿‡å¾—å¾ˆå¿«ã€‚å¦‚æœä½ ä¹‹å‰æœ‰è¿‡3Dç¼–ç¨‹æˆ–è€…æ˜¯OpenGLç¼–ç¨‹çš„ç»å†ï¼Œä½ ä¼šå‘ç°å®ƒéå¸¸ç®€å•ï¼Œå› ä¸ºé‡Œé¢çš„å¾ˆå¤šæ¦‚å¿µä½ å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚</p>

<p>è¿™ç¯‡æ•™ç¨‹å‡è®¾ä½ å·²ç»ç†Ÿæ‚‰Swiftäº†ã€‚å¦‚æœä½ è¿˜æ˜¯ä¸ªSwiftæ–°æ‰‹ï¼Œå…ˆå­¦ä¹ è¿™äº›æ•™ç¨‹å§ï¼Œè‹¹æœSwiftç«™ç‚¹ã€ä¸€äº›Swiftæ•™ç¨‹ã€‚</p>

<p>æ³¨æ„ï¼šMetalåº”ç”¨ä¸èƒ½è·‘åœ¨iOSæ¨¡æ‹Ÿå™¨ä¸Šï¼Œå®ƒä»¬éœ€è¦ä¸€ä¸ªè®¾å¤‡ï¼Œè®¾å¤‡ä¸Šè£…è½½ç€è‹¹æœA7èŠ¯ç‰‡æˆ–è€…æ›´æ–°çš„èŠ¯ç‰‡ã€‚æ‰€ä»¥è¦å­¦ä¹ è¿™ç¯‡æ•™ç¨‹ï¼Œä½ éœ€è¦ä¸€å°è¿™æ ·çš„è®¾å¤‡(iPhone 5S,iPad Air,iPad mini2)æ¥å®Œæˆä»£ç çš„æµ‹è¯•ã€‚</p>

<pre><code>Metal vs. Sprite Kit, Scene Kit, or Unity
</code></pre>

<p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæˆ‘æƒ³è¦è®¨è®ºæ€æ ·æ¯”è¾ƒMetalå’Œä¸€äº›æ²¡é‚£ä¹ˆåº•å±‚çš„æ¡†æ¶ï¼Œæ¯”å¦‚ï¼šSprite Kitï¼ŒScene Kitæˆ–è€…Unityã€‚</p>

<p>Metalæ˜¯ä¸€ä¸ªåº•å±‚3Dç»˜å›¾APIï¼Œå’ŒOpenGLç±»ä¼¼ï¼Œä½†æ˜¯å®ƒçš„å¼€é”€æ›´ä½ã€‚å®ƒæ˜¯ä¸€ä¸ªGPUä¸Šä¸€ä¸ªç®€å•çš„å°è£…ï¼Œæ‰€ä»¥èƒ½å¤Ÿå®Œæˆå‡ ä¹æ‰€æœ‰äº‹æƒ…ï¼Œåƒ åœ¨å±å¹•ä¸Šæ¸²æŸ“ä¸€ä¸ªç²¾çµï¼ˆspriteï¼‰æˆ–è€…æ˜¯ä¸€ä¸ª3Dæ¨¡å‹ã€‚ä½†ä½ è¦ç¼–å†™å®Œæˆè¿™äº›äº‹æƒ…çš„æ‰€æœ‰ä»£ç ã€‚è¿™æ ·éº»çƒ¦çš„ä»£ä»·æ˜¯ï¼Œä½ æ‹¥æœ‰äº†GPUçš„åŠ›é‡å’Œæ§åˆ¶ã€‚</p>

<p>æ²¡é‚£ä¹ˆåº•å±‚çš„æ¸¸æˆæ¡†æ¶ï¼ŒåƒSprite Kitã€Scene Kitæˆ–è€…Unityéƒ½æ˜¯åœ¨åº•å±‚3Dç»˜å›¾APIï¼ˆåƒæ˜¯Metalæˆ–æ˜¯OpenGL ESï¼‰çš„åŸºç¡€ä¸Šæ„å»ºçš„ã€‚å®ƒä»¬æä¾›å¤§éƒ¨åˆ†ä½ éœ€è¦åœ¨æ¸¸æˆä¸­ç¼–å†™çš„åº•å±‚å°è£…ä»£ç ï¼Œæ¯”å¦‚åœ¨å±å¹•ä¸Šæ¸²æŸ“ä¸€ä¸ªç²¾çµ(sprite)æˆ–è€…ä¸€ä¸ª3Dæ¨¡å‹ã€‚</p>

<p>å¦‚æœä½ æ‰€æƒ³è¦åšçš„å°±æ˜¯åˆ¶ä½œä¸€ä¸ªæ¸¸æˆï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä¼šæ¨èä½ ä½¿ç”¨ä¸€ä¸ªæ²¡é‚£ä¹ˆåº•å±‚çš„åº“ï¼ŒåƒSprite Kitã€Scene Kitæˆ–è€…Unityï¼Œå› ä¸ºå®ƒä¼šè®©ä½ çš„å·¥ä½œæ›´è½»æ¾ã€‚å¦‚æœä½ å–œæ¬¢è¿™æ ·ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šæ•™ç¨‹æ¥å¸®åŠ©ä½ å­¦ä¹ è¿™äº›æ¡†æ¶ã€‚</p>

<p>ä½†æ˜¯ï¼Œè¿˜æ˜¯æœ‰ä¸¤ä¸ªå¾ˆå¥½çš„åŸå› æ¥å­¦ä¹ Metalï¼š</p>

<ul>
<li>1.ä½¿ç¡¬ä»¶è¾¾åˆ°è¿è¡Œæ•ˆç‡çš„å³°å€¼ï¼šå› ä¸ºMetaléå¸¸åº•å±‚ï¼Œå®ƒå…è®¸ä½ ä½¿ç¡¬ä»¶è¾¾åˆ°è¿è¡Œæ•ˆç‡çš„å³°å€¼ï¼Œå¯¹ä½ çš„æ¸¸æˆå¦‚ä½•è¿è¡Œæœ‰ç€å®Œå…¨çš„æ§åˆ¶ã€‚</li>
<li>2.è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ ç»å†ï¼šå­¦ä¹ Metalæ•™å¯¼ä½ å¾ˆå¤šå…³äº3Dç»˜å›¾ç¼–ç¨‹çš„æ¦‚å¿µï¼Œç¼–å†™ä½ è‡ªå·±çš„æ¸¸æˆå¼•æ“ï¼Œä»¥åŠé«˜å±‚(higher level)æ¸¸æˆæ¡†æ¶å¦‚ä½•è¿ä½œã€‚</li>
</ul>


<p>å¦‚æœä»¥ä¸Šä»»ä½•ä¸€ç‚¹å¯¹ä½ æ¥è¯´æ˜¯ä¸ªå¥½çš„ç†ç”±ï¼Œç»§ç»­è¯»ä¸‹å»ï¼</p>

<h4>Metal vs OpenGL ES</h4>

<p>ä¸‹é¢è®©æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹Metalå’ŒOpenGL ESçš„ä¸åŒä¹‹å¤„ã€‚</p>

<p>OpenGL ESè¢«è®¾è®¡æˆè·¨å¹³å°çš„ã€‚é‚£æ„å‘³ç€ä½ å¯ä»¥ç”¨C++OpenGL ESçš„ä»£ç ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹åªè¦ä½œå°‘è®¸æ”¹åŠ¨å°±èƒ½è®©å®ƒåœ¨å¦ä¸€ä¸ªå¹³å°ä¸Šè¿è¡Œï¼Œæ¯”å¦‚Androidã€‚</p>

<p>è‹¹æœæ„è¯†åˆ°å°½ç®¡OpenGL ESå¯¹è·¨å¹³å°çš„æ”¯æŒå¾ˆèµï¼Œä½†æ˜¯å®ƒç¼ºå°‘äº†ä¸€äº›è‹¹æœè®¾è®¡äº§å“çš„åŸºæœ¬ç†å¿µï¼šè‹¹æœæŠŠæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶ã€è½¯ä»¶æ•´åˆåœ¨äº†ä¸€èµ·ã€‚</p>

<p>æ‰€ä»¥è‹¹æœè®¤çœŸè€ƒè™‘äº†å¦‚æœä»–ä»¬è®¾è®¡ä¸€å¥—ç‰¹å®šåŸºäºä»–ä»¬ç¡¬ä»¶çš„ç»˜å›¾APIï¼Œä¼šæ˜¯æ€æ ·å‘¢ï¼Ÿå®ƒçš„ç›®æ ‡æ˜¯æé€Ÿè¿è¡Œã€ä½å¼€é”€ä»¥åŠæ”¯æŒæœ€æ–°æœ€å¥½çš„ç‰¹æ€§ã€‚</p>

<p>äºæ˜¯Metalè¯ç”Ÿäº†ã€‚å®ƒå¯¹æ¯”OpenGL ESï¼Œèƒ½ä¸ºä½ çš„åº”ç”¨å•ä½æ—¶é—´å†…æé«˜æœ€é«˜10å€çš„ç»˜å›¾è°ƒç”¨æ¬¡æ•°ã€‚è¿™èƒ½å¤Ÿäº§ç”Ÿè¶…èµçš„ç‰¹æ•ˆï¼Œå°±åƒWWDC 2014 keynoteä¸ŠzenèŠ±å›­æ ·ä¾‹ã€‚</p>

<p>è®©æˆ‘ä»¬å¼€å§‹çœ‹çœ‹ä¸€äº›Metalä»£ç å§ï¼</p>

<p>å¼€å¤´
Xcodeçš„iOSæ¸¸æˆæ¨¡æ¿æœ‰ä¸€ä¸ªMetalé€‰é¡¹ï¼Œä½†æ˜¯ä½ ä¸è¦åœ¨è¿™é‡Œé€‰æ‹©ã€‚è¿™æ˜¯å› ä¸ºæˆ‘æƒ³è¦å‘ä½ ä¸€æ­¥æ­¥å±•ç¤ºå¦‚ä½•ç¼–å†™ä¸€ä¸ªMetalåº”ç”¨ï¼Œæ‰€ä»¥ä½ èƒ½å¤Ÿç†è§£è¿™è¿‡ç¨‹ä¸­çš„æ¯ä¸€æ­¥éª¤ã€‚</p>

<p>æ‰“å¼€Xcode 6é€šè¿‡iOS\Application\Single View Application templateåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ã€‚ä½¿ç”¨HelloMetalä½œä¸ºé¡¹ç›®åç§°ï¼Œè®¾ç½®å¼€å‘è¯­è¨€ä¸ºSwiftï¼Œè®¾ç½®è®¾å¤‡ä¸ºé€šç”¨è®¾å¤‡(Universal)ã€‚ç‚¹å‡» Nextï¼Œé€‰æ‹©ä¸€ä¸ªç›®å½•ï¼Œç‚¹å‡»Createã€‚</p>

<p>æœ‰ä¸ƒä¸ªæ­¥éª¤æ¥è®¾ç½®metalï¼š</p>

<ul>
<li>1.åˆ›å»ºä¸€ä¸ªMTLDevice</li>
<li>2.åˆ›å»ºä¸€ä¸ªCAMetalLayer</li>
<li>3.åˆ›å»ºä¸€ä¸ªVertex Buffer</li>
<li>4.åˆ›å»ºä¸€ä¸ªVertex Shader</li>
<li>5.åˆ›å»ºä¸€ä¸ªFragment Shader</li>
<li>6.åˆ›å»ºä¸€ä¸ªRender Pipeline</li>
<li>7.åˆ›å»ºä¸€ä¸ªCommand Queue</li>
</ul>


<p>è®©æˆ‘ä»¬ä¸€ä¸ªä¸ªçœ‹å®ƒä»¬ã€‚</p>

<h5>1)åˆ›å»ºä¸€ä¸ªMTLDevice</h5>

<p>ä½¿ç”¨Metalä½ è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è·å–ä¸€ä¸ªMTLDeviceçš„å¼•ç”¨ã€‚</p>

<p>ä½ å¯ä»¥æŠŠä¸€ä¸ªMTLDeviceæƒ³è±¡æˆæ˜¯ä½ å’ŒCPUçš„ç›´æ¥è¿æ¥ã€‚ä½ å°†é€šè¿‡ä½¿ç”¨MTLDeviceåˆ›å»ºæ‰€æœ‰å…¶ä»–ä½ éœ€è¦çš„Metalå¯¹è±¡ï¼ˆåƒæ˜¯command queuesï¼Œbuffersï¼Œtexturesï¼‰ã€‚</p>

<p>ä¸ºäº†å®Œæˆè¿™ç‚¹ï¼Œæ‰“å¼€ViewController.swift å¹¶æ·»åŠ ä¸‹é¢çš„importè¯­å¥åˆ°æ–‡ä»¶æœ€ä¸Šæ–¹ï¼š</p>

<pre><code>import Metal 
</code></pre>

<p>è¿™å¯¼å…¥äº†Metalæ¡†æ¶ï¼Œæ‰€ä»¥ä½ èƒ½å¤Ÿä½¿ç”¨Metalçš„ç±»ï¼ˆåƒè¿™æ–‡ä»¶ä¸­çš„MTLDeviceï¼‰ã€‚æ¥ç€ï¼Œåœ¨ViewControllerç±»ä¸­æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š</p>

<pre><code>var device: MTLDevice! = nil 
</code></pre>

<p>ä½ å°†è¦åœ¨viewDidLoadå‡½æ•°å†…åˆå§‹åŒ–è¿™ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯åœ¨ä¸€ä¸ªinitå‡½æ•°é‡Œï¼Œæ‰€ä»¥å®ƒä¸å¾—ä¸æ˜¯ä¸€ä¸ªoptionalã€‚æ—¢ç„¶ä½ çŸ¥é“ä½ ä¸€å®šä¼š åœ¨ä½¿ç”¨å®ƒå‰åˆå§‹åŒ–å®ƒï¼Œä½ ä¸ºäº†æ–¹ä¾¿ï¼ŒæŠŠå®ƒæ ‡è®°ä¸ºä¸€ä¸ªéšå¼ä¸åŒ…è£¹çš„optionalã€‚æœ€åï¼Œæ·»åŠ è¿™ä¸€è¡Œåˆ°viewDidLoadå‡½æ•°çš„æœ€åã€‚</p>

<pre><code>device = MTLCreateSystemDefaultDevice() 
</code></pre>

<p>è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªé»˜è®¤MTLDeviceå¼•ç”¨ï¼Œä½ çš„ä»£ç å°†ä¼šç”¨åˆ°å®ƒã€‚</p>

<h5>2ï¼‰åˆ›å»ºä¸€ä¸ªCAMetalLayer</h5>

<p>åœ¨iOSé‡Œï¼Œä½ åœ¨å±å¹•ä¸Šçœ‹è§çš„æ‰€æœ‰ä¸œè¥¿ï¼Œè¢«ä¸€ä¸ªCALayeræ‰€æ‰¿è½½ã€‚å­˜åœ¨ä¸åŒç‰¹æ•ˆçš„CALayerçš„å­ç±»ï¼Œæ¯”å¦‚ï¼šæ¸å˜å±‚(gradient layers)ã€å½¢çŠ¶å±‚ï¼ˆshape layersï¼‰ã€é‡å¤å±‚(replicator layers) ç­‰ç­‰ã€‚</p>

<p>å¥½çš„ï¼Œå¦‚æœä½ æƒ³è¦ç”¨Metalåœ¨å±å¹•ä¸Šç”»ä¸€äº›ä¸œè¥¿ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç‰¹åˆ«çš„CALayerå­ç±»ï¼ŒCAMetalLayerã€‚æ‰€ä»¥åœ¨ä½ çš„viewcontrollerä¸­æ·»åŠ ä¸€ä¸ªã€‚</p>

<p>é¦–å…ˆåœ¨è¿™ä¸ªæ–‡ä»¶çš„ä¸Šæ–¹æ·»åŠ importè¯­å¥ã€‚</p>

<pre><code>import QuartzCore 
</code></pre>

<p>ä½ éœ€è¦å®ƒå› ä¸ºCAMetalLayeræ˜¯QuartzCoreæ¡†æ¶çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯Metalæ¡†æ¶é‡Œçš„ã€‚</p>

<p>ç„¶åæŠŠæ–°å±æ€§æ·»åŠ åˆ°ç±»ä¸­ï¼š</p>

<pre><code>var metalLayer: CAMetalLayer! = nil 
</code></pre>

<p>è¿™å°†ä¼šå­˜å‚¨ä½ æ–°layerçš„å¼•ç”¨ã€‚</p>

<p>æœ€åï¼ŒæŠŠè¿™è¡Œä»£ç æ·»åŠ åˆ°viewDidLoadæ–¹æ³•æœ€åã€‚</p>

<pre><code> 1 metalLayer = CAMetalLayer()          // 1 
 2 
 3 metalLayer.device = device           // 2 
 4 
 5 metalLayer.pixelFormat = .BGRA8Unorm // 3 
 6 
 7 metalLayer.framebufferOnly = true    // 4 
 8 
 9 metalLayer.frame = view.layer.frame  // 5 
10 
11 view.layer.addSublayer(metalLayer)   // 6 
</code></pre>

<p>è®©æˆ‘ä»¬ä¸€è¡Œè¡Œæ¥çœ‹ï¼š</p>

<ul>
<li>a.ä½ åˆ›å»ºäº†ä¸€ä¸ªCAMetalLayer</li>
<li>b.ä½ å¿…é¡»æ˜ç¡®layerä½¿ç”¨çš„MTLDeviceï¼Œä½ ç®€å•åœ°è®¾ç½®ä½ æ—©å‰è·å–çš„deviceã€‚</li>
<li>c.ä½ æŠŠåƒç´ æ ¼å¼ï¼ˆpixel formatï¼‰è®¾ç½®ä¸ºBGRA8Unormï¼Œå®ƒä»£è¡¨â€8å­—èŠ‚ä»£è¡¨è“è‰²ã€ç»¿è‰²ã€çº¢è‰²å’Œé€æ˜åº¦ï¼Œé€šè¿‡åœ¨0åˆ°1ä¹‹é—´å•ä½åŒ–çš„å€¼æ¥è¡¨ç¤ºâ€ã€‚è¿™æ¬¡ä¸¤ç§ç”¨åœ¨CAMetalLayerçš„åƒç´ æ ¼å¼ä¹‹ä¸€ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½ è¿™æ ·å†™å°±å¯ä»¥äº†ã€‚</li>
<li>d.è‹¹æœé¼“åŠ±ä½ è®¾ç½®framebufferOnlyä¸ºtrueï¼Œæ¥å¢å¼ºè¡¨ç°æ•ˆç‡ã€‚é™¤éä½ éœ€è¦å¯¹ä»layerç”Ÿæˆçš„çº¹ç†ï¼ˆtexturesï¼‰å– æ ·ï¼Œæˆ–è€…ä½ éœ€è¦åœ¨layerç»˜å›¾çº¹ç†(drawable textures)æ¿€æ´»ä¸€äº›è®¡ç®—å†…æ ¸ï¼Œå¦åˆ™ä½ ä¸éœ€è¦è®¾ç½®ã€‚ï¼ˆå¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ ä¸ç”¨è®¾ç½®ï¼‰</li>
<li>e.ä½ æŠŠlayerçš„frameè®¾ç½®ä¸ºviewçš„frameã€‚</li>
<li>f.ä½ æŠŠlayerä½œä¸ºview.layerä¸‹çš„å­layeræ·»åŠ ã€‚</li>
</ul>


<h5>3ï¼‰åˆ›å»ºä¸€ä¸ªVertex Buffer</h5>

<p>åœ¨Metalé‡Œæ¯ä¸€ä¸ªä¸œè¥¿éƒ½æ˜¯ä¸‰è§’å½¢ã€‚åœ¨è¿™ä¸ªåº”ç”¨é‡Œï¼Œä½ åªéœ€è¦ç”»ä¸€ä¸ªä¸‰è§’å½¢ï¼Œä¸è¿‡å³ä½¿æ˜¯æå…¶å¤æ‚çš„3Då½¢çŠ¶ä¹Ÿèƒ½è¢«è§£æ„ä¸ºä¸€ç³»åˆ—çš„ä¸‰è§’å½¢ã€‚</p>

<p>åœ¨Metalé‡Œï¼Œé»˜è®¤çš„åæ ‡ç³»æ˜¯å‘é‡åæ ‡ç³»ï¼Œè¿™æ„å‘³ç€é»˜è®¤çš„æ—¶å€™ï¼Œä¸€ä¸ª2x2x1çš„ç«‹æ–¹ä½“ï¼Œä¸­å¿ƒç‚¹æ˜¯(0,0,0.5)ã€‚</p>

<p>å¦‚æœä½ è®¤ä¸ºz=0æ˜¯å¹³é¢ï¼Œé‚£ä¹ˆ(-1,-1,0)å°±æ˜¯å·¦ä¸‹è§’ï¼Œ(0,0,0)å°±æ˜¯ä¸­å¿ƒï¼Œ(1,1,0)æ˜¯å³ä¸Šè§’ã€‚åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œä½ æƒ³è¦åœ¨è¿™äº›ç‚¹ä¸Šç”»ä¸‰è§’å½¢ï¼š</p>

<p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºã€‚åœ¨ä½ çš„ç±»ä¸­æ·»åŠ ä¸‹åˆ—çš„å¸¸é‡å±æ€§ï¼š</p>

<pre><code>let vertexData:[Float] = [ 
  0.0, 1.0, 0.0, 
  -1.0, -1.0, 0.0, 
  1.0, -1.0, 0.0] 
</code></pre>

<p>è¿™åœ¨CPUåˆ›å»ºä¸€ä¸ªæµ®ç‚¹æ•°æ•°ç»„â€”â€”ä½ éœ€è¦é€šè¿‡æŠŠå®ƒç§»åŠ¨åˆ°ä¸€ä¸ªå«MTLBufferçš„ä¸œè¥¿ï¼Œæ¥å‘é€è¿™äº›æ•°æ®åˆ°GPUã€‚</p>

<p>æ·»åŠ å¦ä¸€ä¸ªæ–°çš„å±æ€§ï¼š</p>

<pre><code>var vertexBuffer: MTLBuffer! = nil 
ç„¶ååœ¨ viewDidLoad æ–¹æ³•çš„æœ€åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š
let dataSize = vertexData.count * sizeofValue(vertexData[0]) // 1 
vertexBuffer = device.newBufferWithBytes(vertexData, length: dataSize, options: nil) // 2 
</code></pre>

<p>è®©æˆ‘ä»¬ä¸€è¡Œè¡Œæ¥çœ‹ï¼š</p>

<ul>
<li>a.ä½ éœ€è¦è·å–vertex dataçš„å­—èŠ‚å¤§å°ã€‚ä½ é€šè¿‡æŠŠç¬¬ä¸€ä¸ªå…ƒç´ çš„å¤§å°å’Œæ•°ç»„å…ƒç´ ä¸ªæ•°ç›¸ä¹˜æ¥å¾—åˆ°ã€‚</li>
<li>b.ä½ åœ¨MTLDeviceä¸Šè°ƒç”¨newBufferWithBytes(length:options:) ï¼Œåœ¨GPUåˆ›å»ºä¸€ä¸ªæ–°çš„bufferï¼Œä»CPUé‡Œè¾“é€dataã€‚ä½ ä¼ é€’nilæ¥æ¥å—é»˜è®¤çš„é€‰é¡¹ã€‚</li>
</ul>


<h5>4ï¼‰åˆ›å»ºä¸€ä¸ªVertex Shader</h5>

<p>ä½ ä¹‹å‰åˆ›å»ºçš„é¡¶ç‚¹å°†æˆä¸ºä½ æ¥ä¸‹æ¥å†™çš„ä¸€ä¸ªå«vertext shaderçš„å°ç¨‹åºçš„è¾“å…¥ã€‚</p>

<p>ä¸€ä¸ªvertex shader æ˜¯ä¸€ä¸ªåœ¨GPUä¸Šè¿è¡Œçš„å°ç¨‹åºï¼Œå®ƒç”±åƒc++çš„ä¸€é—¨è¯­è¨€ç¼–å†™ï¼Œé‚£é—¨è¯­è¨€å«åšMetal Shading Languageã€‚</p>

<p>ä¸€ä¸ªvertex shaderè¢«æ¯ä¸ªé¡¶ç‚¹è°ƒç”¨ï¼Œå®ƒçš„å·¥ä½œæ˜¯æ¥å—é¡¶ç‚¹çš„ä¿¡æ¯ï¼ˆå¦‚ï¼šä½ç½®å’Œé¢œè‰²ã€çº¹ç†åæ ‡ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ½œåœ¨çš„ä¿®æ­£ä½ç½®ï¼ˆå¯èƒ½è¿˜æœ‰åˆ«çš„ç›¸å…³ä¿¡æ¯ï¼‰ã€‚</p>

<p>ä¸ºäº†æŠŠäº‹æƒ…ä¿æŒç®€å•ï¼Œä½ çš„vertex shaderå°†ä¼šè¿”å›ä¸€ä¸ªå’Œä¼ é€’ä½ç½®ç›¸åŒçš„ä½ç½®ã€‚</p>

<p>æœ€ç®€å•çš„äº†è§£ vertex shader çš„æ–¹æ³•æ˜¯ï¼Œè‡ªå·±ä½“éªŒã€‚ç‚¹å‡»File\New\Fileï¼Œé€‰æ‹©iOS\Source\Metal Fileï¼Œç„¶åç‚¹å‡»Nextã€‚è¾“å…¥Shader.metalä½œä¸ºæ–‡ä»¶åä¸ŠæŒ‰å›è½¦ï¼Œç„¶åç‚¹å‡»Createã€‚</p>

<p>æ³¨æ„ï¼šåœ¨Metalé‡Œï¼Œä½ èƒ½å¤Ÿåœ¨ä¸€ä¸ªMetalæ–‡ä»¶é‡ŒåŒ…å«å¤šä¸ªshadersã€‚ä½ ä¹Ÿèƒ½æŠŠä½ çš„shader åˆ†æ•£åœ¨å¤šä¸ªMetalæ–‡ä»¶ä¸­ã€‚Metalä¼šä»ä»»æ„Metalæ–‡ä»¶ä¸­åŠ è½½ä½ é¡¹ç›®åŒ…å«çš„shadersã€‚
åœ¨Shaders.metalåº•éƒ¨æ·»åŠ ä¸‹åˆ—ä»£ç ï¼š</p>

<pre><code>metalLayer = CAMetalLayer()          // 1 

metalLayer.device = device           // 2 

metalLayer.pixelFormat = .BGRA8Unorm // 3 

metalLayer.framebufferOnly = true    // 4 

metalLayer.frame = view.layer.frame  // 5 

view.layer.addSublayer(metalLayer)   // 6
</code></pre>

<p>è®©æˆ‘ä»¬ä¸€è¡Œè¡Œæ¥çœ‹ï¼š</p>

<ul>
<li>a.æ‰€æœ‰çš„vertex shaderså¿…é¡»ä»¥å…³é”®å­—vertexå¼€å¤´ã€‚å‡½æ•°å¿…é¡»è‡³å°‘è¿”å›é¡¶ç‚¹çš„æœ€ç»ˆä½ç½®â€”â€”ä½ é€šè¿‡æŒ‡å®šfloat4ï¼ˆä¸€ä¸ªå…ƒç´ ä¸º4ä¸ªæµ®ç‚¹æ•°çš„å‘é‡ï¼‰ã€‚ç„¶åä½ ç»™ä¸€ä¸ªåå­—ç»™vetex shaderï¼Œä»¥åä½ å°†ç”¨è¿™ä¸ªåå­—æ¥è®¿é—®è¿™ä¸ªvertex shaderã€‚</li>
<li>b.ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªå…ƒç´ ä¸ºpacked_float3(ä¸€ä¸ªå‘é‡åŒ…å«3ä¸ªæµ®ç‚¹æ•°)çš„æ•°ç»„çš„æŒ‡é’ˆï¼Œå¦‚ï¼šæ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®ã€‚è¿™ä¸ª [[ &hellip; ]] è¯­æ³•è¢«ç”¨åœ¨å£°æ˜é‚£äº›èƒ½è¢«ç”¨ä½œç‰¹å®šé¢å¤–ä¿¡æ¯çš„å±æ€§ï¼Œåƒæ˜¯èµ„æºä½ç½®ï¼Œshaderè¾“å…¥ï¼Œå†…å»ºå˜é‡ã€‚è¿™é‡Œä½ æŠŠè¿™ä¸ªå‚æ•°ç”¨ [[ buffer(0) ]] æ ‡è®°ï¼Œæ¥æŒ‡æ˜è¿™ä¸ªå‚æ•°å°†ä¼šè¢«åœ¨ä½ ä»£ç ä¸­ä½ å‘é€åˆ°ä½ çš„vertex shaderçš„ç¬¬ä¸€å—buffer dataæ‰€éå†ã€‚</li>
<li>c.vertex shaderä¼šæ¥å—ä¸€ä¸ªåå«vertex_idçš„å±æ€§çš„ç‰¹å®šå‚æ•°ï¼Œå®ƒæ„å‘³ç€å®ƒä¼šè¢«vertexæ•°ç»„é‡Œç‰¹å®šçš„é¡¶ç‚¹æ‰€è£…å…¥ã€‚</li>
<li>d.ç°åœ¨ä½ åŸºäºvertex idæ¥æ£€ç´¢vertexæ•°ç»„ä¸­å¯¹åº”ä½ç½®çš„vertexå¹¶æŠŠå®ƒè¿”å›ã€‚åŒæ—¶ä½ æŠŠè¿™ä¸ªå‘é‡è½¬æ¢ä¸ºä¸€ä¸ªfloat4ç±»å‹ï¼Œæœ€åçš„valueè®¾ç½®ä¸º1.0ï¼ˆç®€å•çš„æ¥è¯´ï¼Œè¿™æ˜¯3Dæ•°å­¦è¦æ±‚çš„ï¼‰ã€‚</li>
</ul>


<h5>5ï¼‰åˆ›å»ºä¸€ä¸ªFragment Shader</h5>

<p>å®Œæˆæˆ‘ä»¬çš„vertex shaderåï¼Œå¦ä¸€ä¸ªshaderï¼Œå®ƒè¢«æ¯ä¸ªåœ¨å±å¹•ä¸Šçš„fragment(think pixel)è°ƒç”¨ï¼Œå®ƒå°±æ˜¯fragment shaderã€‚</p>

<p>fragment shaderé€šè¿‡å†…æ’(interpolating)vertex shaderçš„è¾“å‡ºè¿˜è·å¾—è‡ªå·±çš„è¾“å…¥ã€‚æ¯”å¦‚ï¼šæ€è€ƒåœ¨ä¸‰è§’å½¢ä¸¤ä¸ªåº•é¡¶ç‚¹ä¹‹é—´çš„fragmentï¼š</p>

<p>fragmentçš„è¾“å…¥å€¼å°†ä¼šç”±50%çš„å·¦ä¸‹è§’é¡¶ç‚¹å’Œ50%çš„å³ä¸‹è§’é¡¶ç‚¹ç»„æˆã€‚</p>

<p>fragment shaderçš„å·¥ä½œæ˜¯ç»™æ¯ä¸ªfragmentè¿”å›æœ€åçš„é¢œè‰²ã€‚ä¸ºäº†ç®€ä¾¿ï¼Œä½ å°†ä¼šæŠŠæ¯ä¸ªfragmentè¿”å›ç™½è‰²ã€‚</p>

<p>åœ¨Shader.metalçš„åº•éƒ¨æ·»åŠ ä¸‹åˆ—ä»£ç ï¼š</p>

<pre><code>1 fragment half4 basic_fragment() { // 1 
2 
3 return half4(1.0);              // 2 
4 
5 } 
</code></pre>

<p>è®©æˆ‘ä»¬ä¸€è¡Œè¡Œæ¥çœ‹ï¼š</p>

<ul>
<li><ol type="a">
<li>æ‰€æœ‰fragment shaderså¿…é¡»ä»¥fragmentå…³é”®å­—å¼€å§‹ã€‚è¿™ä¸ªå‡½æ•°å¿…é¡»è‡³å°‘è¿”å›fragmentçš„æœ€ç»ˆé¢œè‰²â€”â€”ä½ é€šè¿‡æŒ‡å®šhalf4ï¼ˆä¸€ä¸ªé¢œè‰²çš„RGBAå€¼ï¼‰æ¥ å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚æ³¨æ„ï¼Œhalf4æ¯”float4åœ¨å†…å­˜ä¸Šæ›´æœ‰æ•ˆç‡ï¼Œå› ä¸ºï¼Œä½ å†™å…¥äº†æ›´å°‘çš„GPUå†…å­˜ã€‚</li>
</ol>
</li>
<li><ol type="a">
<li>è¿™é‡Œä½ è¿”å›(1,1,1,1)çš„é¢œè‰²ï¼Œä¹Ÿå°±æ˜¯ç™½è‰²ã€‚</li>
</ol>
</li>
</ul>


<h5>6ï¼‰åˆ›å»ºä¸€ä¸ªRender Pipeline</h5>

<p>ç°åœ¨ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªvertex shaderå’Œä¸€ä¸ªfragment shaderï¼Œä½ éœ€è¦ç»„åˆå®ƒä»¬ï¼ˆåŠ ä¸Šä¸€äº›é…ç½®æ•°æ®ï¼‰åˆ°ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒåå«render pipelineã€‚Metalä¸€ä¸ªå¾ˆé…·çš„åœ°æ–¹æ˜¯ï¼Œæ¸²æŸ“å™¨ï¼ˆshadersï¼‰æ˜¯é¢„ç¼–è¯‘çš„ï¼Œrender pipeline é…ç½®ä¼šåœ¨ä½ ç¬¬ä¸€æ¬¡è®¾ç½®å®ƒçš„æ—¶å€™è¢«ç¼–è¯‘ï¼Œæ‰€ä»¥æ‰€æœ‰äº‹æƒ…éƒ½æå…¶é«˜æ•ˆã€‚</p>

<ol>
<li><p>é¦–å…ˆåœ¨ViewController.swifté‡Œæ·»åŠ ä¸€ä¸ªå±æ€§ï¼š
var pipelineState: MTLRenderPipelineState! = nil
è¿™ä¼šå¯¹ä½ å³å°†è¦åˆ›å»ºçš„render pipeline ï¼Œåœ¨å®ƒè¢«ç¼–è¯‘åè¿›è¡Œè·Ÿè¸ªã€‚</p></li>
<li><p>æ¥ç€ï¼Œåœ¨ viewDidLoad æ–¹æ³•æœ€åæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p></li>
</ol>


<p>// 1</p>

<pre><code>1 let defaultLibrary = device.newDefaultLibrary() 
2 
3 let fragmentProgram = defaultLibrary.newFunctionWithName("basic_fragment") 
4 
5 let vertexProgram = defaultLibrary.newFunctionWithName("basic_vertex") 
</code></pre>

<p>// 2</p>

<pre><code>let pipelineStateDescriptor = MTLRenderPipelineDescriptor() 

pipelineStateDescriptor.vertexFunction = vertexProgram 

pipelineStateDescriptor.fragmentFunction = fragmentProgram 

pipelineStateDescriptor.colorAttachments[0].pixelFormat = .BGRA8Unorm
</code></pre>

<p>//3</p>

<pre><code>pipelineState = device.newRenderPipelineStateWithDescriptor(pipelineStateDescriptor, error: &amp;pipelineError) 

if !pipelineState { 

  println("Failed to create pipeline state, error \(pipelineError)") 

}
</code></pre>

<p>è®©æˆ‘ä»¬åˆ†éƒ¨åˆ†çœ‹è¿™äº›ä»£ç ï¼š</p>

<ul>
<li>a.ä½ å¯ä»¥é€šè¿‡è°ƒç”¨device.newDefaultLibraryæ–¹æ³•è·å¾—çš„MTLibraryå¯¹è±¡è®¿é—®åˆ°ä½ é¡¹ç›®ä¸­çš„é¢„ç¼–è¯‘shadersã€‚ç„¶åä½ èƒ½å¤Ÿé€šè¿‡åå­—æ£€ç´¢æ¯ä¸ªshaderã€‚</li>
<li>b.ä½ åœ¨è¿™é‡Œè®¾ç½®ä½ çš„render pipelineã€‚å®ƒåŒ…å«ä½ æƒ³è¦ä½¿ç”¨çš„shadersã€é¢œè‰²é™„ä»¶ï¼ˆcolor attachmentï¼‰çš„åƒç´ æ ¼å¼(pixel format)ã€‚ï¼ˆä¾‹å¦‚ï¼šä½ æ¸²æŸ“åˆ°çš„è¾“å…¥ç¼“å†²åŒºï¼Œä¹Ÿå°±æ˜¯CAMetalLayerï¼‰ã€‚</li>
<li>c.æœ€åï¼Œä½ æŠŠè¿™ä¸ªpipeline é…ç½®ç¼–è¯‘åˆ°ä¸€ä¸ªpipeline çŠ¶æ€(state)ä¸­ï¼Œè®©å®ƒä½¿ç”¨èµ·æ¥æœ‰æ•ˆç‡ã€‚</li>
</ul>


<h5>7ï¼‰åˆ›å»ºä¸€ä¸ªCommand Queue</h5>

<p>ä½ éœ€è¦åšçš„æœ€ç»ˆçš„ä¸€æ¬¡æ€§è®¾ç½®æ­¥éª¤ï¼Œæ˜¯åˆ›å»ºä¸€ä¸ªMTLCommandQueueã€‚</p>

<p>æŠŠè¿™ä¸ªæƒ³è±¡æˆæ˜¯ä¸€ä¸ªåˆ—è¡¨è£…è½½ç€ä½ å‘Šè¯‰GPUä¸€æ¬¡è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>

<p>è¦åˆ›å»ºä¸€ä¸ªcommand queueï¼Œç®€å•åœ°æ·»åŠ ä¸€ä¸ªå±æ€§ï¼š</p>

<pre><code>var commandQueue: MTLCommandQueue! = nil 
</code></pre>

<p>æŠŠä¸‹é¢è¿™è¡Œæ·»åŠ åˆ° viewDidLoad çš„æœ€åï¼š</p>

<pre><code>commandQueue = device.newCommandQueue() 
</code></pre>

<p>æ­å–œï¼Œä½ çš„é¢„è®¾ç½®çš„ä»£ç å®Œæˆäº†ã€‚</p>

<p>æ¸²æŸ“ä¸‰è§’å½¢
ç°åœ¨ï¼Œæ˜¯æ—¶å€™å­¦ä¹ æ¯å¸§æ‰§è¡Œçš„ä»£ç ï¼Œæ¥æ¸²æŸ“è¿™ä¸ªä¸‰è§’å½¢ï¼</p>

<p>å®ƒå°†åœ¨äº”ä¸ªæ­¥éª¤ä¸­è¢«å®Œæˆï¼š</p>

<ul>
<li>1.åˆ›å»ºä¸€ä¸ªDisplay linkã€‚</li>
<li>2.åˆ›å»ºä¸€ä¸ªRender Pass Descriptor</li>
<li>3.åˆ›å»ºä¸€ä¸ªCommand Buffer</li>
<li>4.åˆ›å»ºä¸€ä¸ªRender Command Encoder</li>
<li>5.æäº¤ä½ Command Bufferçš„å†…å®¹ã€‚</li>
</ul>


<p>è®©æˆ‘ä»¬æ·±å…¥æ¥çœ‹ï¼</p>

<blockquote><p>æ³¨æ„ï¼šç†è®ºä¸Šè¿™ä¸ªåº”ç”¨å®é™…ä¸Šä¸éœ€è¦æ¯å¸§æ¸²æŸ“ï¼Œå› ä¸ºä¸‰è§’å½¢è¢«ç»˜åˆ¶ä¹‹åä¸ä¼šåŠ¨ã€‚ä½†æ˜¯ï¼Œå¤§éƒ¨åˆ†åº”ç”¨ä¼šæœ‰ç‰©ä½“çš„ç§»åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šé‚£æ ·åšã€‚åŒæ—¶ä¹Ÿä¸ºå°†æ¥çš„æ•™ç¨‹æ‰“ä¸‹åŸºç¡€ã€‚</p></blockquote>

<h6>1ï¼‰åˆ›å»ºä¸€ä¸ªDisplay Link</h6>

<p>ä½ æƒ³è¦ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ¯æ¬¡è®¾å¤‡å±å¹•åˆ·æ–°çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é‡ç»˜å±å¹•ã€‚</p>

<p>åœ¨iOSå¹³å°ä¸Šï¼Œä½ é€šè¿‡CADisplayLink ç±»æ¥å®ç°ã€‚</p>

<p>ä¸ºäº†ä½¿ç”¨å®ƒï¼Œåœ¨ç±»é‡Œæ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§ï¼š</p>

<pre><code> 1 var timer: CADisplayLink! = nil  
</code></pre>

<p>ç„¶ååœ¨ viewDidLoad æ–¹æ³•çš„æœ«å°¾åƒè¿™æ ·åˆå§‹åŒ–å®ƒï¼š</p>

<pre><code>timer = CADisplayLink(target: self, selector: Selector("gameloop")) 

timer.addToRunLoop(NSRunLoop.mainRunLoop(), forMode: NSDefaultRunLoopMode) 
</code></pre>

<p>è¿™ä¼šè®¾ç½®ä½ çš„ä»£ç ï¼Œè®©å®ƒæ¯æ¬¡åˆ·æ–°å±å¹•çš„æ—¶å€™è°ƒç”¨ä¸€ä¸ªåå«gameloopçš„æ–¹æ³•ã€‚</p>

<pre><code>func render() { 

// TODO 

} 

func gameloop() { 
  autoreleasepool { 

    self.render() 

  } 

} 
</code></pre>

<p>è¿™é‡Œ gameloop å‡½æ•°ç®€å•åœ°è°ƒç”¨ render å‡½æ•°ï¼Œè¿™æ—¶ render å‡½æ•°åªæœ‰ä¸€ä¸ªç©ºå®ç°ã€‚è®©æˆ‘ä»¬æ¥å®ç°å®ƒï¼</p>

<h6>2ï¼‰åˆ›å»ºä¸€ä¸ªRender Pass Descriptor</h6>

<p>ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªMTLRenderPassDescriptorï¼Œå®ƒèƒ½é…ç½®ä»€ä¹ˆçº¹ç†ä¼šè¢«æ¸²æŸ“åˆ°ã€ä»€ä¹ˆæ˜¯clear colorï¼Œä»¥åŠå…¶ä»–çš„é…ç½®ã€‚</p>

<p>ç®€å•åœ°åœ¨ render å‡½æ•°é‡Œæ·»åŠ ä»¥ä¸‹è¡Œï¼š</p>

<pre><code>var drawable = metalLayer.nextDrawable() 

let renderPassDescriptor = MTLRenderPassDescriptor() 
renderPassDescriptor.colorAttachments[0].texture = drawable.texture 

renderPassDescriptor.colorAttachments[0].loadAction = .Clear 

renderPassDescriptor.colorAttachments[0].clearColor = MTLClearColor(red: 0.0, green: 104.0/255.0, blue: 5.0/255.0, alpha: 1.0)
</code></pre>

<p>é¦–å…ˆä½ åœ¨ä¹‹å‰çš„metal layerä¸Šè°ƒç”¨nextDrawable() ï¼Œå®ƒä¼šè¿”å›ä½ éœ€è¦ç»˜åˆ¶åˆ°å±å¹•ä¸Šçš„çº¹ç†(texture)ã€‚æ¥ä¸‹æ¥ï¼Œä½ é…ç½®ä½ çš„render pass descriptor æ¥ä½¿ç”¨å®ƒã€‚ä½ è®¾ç½®load actionä¸ºclearï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç»˜åˆ¶ä¹‹å‰ï¼ŒæŠŠçº¹ç†æ¸…ç©ºã€‚ç„¶åä½ æŠŠç»˜åˆ¶çš„èƒŒæ™¯é¢œè‰²è®¾ç½®ä¸ºç»¿è‰²ã€‚</p>

<h6>3ï¼‰åˆ›å»ºä¸€ä¸ªCommand Buffer</h6>

<p>ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªcommand bufferã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡ä¸ºä¸€ç³»åˆ—è¿™ä¸€å¸§æƒ³è¦æ‰§è¡Œçš„æ¸²æŸ“å‘½ä»¤ã€‚é…·çš„æ˜¯åœ¨ä½ æäº¤command bufferä¹‹å‰ï¼Œæ²¡æœ‰äº‹æƒ…ä¼šçœŸæ­£å‘ç”Ÿï¼Œè¿™æ ·ç»™ä½ å¯¹äº‹ç‰©åœ¨ä½•æ—¶å‘ç”Ÿæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ§åˆ¶ã€‚åˆ›å»ºä¸€ä¸ªcommand bufferå¾ˆç®€å•ï¼Œåªè¦åœ¨renderå‡½æ•°æœ«å°¾åŠ ä¸Šè¿™è¡Œä»£ç ï¼š</p>

<pre><code> 1 let commandBuffer = commandQueue.commandBuffer()  
</code></pre>

<p>ä¸€ä¸ªcommand bufferåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ¸²æŸ“æŒ‡ä»¤ï¼ˆrender commandsï¼‰ã€‚è®©æˆ‘ä»¬ä¸‹é¢åˆ›å»ºä¸€ä¸ªã€‚</p>

<h6>4ï¼‰åˆ›å»ºä¸€ä¸ªæ¸²æŸ“å‘½ä»¤ç¼–ç å™¨(Render Command Encoder)</h6>

<p>ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ¸²æŸ“å‘½ä»¤ï¼ˆrender commandï¼‰ï¼Œä½ ä½¿ç”¨ä¸€ä¸ªåå«render command encoderçš„å¯¹è±¡ã€‚åœ¨renderå‡½æ•°çš„æœ€åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>

<pre><code>let renderEncoder = commandBuffer.renderCommandEncoderWithDescriptor(renderPassDescriptor) 
renderEncoder.setRenderPipelineState(pipelineState) 

renderEncoder.setVertexBuffer(vertexBuffer, offset: 0, atIndex: 0) 

renderEncoder.drawPrimitives(.Triangle, vertexStart: 0, vertexCount: 3, instanceCount: 1) 

renderEncoder.endEncoding()
</code></pre>

<p>è¿™é‡Œä½ åˆ›å»ºä¸€ä¸ªcommand encoderï¼Œå¹¶æŒ‡å®šä½ ä¹‹å‰åˆ›å»ºçš„pipelineå’Œé¡¶ç‚¹ã€‚æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ï¼Œè°ƒç”¨drawPrimitives(vertexStart:vertexCount:instanceCount:)ã€‚</p>

<p>è¿™é‡Œä½ ä½ å‘Šè¯‰GPUï¼Œè®©å®ƒåŸºäºvertex bufferç”»ä¸€ç³»åˆ—çš„ä¸‰è§’å½¢ã€‚æ¯ä¸ªä¸‰è§’å½¢ç”±ä¸‰ä¸ªé¡¶ç‚¹ç»„æˆï¼Œä»vertex buffer ä¸‹æ ‡ä¸º0çš„é¡¶ç‚¹å¼€å§‹ï¼Œæ€»å…±æœ‰ä¸€ä¸ªä¸‰è§’å½¢ã€‚</p>

<p>å½“ä½ å®Œæˆåï¼Œä½ åªè¦è°ƒç”¨ endEncoding()ã€‚</p>

<h6>5ï¼‰æäº¤ä½ çš„Command Buffer</h6>

<p>æœ€åä¸€æ­¥æ˜¯æäº¤command bufferã€‚åœ¨renderå‡½æ•°æœ€åæ·»åŠ è¿™äº›ä»£ç ï¼š</p>

<pre><code>commandBuffer.presentDrawable(drawable)
commandBuffer.commit()
</code></pre>

<p>ç¬¬ä¸€è¡Œéœ€è¦ä¿è¯æ–°çº¹ç†ä¼šåœ¨ç»˜åˆ¶å®Œæˆåç«‹å³å‡ºç°ã€‚ç„¶åä½ æŠŠäº‹åŠ¡(transaction)æäº¤ï¼ŒæŠŠä»»åŠ¡äº¤ç»™GPUã€‚è¿‡å»æˆ‘ä»¬æ•²äº†ä¸å°‘ä»£ç ï¼Œä¸è¿‡ç°åœ¨ç»ˆäºç»“æŸäº†ã€‚ç¼–è¯‘å¹¶è¿è¡Œè¿™ä¸ªåº”ç”¨ï¼š</p>

<p>æˆ‘è§è¿‡æœ€èµçš„ä¸‰è§’å½¢ï¼</p>

<blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ çš„åº”ç”¨å´©æºƒäº†ï¼Œè¯·ç¡®å®šä½ åœ¨ä¸€å°æ‹¥æœ‰A7èŠ¯ç‰‡çœŸæœºï¼ˆiPhone 5S,iPad Air,iPad mini2 ,éæ¨¡æ‹Ÿå™¨ï¼‰è¿è¡Œã€‚</p>

<p>æœ€å:è¿™æ˜¯æˆ‘ä»¬æ•™ç¨‹æœ€ç»ˆçš„é¡¹ç›®ã€‚</p></blockquote>

<pre><code>æ­å–œä½ ï¼Œä½ å­¦åˆ°äº†å¾ˆå¤šå…³äºMetal APIçš„çŸ¥è¯†ï¼ä½ ç°åœ¨å¯¹Metalçš„ä¸€äº›é‡è¦çš„æ¦‚å¿µæœ‰äº†äº†è§£ï¼Œæ¯”å¦‚ï¼šshadersã€devicesã€command buffersï¼Œpipelineç­‰ç­‰ã€‚
</code></pre>

<p>æˆ‘å¯èƒ½ä¼šå†™æ›´å¤šè¿™ç³»åˆ—çš„æ•™ç¨‹ï¼Œè¦†ç›–uniformsï¼Œ3Dï¼Œçº¹ç†ï¼Œå…‰ç…§ï¼Œä»¥åŠå¯¼å…¥æ¨¡å‹ã€‚å¦‚æœä½ æ„Ÿåˆ°æœ‰å…´è¶£ã€å¹¶æƒ³çœ‹åˆ°æ›´å¤šæ•™ç¨‹çš„è¯ï¼Œè¯·ç•™ä¸‹ä½ çš„è¯„è®ºã€‚åŒæ—¶ï¼Œç¡®å®šæŸ¥çœ‹è‹¹æœä¸€äº›å¾ˆå¥½çš„èµ„æºï¼š</p>
</div>
  
  




| <a href="/blog/2015/10/10/metal/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/06/quan-ping-fan-hui-(runtime)/">å…¨å±è¿”å›ï¼ˆRuntimeï¼‰</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>å‰è¨€</p>

<p>æ­¤æ¬¡æ–‡ç« ï¼Œè®²è¿°çš„æ˜¯å¯¼èˆªæ§åˆ¶å™¨å…¨å±æ»‘åŠ¨è¿”å›æ•ˆæœï¼Œè€Œä¸”ä»£ç é‡éå¸¸å°‘ï¼Œ10è¡Œå†…æå®šã€‚</p></blockquote>

<p>å¦‚æœå–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥å…³æ³¨æˆ‘ï¼Œä¹Ÿå¯ä»¥æ¥å°ç å“¥ï¼Œäº†è§£ä¸‹æˆ‘ä»¬çš„iOSåŸ¹è®­è¯¾ç¨‹ã€‚é™†ç»­è¿˜ä¼šæœ‰æ›´æ–°ing&hellip;.</p>

<h5>ä¸€ã€è‡ªå®šä¹‰å¯¼èˆªæ§åˆ¶å™¨</h5>

<p>ç›®çš„ï¼šä»¥åéœ€è¦ä½¿ç”¨å…¨å±æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼Œå°±ä½¿ç”¨è‡ªå·±å®šä¹‰çš„å¯¼èˆªæ§åˆ¶å™¨ã€‚</p>

<h5>äºŒã€åˆ†æå¯¼èˆªæ§åˆ¶å™¨ä¾§æ»‘åŠŸèƒ½</h5>

<p>æ•ˆæœï¼šå¯¼èˆªæ§åˆ¶å™¨é»˜è®¤è‡ªå¸¦äº†ä¾§æ»‘åŠŸèƒ½ï¼Œå½“ç”¨æˆ·åœ¨ç•Œé¢çš„å·¦è¾¹æ»‘åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰ä¾§æ»‘åŠŸèƒ½ã€‚</p>

<p>ç³»ç»Ÿè‡ªå¸¦çš„ä¾§æ»‘æ•ˆæœï¼š</p>

<p>åˆ†æï¼š</p>

<ul>
<li><p>1.å¯¼èˆªæ§åˆ¶å™¨çš„viewè‡ªå¸¦äº†æ»‘åŠ¨æ‰‹åŠ¿ï¼Œåªä¸è¿‡æ‰‹åŠ¿çš„è§¦å‘èŒƒå›´åªèƒ½åœ¨å·¦è¾¹ã€‚</p></li>
<li><p>2.å½“ç”¨æˆ·åœ¨ç•Œé¢å·¦è¾¹æ‹–åŠ¨ï¼Œå°±ä¼šè§¦å‘æ»‘åŠ¨æ‰‹åŠ¿æ–¹æ³•ï¼Œå¹¶ä¸”æœ‰æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼Œè¯´æ˜ç³»ç»Ÿæ‰‹åŠ¿è§¦å‘çš„æ–¹æ³•å·²ç»å®ç°äº†æ»‘åŠ¨è¿”å›åŠŸèƒ½ã€‚</p></li>
<li><p>3.ä¸ºä»€ä¹ˆè¯´ç³»ç»Ÿæ‰‹åŠ¿è§¦å‘çš„æ–¹æ³•å·²ç»å®ç°äº†æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼Ÿ</p></li>
</ul>


<h3>åŸå› ï¼š</h3>

<p>åˆ›å»ºæ»‘åŠ¨æ‰‹åŠ¿å¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦ç»‘å®šç›‘å¬è€…ï¼Œå½“è§¦å‘æ‰‹åŠ¿çš„æ—¶å€™ä¼šè°ƒç”¨targetçš„actionã€‚</p>

<p>UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:action];
å½“ç”¨æˆ·åœ¨ç•Œé¢å·¦è¾¹æ»‘åŠ¨ï¼Œæœ‰æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼Œè¿™æ˜¯å› ä¸ºè§¦å‘æ‰‹åŠ¿äº†ï¼Œè°ƒç”¨targetçš„actionæ–¹æ³•ï¼Œè¯´æ˜actionæ–¹æ³•å†…éƒ¨å®ç°æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼Œå¦åˆ™å°±ä¸ä¼šæœ‰æ»‘åŠ¨è¿”å›æ•ˆæœã€‚</p>

<h5>ä¸‰ã€å®ç°å…¨å±æ»‘åŠ¨åŠŸèƒ½åˆ†æ</h5>

<p>æ‰“å°å¯¼èˆªæ§åˆ¶å™¨è‡ªå¸¦çš„æ»‘åŠ¨æ‰‹åŠ¿ï¼Œçœ‹ä¸‹å®ƒçš„çœŸå®é¢ç›®ã€‚</p>

<p>ç³»ç»Ÿè‡ªå¸¦çš„æ»‘åŠ¨æ‰‹åŠ¿interactivePopGestureRecognizer</p>

<pre><code>//  selfæŒ‡å‘çš„å¯¼èˆªæ§åˆ¶å™¨ï¼Œåœ¨å¯¼èˆªæ§åˆ¶å™¨çš„viewDidLoadæ–¹æ³•æ‰“å° 
- (void)viewDidLoad { 
    [super viewDidLoad]; 
    NSLog(@"%@",self.interactivePopGestureRecognizer); 
} 
</code></pre>

<p>ç”±å›¾ä¸­å¯çŸ¥ï¼š</p>

<ul>
<li><p>1.ç³»ç»Ÿè‡ªå¸¦çš„æ‰‹åŠ¿æ˜¯UIScreenEdgePanGestureRecognizerç±»å‹å¯¹è±¡,å±å¹•è¾¹ç¼˜æ»‘åŠ¨æ‰‹åŠ¿</p></li>
<li><p>2.ç³»ç»Ÿè‡ªå¸¦æ‰‹åŠ¿targetæ˜¯_UINavigationInteractiveTransitionç±»å‹çš„å¯¹è±¡</p></li>
<li><p>3.targetè°ƒç”¨çš„actionæ–¹æ³•åå«handleNavigationTransition:</p></li>
</ul>


<p>åˆ†æï¼š</p>

<p>UIScreenEdgePanGestureRecognizerï¼Œçœ‹åç§°å°±çŸ¥é“ï¼Œè¿™ä¸ªæ‰‹åŠ¿çš„èŒƒå›´åªèƒ½åœ¨å±å¹•çš„å‘¨è¾¹ï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸ªæ‰‹åŠ¿ï¼Œç³»ç»Ÿè‡ªå¸¦çš„æ»‘åŠ¨æ•ˆæœï¼Œåªèƒ½å®ç°ä¾§è¾¹æ»‘åŠ¨ã€‚</p>

<h5>å››ã€å¦‚ä½•å®ç°å…¨å±æ»‘åŠ¨åŠŸèƒ½</h5>

<p>ç»™è‡ªå·±çš„å¯¼èˆªæ§åˆ¶å™¨ï¼Œæ·»åŠ ä¸€ä¸ªå…¨å±çš„æ»‘åŠ¨æ‰‹åŠ¿ï¼Œè°ƒç”¨ç³»ç»Ÿè‡ªå¸¦æ»‘åŠ¨æ‰‹åŠ¿çš„targetçš„actionæ–¹æ³•ï¼Œåˆ©ç”¨ç³»ç»Ÿå®ç°çš„æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼ŒåŠ ä¸Šè‡ªå·±å…¨å±æ»‘åŠ¨æ‰‹åŠ¿ï¼Œå°±æœ‰å…¨å±æ»‘åŠ¨åŠŸèƒ½äº†ã€‚</p>

<p>é—®é¢˜ï¼šå¦‚ä½•æ‹¿åˆ°ç³»ç»Ÿè‡ªå¸¦çš„targetå¯¹è±¡?ï¼Œactionæ–¹æ³•åå·²ç»çŸ¥é“ï¼Œè€Œä¸”ç³»ç»Ÿè‚¯å®šåœ¨targetå¯¹è±¡å®ç°äº†ï¼Œåªè¦æ‹¿åˆ°targetå¯¹è±¡ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±è¡Œã€‚</p>

<p>é€šè¿‡æ‰“å°ç³»ç»Ÿè‡ªå¸¦çš„æ»‘åŠ¨æ‰‹åŠ¿çš„ä»£ç†ï¼Œå‘ç°æ­£å¥½æ˜¯_UINavigationInteractiveTransitionå¯¹è±¡ï¼Œå› æ­¤æˆ‘çŒœæµ‹è¿™ä¸ªä»£ç†å¯¹è±¡å°±æ˜¯targetå¯¹è±¡,åªè¦æ‹¿åˆ°å®ƒï¼Œå°±æ‹¿åˆ°ç³»ç»Ÿè‡ªå¸¦æ»‘åŠ¨æ‰‹åŠ¿çš„targetå¯¹è±¡ã€‚</p>

<pre><code>// æ‰“å°ç³»ç»Ÿè‡ªå¸¦æ»‘åŠ¨æ‰‹åŠ¿çš„ä»£ç†å¯¹è±¡ 
SLog(@"%@",self.interactivePopGestureRecognizer.delegate); 
</code></pre>

<p>å¯¼èˆªæ§åˆ¶å™¨å…¨å±æ»‘åŠ¨æ³¨æ„ç‚¹:</p>

<ul>
<li><p>1.ç¦æ­¢ç³»ç»Ÿè‡ªå¸¦æ»‘åŠ¨æ‰‹åŠ¿ä½¿ç”¨ã€‚</p></li>
<li><p>2.åªæœ‰å¯¼èˆªæ§åˆ¶å™¨çš„éæ ¹æ§åˆ¶å™¨æ‰éœ€è¦è§¦å‘æ‰‹åŠ¿ï¼Œä½¿ç”¨æ‰‹åŠ¿ä»£ç†ï¼Œæ§åˆ¶æ‰‹åŠ¿è§¦å‘ã€‚</p></li>
</ul>


<p>å…¨å±æ»‘åŠ¨ä»£ç å®ç°</p>

<pre><code>- (void)viewDidLoad { 
    [super viewDidLoad]; 
    // è·å–ç³»ç»Ÿè‡ªå¸¦æ»‘åŠ¨æ‰‹åŠ¿çš„targetå¯¹è±¡ 
    id target = self.interactivePopGestureRecognizer.delegate; 
    // åˆ›å»ºå…¨å±æ»‘åŠ¨æ‰‹åŠ¿ï¼Œè°ƒç”¨ç³»ç»Ÿè‡ªå¸¦æ»‘åŠ¨æ‰‹åŠ¿çš„targetçš„actionæ–¹æ³• 
    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)]; 
    // è®¾ç½®æ‰‹åŠ¿ä»£ç†ï¼Œæ‹¦æˆªæ‰‹åŠ¿è§¦å‘ 
    pan.delegate = self; 
    // ç»™å¯¼èˆªæ§åˆ¶å™¨çš„viewæ·»åŠ å…¨å±æ»‘åŠ¨æ‰‹åŠ¿ 
    [self.view addGestureRecognizer:pan]; 
    // ç¦æ­¢ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ»‘åŠ¨æ‰‹åŠ¿ 
    self.interactivePopGestureRecognizer.enabled = NO; 
} 
// ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼šæ¯æ¬¡è§¦å‘æ‰‹åŠ¿ä¹‹å‰éƒ½ä¼šè¯¢é—®ä¸‹ä»£ç†ï¼Œæ˜¯å¦è§¦å‘ã€‚ 
// ä½œç”¨ï¼šæ‹¦æˆªæ‰‹åŠ¿è§¦å‘ 
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer 
{ 
    // æ³¨æ„ï¼šåªæœ‰éæ ¹æ§åˆ¶å™¨æ‰æœ‰æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼Œæ ¹æ§åˆ¶å™¨æ²¡æœ‰ã€‚ 
    // åˆ¤æ–­å¯¼èˆªæ§åˆ¶å™¨æ˜¯å¦åªæœ‰ä¸€ä¸ªå­æ§åˆ¶å™¨ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå­æ§åˆ¶å™¨ï¼Œè‚¯å®šæ˜¯æ ¹æ§åˆ¶å™¨ 
    if (self.childViewControllers.count == 1) { 
        // è¡¨ç¤ºç”¨æˆ·åœ¨æ ¹æ§åˆ¶å™¨ç•Œé¢ï¼Œå°±ä¸éœ€è¦è§¦å‘æ»‘åŠ¨æ‰‹åŠ¿ï¼Œ 
        return NO; 
    } 
    return YES; 
} 
</code></pre>
</div>
  
  




| <a href="/blog/2015/10/06/quan-ping-fan-hui-(runtime)/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/22/qie-huan-kong-zhi-qi/">åˆ‡æ¢æ§åˆ¶å™¨</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><p>ä»ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨çš„å‡ ç§æ–¹å¼</p>

<h4>1,æ¨¡æ€(modal)ç”»é¢çš„æ˜¾ç¤ºæ–¹æ³•ï¼š</h4>

<p>ä¾‹å¦‚iphoneé€šè®¯å½•ç®¡ç†ç¨‹åºä¸­ï¼Œè¿½åŠ æ–°çš„é€šè®¯çºªå½•æ—¶ï¼Œå°±æ˜¯ä½¿ç”¨è¿™ç§æ¨¡æ€ç”»é¢
ä¾‹ï¼šç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œè¿›å…¥å¦ä¸€ä¸ªç•Œé¢
    - (IBAction)pressAbout:(id)sender {</p>

<pre><code>iCocosViewController *iCocos=[[[iCocosViewController alloc] initWithNibName:@"iCocosViewController" bundle:nil] autorelease];

[self presentModalViewController:aboutanimated:YES];//æ˜¾ç¤ºæ¨¡æ€ç”»é¢

å…³é—­æ¨¡æ€ç”»é¢çš„æ–¹æ³•ï¼š

[self dissmissModalViewControllerAnimationed:YES];
</code></pre>

<h4>2,SwitchViewControllerä¸­æœ‰2ä¸ªæ§åˆ¶å™¨çš„å±æ€§ï¼šBviewController,CViewController</h4>

<ul>
<li>ä½¿ç”¨æ–¹æ³•ï¼šinsertSubview: atIndex:
è¿™ç§ç”»é¢è·³è½¬æ–¹æ³•å¹¶éæœ€ä½³çš„è·³è½¬æ–¹æ³•ï¼š</li>
<li>å®é™…ä¸Šå¹¶éçœŸçš„å®ç°äº†ä¸¤ä¸ªç”»é¢é—´çš„è·³è½¬ï¼Œè€Œæ˜¯åŒæ—¶å¯åŠ¨äº†2ä¸ªç”»é¢ï¼Œæ§åˆ¶å…¶ä¸­å“ªä¸€ä¸ªç”»é¢æ˜¾ç¤ºåœ¨å‰å°ï¼Œå“ªä¸€ä¸ªç”»é¢æ˜¾ç¤ºåœ¨åå°è€Œå·²ã€‚</li>
<li>è¿™ç§ç”»é¢è·³è½¬æ–¹å¼æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼Œå³å½“ç”»é¢æ•°é‡å¢åŠ æ—¶ï¼Œç”»é¢è·³è½¬çš„å®ç°ä»£ç å°†æœˆæ¥è¶Šå¤æ‚ï¼Œè€Œä¸”å„ä¸ªç”»é¢é—´ä¸å¯é¿å…çš„æœ‰ç›¸äº’ä¾èµ–å…³ç³»ã€‚</li>
</ul>


<h4>3,UITabBarControllerå®ç°å¹¶åˆ—ç”»é¢è·³è½¬ï¼ˆè¿™é‡Œå…¶å®å°±æ˜¯windowçš„åˆ‡èŠ±ï¼‰</h4>

<pre><code>//å°†5ä¸ªviewControllerå®ä¾‹æ”¾å…¥TabBarçš„viewcontrollerså±æ€§ä¸­    

self.tabBarController.viewControllers = @[navFrist, navSecond,navThird,navFourth,navFifth];   

self.window.rootViewController = self.tabBarController;

[self.window addSubview:self.tabBarController.view];//å°†æ ¹æ§åˆ¶å™¨çš„è§†å›¾åŠ åˆ°åº”ç”¨ç¨‹åºä¸»çª—å£
</code></pre>

<h4>4,UINavigationControllerå®ç°å¤šå±‚ç”»é¢è·³è½¬ï¼Œåœ¨å¯¼èˆªæ§åˆ¶å™¨ä¸­ï¼Œè½½å…¥æœ‰å±‚çº§å…³ç³»çš„ç•Œé¢</h4>

<pre><code>- (IBAction)addRightAction:(id)sender
{
    iCocosViewController *iCocos=[[[iCocosViewController alloc]initWithNibName:@"iCocosViewController" bundle:nil] autorelease];

[self.navigationController pushViewController:aiCocos animated:YES];
}
</code></pre>
</div>
  
  




| <a href="/blog/2015/09/22/qie-huan-kong-zhi-qi/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/21/scrollviewhui-dao-ding-bu-fu-yuan/">ScrollViewå›åˆ°é¡¶éƒ¨å¤åŸ</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><p>ç›¸ä¿¡ç»†å¿ƒçš„å¼€å‘è€…éƒ½ä¼šå‘ç°scrollViewè‡ªå¸¦ä¸€ä¸ªåŠŸèƒ½,å½“ç”¨æˆ·ç‚¹å‡»é¡¶éƒ¨çš„çŠ¶æ€æ æ—¶,scrollViewçš„ContentOffset.yè½´ä¼šè‡ªåŠ¨æ»šåŠ¨åˆ°åˆå§‹ä½ç½®,æ•ˆæœå¦‚å›¾æ‰€ç¤º:</p>

<blockquote><p>å•ä¸ªscrollViewå•å‡»é¡¶éƒ¨çŠ¶æ€æ ç³»ç»Ÿè‡ªå¸¦åŠŸèƒ½å±•ç¤º</p></blockquote>

<p>è¿™ä¸ªåŠŸèƒ½å¯¹ç”¨æˆ·æ¥è¯´éå¸¸å®ç”¨,å°¤å…¶æ˜¯åœ¨scrollView(TableView, WebView, CollectionViewä¸€åˆ‡ç»§æ‰¿scrollViewçš„æ§ä»¶)å±•ç¤ºçš„å†…å®¹å¾ˆå¤š,å½“ç”¨æˆ·ç¿»çœ‹å¾ˆä¹…ä»¥å,æƒ³å›åˆ°æœ€é¡¶éƒ¨æ—¶,åªéœ€å•å‡»ä¸€ä¸‹é¡¶éƒ¨çš„çŠ¶æ€æ ä½ç½®å°±å¯ä»¥è½»æ¾è¿”å›åˆ°é¡¶éƒ¨(è¿™é‡Œåæ§½ä¸‹.è²Œä¼¼å¾ˆå¤šç”¨æˆ·éƒ½ä¸çŸ¥é“æœ‰è¿™ä¸ªåŠŸèƒ½),è€Œä¸ç”¨ä½¿åŠ²ç”¨æ‰‹æ»‘åŠ¨åˆ°é¡¶éƒ¨.</p>

<ul>
<li>å¯æ˜¯åŠŸèƒ½åœ¨å½“å‰æ§åˆ¶å™¨æœ‰å¤šä¸ªscrollView(TableView, WebView, CollectionViewä¸€åˆ‡ç»§æ‰¿scrollViewçš„æ§ä»¶)çš„æ—¶å€™å°±ä¼šå¤±æ•ˆ,æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º:</li>
</ul>


<p>å½“æ§åˆ¶å™¨å†…æœ‰å¤šä¸ªscrollViewæ—¶,ç³»ç»Ÿè‡ªå¸¦çš„æ»šåŠ¨åˆ°é¡¶çš„åŠŸèƒ½å°±ä¼šå¤±æ•ˆ</p>

<p>å®é™…å¼€å‘ä¸­,æˆ‘ä»¬çš„äº§å“åœ¨åŒä¸€ä¸ªæ§åˆ¶å™¨ç»å¸¸ä¼šæœ‰å¤šä¸ªscrollViewç»„åˆåœ¨ä¸€èµ·çš„æƒ…å†µ,è¿™å°±æ„å‘³ç€ç³»ç»Ÿçš„æ–¹æ³•å·²ç»å¤±æ•ˆäº†,éœ€è¦å¼€å‘äººå‘˜è‡ªå·±æ¥å®ç°è¿™ä¸ªæ•ˆæœ,ä¸‹é¢æˆ‘ä»¬å°±æ¥æå®šè¿™ä¸ªéœ€æ±‚</p>

<blockquote><p>æˆ‘ä»¬åˆ†æä¸‹åŸç”Ÿçš„æ–¹æ³•ä¸ºä»€ä¹ˆä¼šå¤±æ•ˆ,å½“ä¸€ä¸ªæ§åˆ¶å™¨å†…åªæœ‰ä¸€ä¸ªscrollViewæ—¶,ç‚¹å‡»çŠ¶æ€æ ,ç³»ç»Ÿä¼šéå†å½“å‰keyWindowçš„å­æ§ä»¶,å‘ç°å­æ§ä»¶ä¸­åªæœ‰ä¸€ä¸ªscrollViewä¼šè°ƒç”¨è¿™ä¸ªscrollViewçš„setContentOffset: animated:çš„è¿™ä¸ªæ–¹æ³•,å°†scrollViewçš„contentOffset.yå€¼ä¿®æ”¹ä¸ºåˆå§‹å€¼,ä½†æ˜¯å½“å­æ§ä»¶ä¸­åˆå¤šä¸ªscrollViewæ—¶,ç³»ç»Ÿä¼šä¸çŸ¥é“æ‰ç”¨å“ªä¸€ä¸ªscrollViewè€Œå¤±æ•ˆ,çŸ¥é“è¿™ç‚¹æˆ‘ä»¬å°±çŸ¥é“è¯¥å¦‚ä½•æå®šè¿™ä¸ªé—®é¢˜äº†</p></blockquote>

<p>è¿™é‡Œå°±ç›´æ¥å°†è§£å†³æ€è·¯ä¸€ä¸€å†™å‡ºæ¥ä¸å°†ä»£ç åˆ†æ®µå±•ç¤ºäº†,åœ¨ä»£ç ä¸­æˆ‘åŠ äº†è¯¦ç»†çš„æ³¨é‡Šobjective-cçš„å¥—è·¯å’ŒswiftåŸºæœ¬ä¸€æ ·,åœ¨æœ€åä¼šå°†Swiftå’Œobjective-cçš„ä»£ç ä¸€èµ·æ”¾ä¸Š,å¦‚æœéœ€è¦ç›´æ¥è§£å†³é—®é¢˜çš„ç«¥é‹å¯ä»¥ç›´æ¥å°†ä»£ç æ‹·è´åˆ°å·¥ç¨‹é‡Œå³å¯</p>

<ul>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªtopWindowç»§æ‰¿è‡³NSObject,è¿™é‡Œæˆ‘ä»¬è€ƒè™‘å°†è¿™ä¸ªåŠŸèƒ½å®Œå…¨å°è£…èµ·æ¥,æ‰€ä»¥æ‰€æœ‰çš„æ–¹æ³•éƒ½ç”¨çš„ç±»æ–¹æ³•,æ‰€ä»¥ç”¨æœ€åŸºæœ¬çš„ç±»å°±å¯ä»¥</li>
<li>åœ¨initializeæ–¹æ³•ä¸­åˆå§‹åŒ–topWIndow,å°†topWIndowçš„çº§åˆ«æ”¹æˆæœ€é«˜çš„UIWindowLevelAlertçº§åˆ«,è®¾ç½®topWindowä½ç½®,å¹¶ä¸”æ·»åŠ ç‚¹å‡»æ‰‹åŠ¿</li>
<li>åœ¨topWIndowè¢«ç‚¹å‡»è°ƒç”¨çš„æ–¹æ³•ä¸­,æˆ‘ä»¬æ‹¿å‡ºUIApplicationçš„keyWindow,éå†keyWindowçš„æ‰€æœ‰å­æ§ä»¶,å¦‚æœæ»¡è¶³æ˜¯scrollViewåŒæ—¶åˆæ˜¾ç¤ºåœ¨å½“å‰keyWindowæ¡ä»¶æ—¶,å°†subViewçš„contentOffsetçš„yå€¼å›å¤åˆ°åŸå§‹</li>
<li>ç„¶åé‡‡ç”¨é€’å½’çš„å¥—è·¯åœ¨éå†subViewå†…æ—¶å€™æœ‰æ»¡è¶³æ¡ä»¶çš„å­æ§ä»¶,ç›´åˆ°æ²¡æœ‰æ»¡è¶³æ¡ä»¶æ—¶ä¼šåœæ­¢</li>
</ul>


<h4>Swiftçš„ä»£ç </h4>

<pre><code>import UIKit
class TopWindow: UIWindow {
    private static let window_: UIWindow = UIWindow()
    ///  ç±»åˆå§‹åŒ–æ–¹æ³•,ä¿è¯window_åªè¢«åˆ›å»ºä¸€æ¬¡
    override class func initialize() {
        window_.frame = CGRectMake(0, 0, global.appWidth, 20)
        window_.windowLevel = UIWindowLevelAlert
        window_.addGestureRecognizer(UITapGestureRecognizer(target: self, action: "topWindowClick"))
    }
    class func topWindowClick() {
        // éå†å½“å‰ä¸»çª—å£æ‰€æœ‰view,å°†æ»¡è¶³æ¡ä»¶çš„scrollViewæ»šåŠ¨å›åŸä½
        searchAllowScrollViewInView(UIApplication.sharedApplication().keyWindow!)
    }
    private class func searchAllowScrollViewInView(superView: UIView) {
        for subview: UIView in superView.subviews as! [UIView] {
            if subview.isKindOfClass(UIScrollView.self) &amp;&amp; superView.viewIsInKeyWindow() {
                // æ‹¿åˆ°scrollViewçš„contentOffset
                var offest = (subview as! UIScrollView).contentOffset
                // å°†offestçš„yè½´è¿˜åŸæˆæœ€å¼€å§‹çš„å€¼
                offest.y = -(subview as! UIScrollView).contentInset.top
                // é‡æ–°è®¾ç½®scrollViewçš„å†…å®¹
                (subview as! UIScrollView).setContentOffset(offest, animated: true)
            }
            // é€’å½’,è®©å­æ§ä»¶å†æ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­æ—¶å€™è¿˜æœ‰æ»¡è¶³æ¡ä»¶çš„view
            searchAllowScrollViewInView(subview)
        }
    }
    ///  æ·»åŠ topWindow,ä½¿æ‰‹åŠ¿ç”Ÿæ•ˆ
    class func showTopWindow() {
        window_.hidden = false
    }
    ///  éšè—topWindow,ç§»é™¤æ‰‹åŠ¿
    class func hiddenTopWindow() {
        window_.hidden = true
    }
}
///  å¯¹UIViewçš„ä¸€ä¸ªæ‰©å±•
extension UIView {
    ///  åˆ¤æ–­è°ƒç”¨æ–¹æ³•çš„viewæ˜¯å¦åœ¨keyWindowä¸­
    func viewIsInKeyWindow() -&gt; Bool {
        let keyWindow = UIApplication.sharedApplication().keyWindow!
        // å°†å½“å‰viewçš„åæ ‡ç³»è½¬æ¢åˆ°window.bounds
        let viewNewFrame = keyWindow.convertRect(self.frame, fromView: self.superview)
        let keyWindowBounds = keyWindow.bounds
        // åˆ¤æ–­å½“å‰viewæ˜¯å¦åœ¨keyWindowçš„èŒƒå›´å†…
        let isIntersects = CGRectIntersectsRect(viewNewFrame, keyWindowBounds)
        // åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ‰€æœ‰æ¡ä»¶
        return !self.hidden &amp;&amp; self.alpha &gt; 0.01 &amp;&amp; self.window == keyWindow &amp;&amp; isIntersects
    }   
}
</code></pre>

<p>åœ¨AppDelegateé‡Œ,ç¨‹åºå¯åŠ¨å®Œæˆæ–¹æ³•æ—¶æ·»åŠ å°±OKäº†</p>

<pre><code>  func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
      // æ·»åŠ é¡¶éƒ¨çš„window
      TopWindow.showTopWindow()
      return true
  }
</code></pre>

<p>éœ€è¦æ³¨æ„æ·»åŠ äº†è‡ªå®šä¹‰çš„windowå,æ§åˆ¶å™¨çš„æ”¹å˜çŠ¶æ€æ çŠ¶æ€æ–¹æ³•ä¼šå¤±æ•ˆ,å¯ä»¥åœ¨info.plistä¸­å°†æ”¹å˜çŠ¶æ€æ çš„ç®¡ç†æƒäº¤ç»™UIApplicationè§£å†³,æˆ–è€…åœ¨éœ€è¦æ”¹å˜çŠ¶æ€æ çš„æ§åˆ¶å™¨ä¸­è°ƒç”¨TopWindow.hiddenTopWindow()å³å¯,æˆ–è€…ç›´æ¥æ”¹info.plist,ç”¨UIApplication.sharedApplication().setStatusBarStyleæ¥ç®¡ç†</p>

<h4>Objective-Cä»£ç </h4>

<p>.hæ–‡ä»¶åªæš´éœ²æ˜¾ç¤ºå’Œéšè—æ–¹æ³•</p>

<pre><code>#import @interface WNXTopWindow : NSObject
+ (void)show;
+ (void)hide;
@end
</code></pre>

<p>.mæ–‡ä»¶</p>

<pre><code>#import "WNXTopWindow.h"
@implementation WNXTopWindow
static UIWindow *window_;
//åˆå§‹åŒ–window
+ (void)initialize {
  window_ = [[UIWindow alloc] init];
  window_.frame = CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, 20);
  window_.windowLevel = UIWindowLevelAlert;
  [window_ addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(windowClick)]];
}  
+ (void)show {
  window_.hidden = NO;
}
+ (void)hide {
  window_.hidden = YES;
}
// ç›‘å¬çª—å£ç‚¹å‡»
+ (void)windowClick {
  UIWindow *window = [UIApplication sharedApplication].keyWindow;
  [self searchScrollViewInView:window];
}
+ (void)searchScrollViewInView:(UIView *)superview {
  for (UIScrollView *subview in superview.subviews) {
      // å¦‚æœæ˜¯scrollview, æ»šåŠ¨æœ€é¡¶éƒ¨
      if ([subview isKindOfClass:[UIScrollView class]] &amp;&amp; [subview isShowingOnKeyWindow]) {
          CGPoint offset = subview.contentOffset;
          offset.y = - subview.contentInset.top;
          [subview setContentOffset:offset animated:YES];
      }
      // é€’å½’ç»§ç»­æŸ¥æ‰¾å­æ§ä»¶
      [self searchScrollViewInView:subview];
  }
}
+ (BOOL)isShowingOnKeyWindow:(UIView *)view {
  // ä¸»çª—å£
  UIWindow *keyWindow = [UIApplication sharedApplication].keyWindow;
  // ä»¥ä¸»çª—å£å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹, è®¡ç®—selfçš„çŸ©å½¢æ¡†
  CGRect newFrame = [keyWindow convertRect:view.frame fromView:view.superview];
  CGRect winBounds = keyWindow.bounds;
  // ä¸»çª—å£çš„bounds å’Œ selfçš„çŸ©å½¢æ¡† æ˜¯å¦æœ‰é‡å 
  BOOL intersects = CGRectIntersectsRect(newFrame, winBounds);
  return !view.isHidden &amp;&amp; view.alpha &gt; 0.01 &amp;&amp; view.window == keyWindow &amp;&amp; intersects;
}
@end
</code></pre>

<p>åŒæ ·,ä¹Ÿæ˜¯åœ¨ç¨‹åºåˆå§‹åŒ–å®ŒæˆAppDelegateæ–‡ä»¶ä¸­æ˜¾ç¤ºtopWindow,æ•´ä¸ªå·¥ç¨‹è¿™ä¸ªé—®é¢˜å°±ç»Ÿç»Ÿè§£å†³äº†</p>

<pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  // æ·»åŠ ä¸€ä¸ªwindow, ç‚¹å‡»è¿™ä¸ªwindow, å¯ä»¥è®©å±å¹•ä¸Šçš„scrollViewæ»šåˆ°æœ€é¡¶éƒ¨
  [WNXTopWindow show];
  return YES;
}
</code></pre>
</div>
  
  




| <a href="/blog/2015/08/21/scrollviewhui-dao-ding-bu-fu-yuan/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/01/chuan-zhi-fang-shi-zong-jie/">ä¼ å€¼æ–¹å¼æ€»ç»“</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>ç®€å•æ€»ç»“

<ul>
<li>ä»£ç†</li>
<li>Block</li>
<li>é€šçŸ¥</li>
</ul>
</li>
</ul>


<hr />

<ul>
<li>ç®€å•å®ç”¨

<ul>
<li>ä»£ç†</li>
<li>Block</li>
<li>é€šçŸ¥</li>
</ul>
</li>
</ul>


<p>è™½ç„¶è¿™ä¸€æœŸçš„ä¸»é¢˜æ˜¯å…³äºFoundation Frameworkçš„ï¼Œä¸è¿‡æœ¬æ–‡ä¸­è¿˜ä»‹ç»äº†ä¸€äº›è¶…å‡ºFoundation Framework(KVOå’ŒNotification)èŒƒå›´çš„ä¸€äº›æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œå¦å¤–è¿˜ä»‹ç»äº†delegationï¼Œblockå’Œtarget- actionã€‚</p>

<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯ä¼ é€’è¯¥ä½¿ç”¨ä»€ä¹ˆæœºåˆ¶ï¼Œæ˜¯å¾ˆæ˜ç¡®çš„äº†ï¼Œå½“ç„¶äº†ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¯¥ä½¿ç”¨ä»€ä¹ˆæœºåˆ¶å¹¶æ²¡æœ‰æ˜ç¡®çš„ç­”æ¡ˆï¼Œéœ€è¦ä½ äº²è‡ªå»å°è¯•ä¸€ä¸‹ã€‚</p>

<hr />

<h3>ç®€å•æ€»ç»“</h3>

<ul>
<li><p>delegation</p>

<ul>
<li><p>åœ¨è‹¹æœçš„Frameworkä¸­ï¼Œdelegationæ¨¡å¼è¢«å¹¿æ³›çš„åªç”¨ç€ã€‚delegationå…è®¸æˆ‘ä»¬å®šåˆ¶æŸä¸ªå¯¹è±¡çš„è¡Œä¸ºï¼Œå¹¶ä¸”å¯ä»¥æ”¶åˆ°æŸäº› ç¡®å®šçš„äº‹ä»¶ã€‚ä¸ºäº†ä½¿ç”¨delegationæ¨¡å¼ï¼Œæ¶ˆæ¯çš„å‘é€è€…éœ€è¦çŸ¥é“æ¶ˆæ¯çš„æ¥æ”¶è€…(delegate)ï¼Œåè¿‡æ¥å°±ä¸ç”¨äº†ã€‚è¿™é‡Œçš„å‘é€è€…å’Œæ¥æ”¶è€…æ˜¯æ¯”è¾ƒæ¾ è€¦åˆçš„ï¼Œå› ä¸ºå‘é€è€…åªçŸ¥é“å®ƒçš„delegateæ˜¯éµå¾ªæŸä¸ªç‰¹å®šçš„åè®®ã€‚</p></li>
<li><p>delegateåè®®å¯ä»¥å®šä¹‰ä»»æ„çš„æ–¹æ³•ï¼Œå› æ­¤ä½ å¯ä»¥å‡†ç¡®çš„å®šä¹‰å‡ºä½ æ‰€éœ€è¦çš„ç±»å‹ã€‚ä½ å¯ä»¥ç”¨å‡½æ•°å‚æ•°çš„å½¢å¼æ¥å¤„ç†æ¶ˆæ¯å†…å®¹ï¼Œdelegateè¿˜ å¯ä»¥é€šè¿‡è¿”å›å€¼çš„å½¢å¼ç»™å‘é€è€…åšå‡ºå›åº”ã€‚å¦‚æœåªéœ€è¦åœ¨ç›¸å¯¹æ¥è¿‘çš„ä¸¤ä¸ªæ¨¡å—ä¹‹é—´è¿›è¡Œæ¶ˆæ¯ä¼ é€’ï¼Œé‚£ä¹ˆDelegationæ˜¯ä¸€ç§éå¸¸çµæ´»å’Œç›´æ¥æ–¹å¼ã€‚</p></li>
<li><p>ä¸è¿‡ï¼Œè¿‡æ¸¡ä½¿ç”¨delegationä¹Ÿæœ‰ä¸€å®šçš„é£é™©ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡çš„è€¦åˆç¨‹åº¦æ¯”è¾ƒç´§å¯†ï¼Œç›¸äº’ä¹‹é—´ä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±æ²¡æœ‰å¿…è¦ä½¿ç”¨ delegateåè®®äº†ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯¹è±¡ä¹‹é—´å¯ä»¥çŸ¥é“ç›¸äº’é—´çš„ç±»å‹ï¼Œè¿›è€Œç›´æ¥è¿›è¡Œæ¶ˆæ¯ä¼ é€’ã€‚ä¾‹å¦‚UICollectionViewLayoutå’Œ NSURLSessionConfigurationã€‚</p></li>
</ul>
</li>
<li><p>block</p>

<ul>
<li><p>Blockç›¸å¯¹æ¥è¯´ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œå®ƒé¦–æ¬¡å‡ºç°æ˜¯åœ¨OS X 10.6å’ŒiOS 4ä¸­ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œblockå¯ä»¥æ»¡è¶³ç”¨delegationå®ç°çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚ä¸è¿‡è¿™ä¸¤ç§æœºåˆ¶éƒ½æœ‰å„è‡ªçš„éœ€æ±‚å’Œä¼˜åŠ¿ã€‚</p></li>
<li><p>å½“ä¸è€ƒè™‘ä½¿ç”¨blockæ—¶ï¼Œä¸€èˆ¬ä¸»è¦æ˜¯è€ƒè™‘åˆ°blockææ˜“å¼•èµ·retainç¯ã€‚å¦‚æœå‘é€è€…éœ€è¦reatain blockï¼Œè€Œåˆä¸èƒ½ç¡®ä¿è¿™ä¸ªå¼•ç”¨ä»€ä¹ˆæ—¶å€™è¢«nilï¼Œè¿™æ ·å°±ä¼šå‘ç”Ÿæ½œåœ¨çš„retainç¯ã€‚</p></li>
</ul>
</li>
<li><p>Notification</p>

<ul>
<li><p>åœ¨ä¸ç›¸å…³çš„ä¸¤éƒ¨åˆ†ä»£ç ä¸­è¦æƒ³è¿›è¡Œæ¶ˆæ¯ä¼ é€’ï¼Œé€šçŸ¥(notifacation)æ˜¯éå¸¸å¥½çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå¯ä»¥å¯¹æ¶ˆæ¯è¿›è¡Œå¹¿æ’­ã€‚ç‰¹åˆ«æ˜¯æƒ³è¦ä¼ é€’ä¸°å¯Œçš„ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸ä¸€å®šæŒ‡æœ›æœ‰è°å¯¹æ­¤æ¶ˆæ¯å…³å¿ƒã€‚</p></li>
<li><p>é€šçŸ¥å¯ä»¥ç”¨æ¥å‘é€ä»»æ„çš„æ¶ˆæ¯ï¼Œç”šè‡³åŒ…å«ä¸€ä¸ªuserInfoå­—å…¸ï¼Œæˆ–è€…æ˜¯NSNotifacationçš„ä¸€ä¸ªå­ç±»ã€‚é€šçŸ¥çš„ç‹¬ç‰¹ä¹‹å¤„å°±åœ¨äºå‘é€è€… å’Œæ¥æ”¶è€…åŒæ–¹å¹¶ä¸éœ€è¦ç›¸äº’çŸ¥é“ã€‚è¿™æ ·å°±å¯ä»¥åœ¨éå¸¸æ¾è€¦åˆçš„æ¨¡å—é—´è¿›è¡Œæ¶ˆæ¯çš„ä¼ é€’ã€‚è®°ä½ï¼Œè¿™ç§æ¶ˆæ¯ä¼ é€’æœºåˆ¶æ˜¯å•å‘çš„ï¼Œä½œä¸ºæ¥æ”¶è€…æ˜¯ä¸å¯ä»¥å›å¤æ¶ˆæ¯çš„ã€‚</p></li>
</ul>
</li>
</ul>


<hr />

<h3>ç®€å•ä½¿ç”¨</h3>

<p>åˆå§‹åŒ–ä¹‹åå‡ºç°ä¸‹é¢çš„ç•Œé¢</p>

<p><img src="/images/chuanzhi001.png" title="Caption" ></p>

<h5>å‡†å¤‡ï¼š</h5>

<p>è¿™é‡Œè¯•è¯•æ ¹æ®æœ¬æ–‡çš„å®æˆ˜åšç›¸åº”çš„ä»‹ç»ï¼Œå…³äºæ‹“å±•åªè¦ç†è§£äº†è¿™é‡Œçš„æ€è·¯åŸºæœ¬æ˜¯ä¸‰ç§ä¼ å€¼çš„ä½¿ç”¨æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p>

<p>é¦–å…ˆï¼Œç”±äºæˆ‘ä»¬è¦å®ç°çš„ç‚¹å‡»å¯¹åº”çš„ç»„å®ç°å±•å¼€åˆ†ç»„æ˜¾ç¤ºå¯¹åº”ç»„é‡Œé¢çš„æ‰€æœ‰è¡Œã€‚</p>

<p>æˆ‘è¿™ä¸ªé¡¹ç›®ä½¿ç”¨çš„æ˜¯å¤šå±‚åˆ†ç»„æ¨¡å‹ï¼Œè®²æ¯ä¸€ç»„åˆå¯¹åº”çš„å±æ€§è¿˜æœ‰friendsä½œä¸ºç»„æ¨¡å‹ï¼Œå†å°†friendsä½œä¸ºå­æ¨¡å‹ï¼Œå®ç°è¡¨æ ¼æ•°æ®çš„ç°å®ã€‚</p>

<p><img src="/images/chuanzhi002.png" title="Caption" ></p>

<h6>å®šä¹‰ä¸€ä¸ªBOOLå€¼ç”¨æ¥è®°å½•ç‚¹å‡»ï¼ˆç”±äºæˆ‘ä»¬éœ€è¦å®ç°ç‚¹å‡»å¯¹åº”ç»„åšäº‹æƒ…ï¼Œæ‰€ä»¥å…ˆåœ¨ç»„æ¨¡å‹ä¸­å®šä¹‰ä¸€ä¸ªBOOLï¼‰</h6>

<pre><code>@property (nonatomic, assign, getter = isOpen) BOOL open; 
</code></pre>

<h6>åœ¨ç›¸åº”çš„ç‚¹å‡»æ–¹æ³•é‡Œé¢æ˜¯å®ç°å–åç‚¹å‡»ï¼Œè¿™é‡Œçš„ç‚¹å‡»æ–¹æ³•æ˜¯åˆ†ç»„Viewä¸Šé¢ä¸€ä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ã€‚</h6>

<pre><code>self.group.open = !self.group.open; 
</code></pre>

<h6>åœ¨numberOfRowsInSectionä¸­è¿”å›çš„æ—¶å€™ä½¿ç”¨ä¸‰æœ¨åˆ¤æ–­æ˜¯å¦ç‚¹å‡»ï¼Œå¹¶ä¸”å®ç°ä¼¸ç¼©ä¸å±•å¼€ï¼Œ</h6>

<pre><code>return model.open?model.friends.cout:0; 
</code></pre>

<p>è¿™é‡Œå®Œæˆä¹‹åè¿è¡Œç¨‹åºç‚¹ä¸€ä¸‹è¯•è¯•ï¼Œä½ ä¼šå‘ç°ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ä»€ä¹ˆæ•ˆæœä¹Ÿæ²¡æœ‰ã€‚</p>

<p>å½“ç„¶ä¼šæ²¡æœ‰æ•ˆæœï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¼ å€¼ï¼Œåé¢æ‰æ˜¯æœ¬ç« çš„é‡ç‚¹ï¼Œå­¦ä¼šäº†è¿™é‡Œä»¥åå…³äºé€šçŸ¥ï¼Œä»£ç†ã€‚Blockçš„ä½¿ç”¨åŸºæœ¬ä¸Šæ²¡æœ‰é—®é¢˜ã€‚</p>

<hr />

<p>/######################ä»£ç†######################/</p>

<hr />

<h2>æ–¹æ³•ä¸€ï¼šä»£ç†</h2>

<h6>åœ¨å¯¹åº”çš„Viewä¸­åˆ›å»ºä¸€ä¸ªåè®®</h6>

<pre><code>@class iCocosView



@protocol iCocoDelegate &lt;NSObject&gt;

@optional

-(void)headerView:(iCocosView *)view;



@end
</code></pre>

<h6>åˆ›å»ºä¸€ä¸ªä»£ç†å±æ€§</h6>

<pre><code> @property (nonatomic, assign) id&lt;iCocoDelegate&gt; delegate; 
</code></pre>

<h6>åœ¨è¿™ä¸ªå®ç°æ–‡ä»¶ä¸­åˆ¤æ–­æœ‰æ²¡æœ‰å®ç°è¿™ä¸ªä»£ç†æ–¹æ³•</h6>

<pre><code>if([self.delegate repondToSelector:selector(headerView)]) {

[self.delegate headerView];

}
</code></pre>

<h6>å…ˆåœ¨å¯¹åº”çš„æ§åˆ¶å™¨éµå®ˆè¿™ä¸ªåè®®ï¼Œå¹¶ä¸”è®¾ç½®ä»£ç†</h6>

<pre><code> &lt;iCocosDelegate&gt; 

header.delegate = self; //è®©æ§åˆ¶å™¨å……å½“ä»£ç†
</code></pre>

<h6>å®ç°ä»£ç†æ–¹æ³•</h6>

<pre><code>ï¼ï¼ˆvoidï¼‰headerView:(iCocosView *)view {[self.tableView reloadData];  }  
</code></pre>

<hr />

<p>/######################Block######################/</p>

<hr />

<h2>æ–¹æ³•äºŒï¼šBlock</h2>

<h6>å®šä¹‰ä¸€ä¸ªBlock</h6>

<pre><code>typedef void (^iCocosBlock)(id);  
</code></pre>

<h6>åˆ›å»ºä¸€ä¸ªBlockå¯¹åº”çš„å±æ€§ï¼ˆä½¿ç”¨Copyï¼‰</h6>

<pre><code> @property ï¼ˆnonatomicï¼Œ weakï¼‰iCocosBlock block; 
</code></pre>

<h6>å®ç°æ–‡ä»¶ä¸­åˆ¤è¯»</h6>

<pre><code>  if(self.block) { self.block(self);}  
</code></pre>

<h6>åœ¨æ§åˆ¶å™¨ä¸­å®ç°</h6>

<pre><code> header.block = ^(id sender) {  //senderæ˜¯ä¼ è¿‡æ¥çš„å‚æ•°

 [self.tableView reloadData];

 };
</code></pre>

<hr />

<p>/######################é€šçŸ¥######################/</p>

<hr />

<h2>æ–¹æ³•ä¸‰ï¼šé€šçŸ¥</h2>

<p> æ³¨æ„ï¼šé€šçŸ¥çš„ä½¿ç”¨æ˜¯å‰é¢çš„åå‘æ€ç»´ï¼Œåœ¨æ§åˆ¶å™¨é‡Œé¢æ³¨å†Œå¹¶ä¸”å®ç°é€šçŸ¥æ–¹æ³•ï¼Œç„¶ååœ¨åˆ†ç»„Viewé‡Œé¢å‘å¸ƒè¿™ä¸ªé€šçŸ¥ã€‚</p>

<h6>åœ¨æ§åˆ¶å™¨ä¸­æ³¨å†Œä¸€ä¸ªé€šçŸ¥</h6>

<pre><code>[ï¼»NSNotificationCenter defaultCenterï¼½ addObserver:self selector:@selector(notiClick) name:@â€œfriendsâ€ object:nil]; 2 3  
</code></pre>

<h6>å®ç°é€šçŸ¥æ–¹æ³•</h6>

<pre><code>ï¼ï¼ˆvoidï¼‰notiClick

{

[self.tableView reloadData];

}
</code></pre>

<h6>åŒæ ·åœ¨Headeråˆ†ç»„çš„å®ç°æ–‡ä»¶ä¸­å‘å¸ƒä¸€ä¸ªé€šçŸ¥</h6>

<pre><code>[ï¼»NSNotificationCenter defaultCenterï¼½postNotificationName: @â€œfriendsâ€object:self userInfo:nil]; 2 3  
</code></pre>

<h6>ç§»é™¤é€šçŸ¥ï¼šæˆ‘ä»¬å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹æ³•é‡Œé¢ä¸€å‡ºé€šçŸ¥ï¼šViewDidDidApperå’ŒDealloc</h6>

<p>å¹¶ä¸”ä½¿ç”¨è‰¯ç§ä¸¤ç§æ–¹æ³•</p>

<p>@1:ç§»é™¤æ‰€æœ‰é€šçŸ¥</p>

<pre><code>[ï¼»NSNotificationCenter defaultCenterï¼½ removeObserver:self]; 
</code></pre>

<p>@2:æ ¹æ®åå­—ç§»é™¤é€šçŸ¥</p>

<pre><code>[ï¼»NSNotificationCenter defaultCenterï¼½removeObserver:self name:@â€œfriednsâ€ object:nil];  
</code></pre>

<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼šå®é™…å¼€å‘ä¸­ä½¿ç”¨å®Œé€šçŸ¥ä¹‹åä¸€å®šè¦ç§»é™¤é€šçŸ¥ï¼Œå¦åˆ™å¦‚æœé‡Œé¢é€šçŸ¥å¤ªå¤šï¼Œå½“ä½ å†æ¬¡å‘é€ä¸€ä¸ªé€šçŸ¥çš„æ—¶å€™ç¨‹åºå°±ä¸çŸ¥é“å»æ‰¾é‚£ä¸ªé€šçŸ¥ç”šè‡³ä¼šå¯¼è‡´ç¨‹åºå¥”æºƒã€‚</p>

<hr />

<p>/######################è¿è¡Œç»“æœ######################/</p>

<hr />

<p>ä½¿ç”¨ä¸Šé¢ä»»ä½•ä¸€ç§æ–¹æ³•éƒ½å¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œç‚¹å‡»æ¯ä¸€è¡Œçš„ç»„çš„æ—¶å€™å°±ä¼šå±•å¼€ç›¸åº”è¡Œå¹¶ä¸”æ˜¾ç¤ºå¯¹åº”ç»„çš„æ‰€æœ‰è¡Œã€‚</p>

<p><img src="/images/chuanzhi003.png" title="Caption" ></p>

<p>å®ç°Headerå·¦è¾¹æŒ‰é’®ä¸Šé¢å›¾æ ‡çš„æ—‹è½¬ï¼šï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ªé‡ç‚¹ï¼Œä¹Ÿæ˜¯ä»¥åä»¥åå¼€å‘ä¸­è‚¯å‘¢è¿‡é‡åˆ°çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œå¯èƒ½ä¸æ˜¯ä¸€æ ·çš„ä½†æ˜¯æˆ–è®¸æ€è·¯å’ŒåŸç†ä¸€æ ·ï¼Œè¿™é‡Œæ˜¯è¿™ç¯‡æ–‡ç« ä¸­é™¤äº†ä¼ å€¼çš„ä¸‰ç§æ–¹å¼ä»¥åæœ€é‡è¦çš„åœ°æ–¹ï¼‰
    /<strong><strong><em>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢å®ç°æ—‹è½¬ï¼šå½“Viewç§»åˆ°çˆ¶æ§ä»¶çš„æ—¶å€™ï¼Œä¸ç„¶æ—‹è½¬ä¹Ÿçœ‹ä¸åˆ°é€‰è¿‡ï¼Œå› ä¸ºåˆ·æ–°å®åœ¨æ—‹è½¬ä¹‹åçš„ï¼Œæ—‹è½¬ä¹‹åå†åˆ·æ–°ï¼Œä»ç¼“å­˜è¿Ÿé‡Œé¢å–å‡ºæ¥</em></strong></strong>***/</p>

<pre><code>-(void)didMoveToSuperview
{
    if (self.group.open) {
        self.nameView.imageView.transform = CGAffineTransformMakeRotation(M_PI_2);
    }else {
        self.nameView.imageView.transform = CGAffineTransformMakeRotation(0);
    }

}
/ 
</code></pre>

<p>ä½†æ˜¯å…·ä½“ä½¿ç”¨è¯´æ˜è§†æƒ…å†µè€Œå®šï¼š</p>

<p>æ€»ç»“ï¼šã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å¾…ç»­</p>
</div>
  
  




| <a href="/blog/2015/07/01/chuan-zhi-fang-shi-zong-jie/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/10/iosban-ben-gua-pei-wen-ti-(6,7,8,9)/">iOSç‰ˆæœ¬é€‚é…é—®é¢˜ï¼ˆ6ï¼Œ7ï¼Œ8ï¼Œ9ï¼‰</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><h2>iOS6æ–°ç‰¹æ€§</h2>

<h4>ä¸€ã€å…³äºå†…å­˜è­¦å‘Š</h4>

<p>ios6ä¸­åºŸé™¤äº†viewDidUnloadï¼ŒviewWillUnloadè¿™ä¸¤ä¸ªç³»ç»Ÿå›è°ƒï¼Œæ”¶åˆ°å†…å­˜è­¦å‘Šæ—¶åœ¨didReceiveMemoryWarningä¸­è¿›è¡Œç›¸å…³çš„å¤„ç†ã€‚</p>

<pre><code>- (void)viewDidUnload {
    [super viewDidUnload];
    // å¤„ç† ios6 ä»¥ä¸‹çš„ç³»ç»Ÿå†…å­˜è­¦å‘Šç³»ç»Ÿå›è°ƒæ¶ˆæ¯
}

// è¿™é‡Œå¤„ç†ios6 çš„å†…å­˜è­¦å‘Š
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];

float sysVer = [[[UIDevice currentDevice] systemVersion] floatValue];
//ios6 çš„ç‰¹æ®Šå¤„ç†

if (sysVer &gt;= 6.0f) {
    // ä¿è¯ invisible,  å› ä¸ºå³ä½¿åœ¨å½“å‰ç•Œé¢ä¹Ÿä¼šæ”¶åˆ°ç³»ç»Ÿå›è°ƒ
    if (self.view.window == nil) {
        //.......
        // åšç›¸å…³çš„é‡Šæ”¾æ“ä½œ
        self.view = nil;   // ç¡®ä¿ä¸‹æ¬¡ä¼šé‡æ–°åŠ è½½
    }
}
}
</code></pre>

<h4>äºŒã€å…³äºå±å¹•æ—‹è½¬</h4>

<p>åŒæ ·ios6 åºŸé™¤äº†shouldAutorotateToInterfaceOrientationè¿™ä¸ªæ—‹è½¬å±å¹•çš„è®¾ç½®æ¥å£ã€‚</p>

<ul>
<li><p>å¿…é¡»åœ¨ä¸¤ä¸ªæ–°æ¥å£ä¸­è®¾ç½®æ—‹è½¬å±æ€§:shouldAutorotateã€supportedInterfaceOrientationsã€‚</p></li>
<li><p>æ”¶åˆ°æ—‹è½¬äº‹ä»¶åçš„å¤„ç†ï¼ŒåŒæ ·åœ¨willRotateToInterfaceOrientationå’ŒdidRotateFromInterfaceOrientationä¸­è¿›è¡Œã€‚</p></li>
</ul>


<h4>ä¸‰ã€UISwitch</h4>

<p>ios6ä¸‹ï¼Œæ–°å¢äº†ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼Œå¯ä»¥è®¾ç½®å¼€å…³çš„é¢œè‰²ä»¥åŠèƒŒæ™¯å›¾ã€‚</p>

<pre><code>@property (nonatomic,  retain) UIColor *tintColor;

@property (nonatomic,  retain) UIColor *thumbTintColor;

@property (nonatomic,  retain) UIImage *onImage;

@property (nonatomic,  retain) UIImage *offImage;
</code></pre>

<h4>å››ã€UINavigationBar</h4>

<p>ios6æ–°å¢äº†ï¼Œè®¾ç½®é˜´å½±å›¾ç‰‡çš„å±æ€§ã€‚</p>

<pre><code>@property (nonatomic, retain) UIImage *shadowImage;
</code></pre>

<h4>äº”ã€UIImage</h4>

<p>å¯ä»¥åœ¨ios6ä¸‹è®¾ç½®å›¾ç‰‡çš„scaleæ¯”ä¾‹å°ºå¯¸äº†ã€‚</p>

<pre><code>+ (UIImage *)imageWithData:(NSData *)data scale:(CGFloat)scale;

- (id)initWithData:(NSData *)data scale:(CGFloat)scale;
</code></pre>

<h4>å…­ã€UIRefreshControl</h4>

<p>ä¹‹å‰è‹¹æœå®˜æ–¹æ˜¯æ²¡æœ‰ç°æˆçš„ä¸‹æ‹‰åˆ·æ–°çš„æ§ä»¶ï¼Œéƒ½æ˜¯è‡ªå·±å®ç°æˆ–è€…ä½¿ç”¨æ¯”è¾ƒæˆç†Ÿçš„å¼€æºåº“ã€‚</p>

<ul>
<li>ios6è‹¹æœåŠ å…¥äº†UIRefreshControlï¼Œé…åˆUITableViewç›´æ¥å®ç°ä¸‹æ‹‰åˆ·æ–°ã€‚</li>
</ul>


<h4>ä¸ƒã€UICollectionView</h4>

<p>å…¨æ–°çš„é›†åˆæ§ä»¶ï¼Œåº”ç”¨åœºæ™¯æœ‰ç±»ä¼¼ç…§ç‰‡å¢™ï¼Œç€‘å¸ƒæµç­‰ã€‚</p>

<h2>iOS7æ–°ç‰¹æ€§</h2>

<h4>ä¸€ã€å·²ç¦ç”¨-[UIDevice uniqueIdentifier]</h4>

<p>è‹¹æœæ€»æ˜¯æŠŠç”¨æˆ·çš„éšç§çœ‹çš„å¾ˆé‡è¦ã€‚-[UIDevice uniqueIdentifier]åœ¨iOS5å®é™…åœ¨iOS5çš„æ—¶å€™å·²ç»è¢«é—å¼ƒäº†ï¼Œä½†æ˜¯iOS7ä¸­å·²ç»å®Œå…¨çš„ç¦ç”¨äº†å®ƒã€‚Xcode5ç”šè‡³ä¸ä¼šå…è®¸ä½ ç¼–è¯‘åŒ…å«äº†æŒ‡å¼•åˆ°-[UIDevice uniqueIdentifier]çš„appã€‚</p>

<ul>
<li>æ­¤å¤–ï¼ŒiOS7ä¹‹å‰çš„ä½¿ç”¨äº†-[UIDevice uniqueIdentifier] çš„appå¦‚æœåœ¨iOS7ä¸Šè¿è¡Œï¼Œå®ƒä¸ä¼šè¿”å›è®¾å¤‡çš„UUIDï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä»¥FFFFFFFFå¼€å¤´ï¼Œè·Ÿç€-[UIDevice identifierForVendor]çš„åå…­è¿›åˆ¶å€¼ã€‚</li>
</ul>


<h4>äºŒã€UIPasteboardç”±å…±äº«å˜ä¸ºæ²™ç›’åŒ–äº†</h4>

<p>UIPasteboardè¿‡å»æ˜¯ç”¨æ¥åšappä¹‹é—´çš„æ•°æ®åˆ†äº«çš„ã€‚UIPasteboardæœ¬æ— é—®é¢˜ï¼Œä½†æ˜¯å¼€å‘è€…å¼€å§‹ä½¿ç”¨å®ƒæ¥å­˜å‚¨æ ‡è¯†ç¬¦ï¼Œå’Œå…¶ä»–çš„ç›¸å…³appåˆ†äº«è¿™äº›æ ‡è¯†ç¬¦çš„æ—¶å€™é—®é¢˜å°±å‡ºç°äº†ã€‚æœ‰ä¸€ä¸ªä½¿ç”¨è¿™ç§æŠŠæˆçš„å°±æ˜¯OpenUDIDã€‚</p>

<ul>
<li>åœ¨iOS7ä¸­ï¼Œä½¿ç”¨ +[UIPasteboard pasteboardWithName:create:]å’Œ +[UIPasteboard pasteboardWithUniqueName]åˆ›å»ºå‰ªè´´æ¿ï¼Œè€Œä¸”åªå¯¹ç›¸åŒçš„app groupå¯è§ï¼Œè¿™æ ·å°±è®©OpenUDIDä¸é‚£ä¹ˆæœ‰ç”¨äº†ã€‚</li>
</ul>


<h4>ä¸‰ã€MACåœ°å€ä¸èƒ½å†ç”¨æ¥è®¾åˆ«è®¾å¤‡</h4>

<p>è¿˜æœ‰ä¸€ä¸ªç”ŸæˆiOSè®¾å¤‡å”¯ä¸€æ ‡ç¤ºç¬¦çš„æ–¹æ³•æ˜¯ä½¿ç”¨iOSè®¾å¤‡çš„Media Access Controlï¼ˆMACï¼‰åœ°å€ã€‚ä¸€ä¸ªMACåœ°å€æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å·ç ï¼Œå®ƒæ˜¯ç‰©ç†ç½‘ç»œå±‚çº§æ–¹é¢åˆ†é…ç»™ç½‘ç»œé€‚é…å™¨çš„ã€‚è¿™ä¸ªåœ°å€è‹¹æœè¿˜æœ‰å…¶ä»–çš„åå­—ï¼Œæ¯”å¦‚è¯´æ˜¯ç¡¬ä»¶åœ°å€ï¼ˆHardware Address)æˆ–æ˜¯Wifiåœ°å€ï¼Œéƒ½æ˜¯æŒ‡åŒæ ·çš„ä¸œè¥¿ã€‚</p>

<ul>
<li><p>æœ‰å¾ˆå¤šå·¥ç¨‹å’Œæ¡†æ¶éƒ½ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥ç”Ÿæˆå”¯ä¸€çš„è®¾å¤‡IDã€‚æ¯”å¦‚è¯´ODINã€‚ç„¶è€Œï¼Œè‹¹æœå¹¶ä¸å¸Œæœ›æœ‰äººé€šè¿‡MACåœ°å€æ¥åˆ†è¾¨ç”¨æˆ·ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨iOS7ç³»ç»Ÿä¸ŠæŸ¥è¯¢MACåœ°å€ï¼Œå®ƒç°åœ¨åªä¼šè¿”å›02:00:00:00:00:00ã€‚</p></li>
<li><p>ç°åœ¨è‹¹æœæ˜ç¡®çš„è¡¨æ˜ä½ åº”è¯¥ä½¿ç”¨-[UIDevice identifierForVendor]æˆ–æ˜¯-[ASIdentifierManager advertisingIdentifier]æ¥ä½œä¸ºä½ æ¡†æ¶å’Œåº”ç”¨çš„å”¯ä¸€æ ‡ç¤ºç¬¦ã€‚å¦ç™½çš„æ¥è¯´ï¼Œåº”å¯¹è¿™äº›å˜åŒ–ä¹Ÿä¸æ˜¯é‚£ä¹ˆçš„éš¾ï¼Œè§ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š</p></li>
</ul>


<hr />

<pre><code>NSString *identifierForVendor = [[UIDevice currentDevice].identifierForVendor UUIDString];

NSString *identifierForAdvertising = [[ASIdentifierManager sharedManager].advertisingIdentifier UUIDString];
</code></pre>

<p>æ¯ç§æ–¹æ³•éƒ½é€‚é…ä¸€ç§ç‰¹åˆ«çš„ç”¨æ³•ï¼š</p>

<ul>
<li><p>identifierForVendorå¯¹ä¾›åº”å•†æ¥è¯´æ˜¯å”¯ä¸€çš„ä¸€ä¸ªå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”±åŒä¸€ä¸ªå…¬å¸å‘è¡Œçš„çš„appåœ¨ç›¸åŒçš„è®¾å¤‡ä¸Šè¿è¡Œçš„æ—¶å€™éƒ½ä¼šæœ‰è¿™ä¸ªç›¸åŒçš„æ ‡è¯†ç¬¦ã€‚ç„¶è€Œï¼Œå¦‚æœç”¨æˆ·åˆ é™¤äº†è¿™ä¸ªä¾›åº”å•†çš„appç„¶åå†é‡æ–°å®‰è£…çš„è¯ï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦å°±ä¼šä¸ä¸€è‡´ã€‚</p></li>
<li><p>advertisingIdentifierä¼šè¿”å›ç»™åœ¨è¿™ä¸ªè®¾å¤‡ä¸Šæ‰€æœ‰è½¯ä»¶ä¾›åº”å•†ç›¸åŒçš„ ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥åªèƒ½åœ¨å¹¿å‘Šçš„æ—¶å€™ä½¿ç”¨ã€‚è¿™ä¸ªå€¼ä¼šå› ä¸ºå¾ˆå¤šæƒ…å†µè€Œæœ‰æ‰€å˜åŒ–ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·åˆå§‹åŒ–è®¾å¤‡çš„æ—¶å€™ä¾¿ä¼šæ”¹å˜ã€‚</p></li>
</ul>


<h4>å››ã€iOSç°åœ¨è¦æ±‚appå¦‚éœ€ä½¿ç”¨éº¦å…‹é£ï¼Œéœ€è¦å¾å¾—ç”¨æˆ·åŒæ„</h4>

<p>ä»¥å‰å¦‚æœappéœ€è¦ä½¿ç”¨ç”¨æˆ·çš„ä½ç½®ï¼Œé€šè®¯å½•ï¼Œæ—¥å†ï¼Œæé†’ä»¥åŠç…§ç‰‡ï¼Œæ¥å—æ¨é€æ¶ˆæ¯ï¼Œä½¿ç”¨ç”¨æˆ·çš„ç¤¾äº¤ç½‘ç»œçš„æ—¶å€™éœ€è¦å¾å¾—ç”¨æˆ·çš„åŒæ„ã€‚ç°åœ¨åœ¨iOS7å½“ä¸­ï¼Œä½¿ç”¨éº¦å…‹é£ä¹Ÿéœ€è¦å–å¾—ç”¨æˆ·åŒæ„äº†ã€‚å¦‚æœç”¨æˆ·ä¸å…è®¸appä½¿ç”¨éº¦å…‹é£çš„è¯ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨éº¦å…‹é£çš„appå°±ä¸èƒ½æ¥æ”¶ä¸åˆ°ä»»ä½•å£°éŸ³ã€‚</p>

<p>ä»¥ä¸‹çš„ä»£ç æ˜¯ç”¨æ¥æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å…è®¸appä½¿ç”¨éº¦å…‹é£ï¼š</p>

<pre><code>//ç¬¬ä¸€æ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæç¤ºç”¨æˆ·è®©ä»–åŒæ„ä½ çš„appè·å–éº¦å…‹é£çš„æ•°æ®
// å…¶ä»–æ—¶å€™è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œåˆ™ä¸ä¼šæé†’ç”¨æˆ·
// è€Œä¼šä¼ é€’ä¹‹å‰çš„å€¼æ¥è¦æ±‚ç”¨æˆ·åŒæ„
[[AVAudioSession sharedInstance] requestRecordPermission:^(BOOL granted) {
    if (granted) {
        // ç”¨æˆ·åŒæ„è·å–æ•°æ®
    } else {
        // å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªæç¤ºæ¡†å‘Šè¯‰ç”¨æˆ·è¿™ä¸ªappæ²¡æœ‰å¾—åˆ°å…è®¸ï¼Ÿ
    }
}];
</code></pre>

<p>ä½ åŒæ—¶è¿˜è¦æ³¨æ„ï¼Œå¦‚æœä½ åœ¨è·å¾—ç”¨æˆ·çš„åŒæ„ä¹‹å‰ä½¿ç”¨ä»»ä½•æ–¹æ³•æ¥ä½¿ç”¨éº¦å…‹é£çš„è¯ï¼Œä¼šå¼•èµ·iOSç³»ç»Ÿå¼¹å‡ºä»¥ä¸‹è­¦ç¤ºæ ï¼š</p>

<p><img src="/images/banbenshipei001.jpg" title="Caption" ></p>

<h4>äº”ã€[NSArray firstObject]çš„å®ç°</h4>

<p>-[NSArray firstObject]å¯èƒ½æ˜¯Objective-Cä¸­è¢«è°ƒç”¨åšå¤šçš„APIã€‚åœ¨Open Radarä¸Šä¸€ä¸ªç®€å•çš„è°ƒæŸ¥æ˜¾ç¤ºæœ‰ä¸€äº›éœ€æ±‚è‹¹æœå·²ç»åšäº†è®°å½•ã€‚å¥½æ¶ˆæ¯æ˜¯ç°åœ¨è¿™äº›éœ€æ±‚å·²ç»å¾—åˆ°äº†è§£å†³ã€‚. firstObjectçš„ä½¿ç”¨å¯ä»¥è¿½æº¯åˆ°iOS4.0ï¼Œä½†æ˜¯é‚£æ—¶ä»…ä»…æ˜¯ä¸€ä¸ªç§æœ‰æ–¹æ³•ã€‚åœ¨iOS7ä»¥å‰ï¼Œå·¥ç¨‹å¸ˆç”¨ä¸‹é¢çš„æ–¹å¼æ¥ä½¿ç”¨å®ƒï¼š</p>

<pre><code>NSArray *arr = @[];
id item = [arr firstObject];

// åœ¨ä¹‹å‰ä½ éœ€è¦åšä»¥ä¸‹å·¥ä½œ
id item = [arr count] &gt; 0 ? arr[0] : nil;
</code></pre>

<p>å› ä¸ºä¸Šé¢çš„æ–¹å¼å¾ˆå¹³å¸¸ï¼Œæœ‰äº›äººå°†å®ƒä½œä¸ºä¸€ä¸ªç±»å¢åŠ åˆ°NSArrayä¸­ï¼Œç„¶ååˆ›å»ºä»–ä»¬è‡ªå·±çš„firstObjectæ–¹æ³•ã€‚</p>

<p>è¿™ä¸ªæ–¹æ³•çš„é—®é¢˜æ˜¯è¿™ä¸ªæ–¹æ³•çš„åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¦åˆ™çš„è¯è¿™ä¸ªæ–¹æ³•æ‰€å¼•å‘çš„é—®é¢˜æ— æ³•é¢„ä¼°ã€‚</p>

<ul>
<li>è¯·ç¡®ä¿æ£€æŸ¥ä½ æ˜¯å¦æœ‰ä»»ä½•è‡ªå®šä¹‰çš„ä»£ç åœ¨NSArrayä¸Šå®ç°äº†firstObjectï¼Œå¦‚æœæœ‰çš„è¯çœ‹çœ‹å®ƒæ˜¯å¦æ˜¯å¿…é¡»çš„ï¼Œä¸æ˜¯å¿…é¡»çš„è¯å°±æŠŠå®ƒå…¨éƒ¨ç§»é™¤ã€‚</li>
</ul>


<h4>å…­ã€å¢åŠ äº†instancetype</h4>

<p>instancetypeè®©iOS7APIå˜å¾—æ›´åŠ éš¾æ‡‚ã€‚è‹¹æœæ”¹å˜äº†å¤§éƒ¨åˆ† initializerå’Œç®€æ˜“æ„é€ å‡½æ•°ï¼ˆconvenience constructorsï¼‰ï¼Œç”¨instancetypeä»£æ›¿idä½œè¿”å›ç±»å‹ã€‚ä½†æ˜¯è¿™ä¸ªinstancetypeæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>

<ul>
<li><p>instancetypeç”¨æ¥åœ¨å£°æ˜ä¸€ä¸ªæ–¹æ³•æ—¶å‘Šè¯‰ç¼–è¯‘å™¨å…¶è¿”å›ç±»å‹ï¼Œå®ƒè¡¨ç¤ºè¿”å›è°ƒç”¨è¯¥æ–¹æ³•çš„ç±»çš„å¯¹è±¡ã€‚</p></li>
<li><p>è¿™æ¯”ä¹‹å‰è¿”å›idçš„é€šå¸¸åšæ³•è¦å¥½ï¼Œç¼–è¯‘å™¨å¯ä»¥å¯¹è¿”å›ç±»å‹åšä¸€äº›æ£€æŸ¥ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œåœ¨ç¼–è¯‘æ—¶å°±èƒ½æé†’ä½ ï¼Œè€Œä¸æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿå´©æºƒã€‚</p></li>
<li><p>åŒæ—¶ï¼Œåœ¨è°ƒç”¨å­ç±»æ–¹æ³•æ—¶ï¼Œä½¿ç”¨å®ƒè¿˜å¯ä»¥çœå»å¯¹è¿”å›å€¼çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿæ­£ç¡®æ¨æ–­æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ã€‚</p></li>
<li><p>è¦è¯´åˆ°instancetaypeçš„ç¼ºç‚¹å’Œä¼˜ç‚¹å—ï¼ŸåŸºæœ¬ä¸Šï¼Œåœ¨ä»»ä½•å¯èƒ½çš„æƒ…å†µä¸‹éƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚</p></li>
</ul>


<h4>ä¸ƒã€è®¾ç½®UIImageçš„æ¸²æŸ“æ¨¡å¼ï¼šUIImage.renderingMode</h4>

<p>ç€è‰²ï¼ˆTint Colorï¼‰æ˜¯iOS7ç•Œé¢ä¸­çš„ä¸€ä¸ªé‡å¤§æ”¹å˜ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªUIImageåœ¨æ¸²æŸ“æ—¶æ˜¯å¦ä½¿ç”¨å½“å‰è§†å›¾çš„Tint Colorã€‚</p>

<pre><code>UIImageæ–°å¢äº†ä¸€ä¸ªåªè¯»å±æ€§ï¼šrenderingModeï¼Œå¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªæ–°å¢æ–¹æ³•ï¼š*imageWithRenderingMode:ï¼Œå®ƒä½¿ç”¨UIImageRenderingModeæšä¸¾å€¼æ¥è®¾ç½®å›¾ç‰‡çš„renderingModeå±æ€§ã€‚è¯¥æšä¸¾ä¸­åŒ…å«ä¸‹åˆ—å€¼ï¼š



// æ ¹æ®å›¾ç‰‡çš„ä½¿ç”¨ç¯å¢ƒå’Œæ‰€å¤„çš„ç»˜å›¾ä¸Šä¸‹æ–‡è‡ªåŠ¨è°ƒæ•´æ¸²æŸ“æ¨¡å¼
UIImageRenderingModeAutomatic 

// å§‹ç»ˆç»˜åˆ¶å›¾ç‰‡åŸå§‹çŠ¶æ€ï¼Œä¸ä½¿ç”¨Tint Color
UIImageRenderingModeAlwaysOriginal 

// å§‹ç»ˆæ ¹æ®Tint Colorç»˜åˆ¶å›¾ç‰‡ï¼Œå¿½ç•¥å›¾ç‰‡çš„é¢œè‰²ä¿¡æ¯
UIImageRenderingModeAlwaysTemplate
</code></pre>

<p>renderingModeå±æ€§çš„é»˜è®¤å€¼æ˜¯UIImageRenderingModeAutomaticï¼Œå³UIImageæ˜¯å¦ä½¿ç”¨
Tint Colorå–å†³äºå®ƒæ˜¾ç¤ºçš„ä½ç½®ã€‚å…¶ä»–æƒ…å†µå¯ä»¥çœ‹ä¸‹é¢çš„å›¾ä¾‹ï¼š</p>

<p><img src="/images/banbenshipei002.png" title="Caption" ></p>

<p>ä»¥ä¸‹çš„ä»£ç è¯´æ˜äº†ä½¿ç”¨ä¸€ä¸ªæ—¢å®šçš„renderingæ¨¡å¼åˆ›å»ºå›¾ç‰‡æ˜¯å¤šä¹ˆç®€å•ï¼š</p>

<pre><code>UIImage *img = [UIImage imageNamed:@"myimage"];

img = [img imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
</code></pre>

<h4>å…«ã€tintcolor VS barTintColor</h4>

<p>iOS7ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç»™å®šçš„é¢œè‰²ï¼Œç”šè‡³æ˜¯è®°å…¥é¢œè‰²ä¸»é¢˜æ¥ç»™æ•´ä¸ªappç€è‰²ï¼Œå¸®åŠ©ä½ çš„appè„±é¢–è€Œå‡ºã€‚è®¾ç½®appçš„tint colorå¾ˆç®€ç­”ï¼Œåªè¦ä½¿ç”¨UIViewçš„æ–°å±æ€§tintColorå³å¯ã€‚</p>

<p>è¿™ä¸ªå±æ€§æ˜¯å¦å¬ä¸Šå»å¾ˆç†Ÿæ‚‰å‘¢ï¼Ÿåº”è¯¥å¾ˆç†Ÿæ‚‰ï¼Œæœ‰äº›ç±»ï¼Œæ¯”å¦‚è¯´UINaviagtionBarï¼ŒUISearchBarï¼ŒUITabBarä»¥åŠUIToolbarå·²ç»æœ‰äº†è¿™ä¹ˆå‘½åçš„å±æ€§ã€‚ä»–ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªæ–°çš„å±æ€§ï¼šbarTintColorã€‚</p>

<p>ä¸ºäº†é¿å…ä½¿ç”¨æ–°å±æ€§çš„æ—¶å€™çŠ¯é”™è¯¯ï¼Œå¦‚æœä½ çš„apppéœ€è¦æ”¯æŒiOS6ä»¥å‰çš„ç³»ç»Ÿçš„æ—¶å€™ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹ã€‚</p>

<pre><code>UINavigationBar *bar = self.navigationController.navigationBar;
UIColor *color = [UIColor greenColor];

if ([bar respondsToSelector:@selector(setBarTintColor:)]) { // iOS 7+
    bar.barTintColor = color;
} else { // what year is this? 2012?
    bar.tintColor = color;
}
</code></pre>

<h4>ä¹ã€å»æ‰äº†çº¹ç†é¢œè‰²</h4>

<p><img src="/images/banbenshipei003.jpg" title="Caption" ></p>

<p>çº¹ç†é¢œè‰²ï¼Ÿå¯¹ï¼Œä¸å†ä½¿ç”¨ä»–ä»¬äº†ï¼Œä¸èƒ½å†åˆ›å»ºå¯ä»¥å±•ç°çº¹ç†çš„é¢œè‰²ã€‚</p>

<p>æ ¹æ®UIInterface.hæ–‡ä»¶ä¸­çš„æ³¨é‡Šï¼Œ-[UIColor groupTableViewBackgroundColor]åº”è¯¥æ˜¯è¦åœ¨iOS6å½“ä¸­å³è¢«åˆ é™¤äº†ï¼Œä½†æ˜¯å®ƒä»…ä»…åªæ˜¯ä¸åƒä¹‹å‰é‚£æ ·è¿”å›çº¹ç†é¢œè‰²äº†ã€‚ç„¶è€Œï¼Œä»¥ä¸‹çš„é¢œè‰²åœ¨iOS7å½“ä¸­è¢«åˆ é™¤äº†:</p>

<pre><code>+ (UIColor *)viewFlipsideBackgroundColor;

+ (UIColor *)scrollViewTexturedBackgroundColor;

+ (UIColor *)underPageBackgroundColor;
</code></pre>

<h4>åã€UIButtonTypeRoundRectè¢«UIButtonTypeSystemå–ä»£äº†</h4>

<p><img src="/images/banbenshipei004.jpg" title="Caption" ></p>

<ul>
<li><p>åœ¨iOSå¼€å‘åˆšå¼€å§‹å°±é™ªä¼´ç€ä½ çš„è€æœ‹å‹ç°åœ¨ä¹Ÿè¢«åˆ é™¤äº†ï¼Œå®ƒå°±æ˜¯UIButtonTypeRoundRect ï¼Œè¢«æ–°çš„UIButtonTypeSystemå–ä»£äº†ã€‚</p></li>
<li><p>å¦‚æœæ¯æ¬¡iOSç³»ç»Ÿçš„å‘å¸ƒéƒ½æ²¡æœ‰ä¸€äº›æ–°çš„åŠŸèƒ½ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿè¿™äº›æ–°åŠŸèƒ½ç›¸ä¿¡å¤§éƒ¨åˆ†å¼€å‘è€…å·²ç»çŸ¥é“äº†ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä¸€äº›æ–°é¢–çš„æ–¹å¼å°†å®ƒä»¬æ•´åˆåˆ°ä½ çš„appä¸­å»ï¼</p></li>
</ul>


<h4>åä¸€ã€æ£€æŸ¥æ— çº¿è·¯ç”±æ˜¯å¦å¯ç”¨</h4>

<p>å®šåˆ¶ä¸€ä¸ªè§†é¢‘æ’­æ”¾å™¨çš„èƒ½åŠ›åœ¨iOSç‰ˆæœ¬æ¯æ¬¡çš„å‘å¸ƒä¸­ä¸€ç›´æœ‰æ‰€è¿›æ­¥ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨iOS6ä¹‹å‰ï¼Œä½ ä¸èƒ½åœ¨MPVolumeViewä¸­æ”¹å˜AirPlayçš„iconã€‚</p>

<p>åœ¨iOS7å½“ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡AirPlayï¼Œè“ç‰™æˆ–æ˜¯å…¶ä»–çš„è™šçº¿æœºåˆ¶äº†è§£æ˜¯å¦æœ‰ä¸€ä¸ªè¿œç¨‹çš„è®¾å¤‡å¯ç”¨ã€‚äº†è§£å®ƒçš„è¯ï¼Œå°±å¯ä»¥è®©ä½ çš„appåœ¨æ°å½“çš„æ—¶å€™åšæ°å½“çš„äº‹ï¼Œæ¯”å¦‚è¯´ï¼Œåœ¨æ²¡æœ‰è¿œç¨‹è®¾å¤‡çš„æ—¶å€™å°±ä¸æ˜¾ç¤ºAirPlayçš„iconã€‚</p>

<p>ä»¥ä¸‹æ˜¯æ–°å¢åŠ åˆ°MPVolumeViewçš„æ–°å±æ€§å’Œæ¨é€</p>

<pre><code>@property (nonatomic, readonly) BOOL wirelessRoutesAvailable; //  æ˜¯å¦æœ‰è®¾å¤‡å¯ä»¥è¿æ¥çš„æ— çº¿çº¿è·¯ï¼Ÿ
@property (nonatomic, readonly) BOOL wirelessRouteActive; // è®¾å¤‡ç°åœ¨æ˜¯å¦è¿æ¥ä¸Šäº†ç½‘ç»œ
NSString *const MPVolumeViewWirelessRoutesAvailableDidChangeNotification;
NSString *const MPVolumeViewWirelessRouteActiveDidChangeNotification;
</code></pre>

<h4>åäºŒã€äº†è§£èœ‚çªç½‘ç»œ</h4>

<p>åœ¨iOS7ä¹‹å‰ï¼Œæ˜¯ä½¿ç”¨Reachabilityæ¥æ£€æµ‹è®¾å¤‡æ˜¯å¦è¿æ¥åˆ°WWANæˆ–æ˜¯Wifiçš„ã€‚iOS7åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæ›´è¿›äº†ä¸€æ­¥ï¼Œå®ƒä¼šå‘Šè¯‰ä½ çš„è®¾å¤‡è¿æ¥ä¸Šçš„æ˜¯é‚£ç§èœ‚çªç½‘ç»œï¼Œæ¯”å¦‚è¯´æ˜¯Edgeç½‘ç»œï¼ŒHSDPAç½‘ç»œï¼Œæˆ–æ˜¯LTEç½‘ç»œã€‚å‘Šè¯‰ç”¨æˆ·ä»–ä»¬è¿æ¥ä¸Šçš„æ˜¯å“ªç§ç½‘ç»œå¯ä»¥ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå› ä¸ºè¿™æ ·ä»–ä»¬ä¼šçŸ¥é“ç½‘é€Ÿå¦‚ä½•ï¼Œä¸ä¼šå»è¯·æ±‚éœ€è¦é«˜ç½‘é€Ÿçš„ç½‘ç»œè¯·æ±‚ã€‚</p>

<p>è¿™æ˜¯CTTelephonyNetworkInfoçš„éƒ¨åˆ†åŠŸèƒ½ï¼Œå®ƒæ˜¯CoreTelephonyæ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚iOS7è¿˜å¢åŠ äº†currentRadioAccessTechnologyå±æ€§å’ŒCTRadioAccessTechnologyDidChangeNotificationåˆ°è¿™ä¸ªç±»ã€‚è¿˜æœ‰ä¸€äº›æ–°çš„å­—ç¬¦ä¸²å¸¸é‡æ¥å®šä¹‰å¯èƒ½çš„å€¼ï¼Œæ¯”å¦‚è¯´æ˜¯CTRadioAccessTechnologyLTEã€‚</p>

<p>ä»¥ä¸‹ä»£ç å‘Šè¯‰ä½ åœ¨app delegateä¸­å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½ï¼š</p>

<pre><code>@import CoreTelephony.CTTelephonyNetworkInfo; // new modules syntax!
@interface AppDelegate ()
// we need to keep a reference to the CTTelephonyNetworkInfo object, otherwise the notifications won't be fired!
@property (nonatomic, strong) CTTelephonyNetworkInfo *networkInfo;
@end

@implementation ViewController

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // whatever stuff your method does...

    self.networkInfo = [[CTTelephonyNetworkInfo alloc] init];
    NSLog(@"Initial cell connection: %@", self.networkInfo.currentRadioAccessTechnology);
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(radioAccessChanged) name:
     CTRadioAccessTechnologyDidChangeNotification object:nil];

    // whatever stuff your method does...
}

- (void)radioAccessChanged {
    NSLog(@"Now you're connected via %@", self.networkInfo.currentRadioAccessTechnology);
}

@end
</code></pre>

<h6>##æ³¨æ„ï¼šç ”ç©¶ä¸€ä¸‹CTTelephonyNetworkInfo.h æ–‡ä»¶æ¥çœ‹çœ‹æ˜¯å¦æœ‰å…¶ä»–æ— çº¿ç½‘ç»œç±»å‹çš„çš„å­—ç¬¦ä¸²å¸¸é‡ã€‚å¦‚æœè®¾å¤‡æ²¡æœ‰è¿ä¸Šçš„è¯ï¼ŒcurrentRadioAccessTechnology åˆ™ä¼šè¿”å›nilã€‚</h6>

<h4>åä¸‰ã€é€šè¿‡iCloudåŒæ­¥ç”¨æˆ·è®¾å¤‡çš„å¯†ç </h4>

<p>iOS7ä»¥åŠMaverickså¢åŠ äº†iCloud Keychainæ¥æä¾›å¯†ç ï¼Œä»¥åŠiCloudä¸­ä¸€äº›æ•æ„Ÿæ•°æ®çš„åŒæ­¥ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡keychainä¸­çš„kSecAttrSynchronizable keyæ¥éå†dictionaryå¯¹è±¡ã€‚</p>

<p>ç”±äºç›´æ¥å¤„ç†keychainæ¯”è¾ƒéš¾ï¼Œå°è£…åº“æä¾›äº†ä¸€ä¸ªç®€å•çš„å¤„ç†keychainçš„æ–¹æ³•ã€‚SSKeychainå°è£…åº“å¯èƒ½æ˜¯æœ€æœ‰åçš„çš„ä¸€ä¸ªï¼Œä½œä¸ºä¸€ç§ç¦åˆ©ï¼Œç°åœ¨å®ƒæ”¯æŒåœ¨iCloudåŒæ­¥ã€‚</p>

<p>ä»¥ä¸‹ä»£ç ç‰‡æ®µæ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨SSKeychainï¼š</p>

<pre><code>#import &lt;SSKeychain.h&gt;

- (BOOL)saveCredentials:(NSError **)error {
    SSKeychainQuery *query = [[SSKeychainQuery alloc] init];
    query.password = @"MySecretPassword";
    query.service = @"MyAwesomeService";
    query.account = @"John Doe";
    query.synchronizable = YES;
    return [query save:&amp;error];
}

- (NSString *)savedPassword:(NSError **)error {
    SSKeychainQuery *query = [[SSKeychainQuery alloc] init];
    query.service = @"MyAwesomeService";
    query.account = @"John Doe";
    query.synchronizable = YES;
    query.password = nil;
    if ([query fetch:&amp;error]) {
        return query.password;
    }
    return nil;
}
</code></pre>

<p>ä¸è¦å¿˜è®°CocoaPodsæ˜¯å¿«é€Ÿä¾¿æ·å®‰è£…SSKeychiançš„å¥½æ–¹æ³•ã€‚</p>

<h4>åå››ã€ä½¿ç”¨NSAttributedStringæ˜¾ç¤ºHTML</h4>

<p>åœ¨appä¸­ä½¿ç”¨webviewæœ‰æ—¶ä¼šè®©äººéå¸¸æ²®ä¸§ï¼Œå³ä½¿åªæ˜¯æ˜¾ç¤ºå°‘é‡çš„HTMLneirong ,webviewä¹Ÿä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜ã€‚ç°åœ¨iOS7è®©è¿™äº›å˜å¾—ç®€å•äº†ï¼Œä½ å¯ä»¥ä»ç”¨å°‘é‡ä»£ç åœ¨HTMLæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªNSAttributedStringï¼Œæ¯”å¦‚ï¼š</p>

<pre><code>NSString *html = @"&lt;bold&gt;Wow!&lt;/bold&gt; Now &lt;em&gt;iOS&lt;/em&gt; can create &lt;h3&gt;NSAttributedString&lt;/h3&gt; from HTMLs!";
NSDictionary *options = @{NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType};

NSAttributedString *attrString = [[NSAttributedString alloc] initWithData:[html dataUsingEncoding:NSUTF8StringEncoding] options:options documentAttributes:nil error:nil];
</code></pre>

<p>ç°åœ¨ä½ å¯ä»¥åœ¨ä»»æ„çš„UIKitå¯¹è±¡ä¸Šä½¿ç”¨NSAttributedString äº†ï¼Œæ¯”å¦‚è¯´æ˜¯ä¸€ä¸ªUILabelæˆ–æ˜¯ä¸€ä¸ªUITextFieldã€‚</p>

<p>æ³¨æ„ï¼šNSHTMLTextDocumentType åªæ˜¯NSDocumentTypeDocumentAttribute keyä¸€ç§å¯èƒ½çš„å€¼ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨NSPlainTextDocumentTypeï¼ŒNSRTFTextDocumentTypeæˆ–æ˜¯NSRTFDTextDocumentTypeã€‚</p>

<p>ä½ è¿˜å¯ä»¥ä»NSAttributedStringä¸­åˆ›å»ºä¸€ä¸ªHTMLå­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>NSAttributedString *attrString; // from previous code
NSDictionary *options = @{NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType};

NSData *htmlData = [attrString dataFromRange:NSMakeRange(0, [attrString length]) documentAttributes:options error:nil];
NSString *htmlString = [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
</code></pre>

<p>ç°åœ¨ä½ ä¼°è®¡åœ¨appä¸­ä¼šæ›´å¤šçš„ä½¿ç”¨HTMLäº†ã€‚</p>

<h4>åäº”ã€ä½¿ç”¨åŸç”Ÿçš„Base64</h4>

<p>Base64æ˜¯ä½¿ç”¨ASCIIç æ˜¾ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„ä¸€ç§æµè¡Œæ–¹æ³•ã€‚ç›´åˆ°ç°åœ¨ï¼Œå¼€å‘è€…è¿˜ä¸å¾—ä¸ä½¿ç”¨å¼€æºçš„å·¥å…·æ¥ç¼–ç è§£ç Base64çš„å†…å®¹ã€‚</p>

<p>ç°åœ¨iOS7å¼•å…¥äº†ä»¥ä¸‹å››ç§æ–°çš„NSDataæ–¹æ³•æ¥æ“ä½œBase64ç¼–ç çš„æ•°æ®ï¼š</p>

<pre><code>// From NSData.h
- (id)initWithBase64EncodedString:(NSString *)base64String options:(NSDataBase64DecodingOptions)options;

- (NSString *)base64EncodedStringWithOptions:(NSDataBase64EncodingOptions)options;

- (id)initWithBase64EncodedData:(NSData *)base64Data options:(NSDataBase64DecodingOptions)options;

- (NSData *)base64EncodedDataWithOptions:(NSDataBase64EncodingOptions)options;
è¿™äº›æ–¹æ³•å¯ä»¥å¸®åŠ©ä½ è½»æ˜“çš„å°†NSDataå¯¹è±¡è½¬åŒ–ä¸ºBase64ï¼Œæˆ–è€…å°†Base64è½¬åŒ–ä¸ºNSData objectã€‚è§ä»¥ä¸‹çš„ä¾‹å­ï¼š


NSData* sampleData = [@"Some sample data" dataUsingEncoding:NSUTF8StringEncoding];

NSString * base64String = [sampleData base64EncodedStringWithOptions:0];
NSLog(@"Base64-encoded string is %@", base64String); // prints "U29tZSBzYW1wbGUgZGF0YQ=="

NSData* dataFromString = [[NSData alloc] initWithBase64EncodedString:base64String options:0];
NSLog(@"String is %@",[NSString stringWithUTF8String:[dataFromString bytes]]); // prints "String is Some sample data"
</code></pre>

<p>å¦‚æœä½ éœ€è¦æ”¯æŒiOS6æˆ–è€…æ›´æ—©ä»¥å‰çš„ç³»ç»Ÿï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p>

<pre><code>/* These methods first appeared in NSData.h on OS X 10.9 and iOS 7.0. They are deprecated in the same releases in favor of
 the methods in the &lt;code&gt;NSDataBase64Encoding&lt;/code&gt; category. However, these methods have existed for several releases, so
 they may be used for applications targeting releases prior to OS X 10.9 and iOS 7.0.
 */
- (id)initWithBase64Encoding:(NSString *)base64String;
- (NSString *)base64Encoding;
</code></pre>

<h4>åå…­ã€ä½¿ç”¨UIApplicationUserDidTakeScreenshotNotificationæ¥æ£€æŸ¥æˆªå›¾</h4>

<p>åœ¨iOS7ä¹‹å‰ï¼ŒåƒSnapshotæˆ–æ˜¯Facebook Pokeè¿™æ ·çš„appæ˜¯ä½¿ç”¨ä¸€äº›å¾ˆç²¾å·§çš„æ–¹æ³•æ¥æ£€æµ‹ç”¨æˆ·æ˜¯å¦æœ‰æˆªå›¾ã€‚ç„¶è€Œï¼ŒiOS7æä¾›ä¸€ä¸ªå´­æ–°çš„æ¨é€æ–¹æ³•ï¼šUIApplicationUserDidTakeScreenshotNotificationã€‚åªè¦åƒå¾€å¸¸ä¸€æ ·è®¢é˜…å³å¯çŸ¥é“ä»€ä¹ˆæ—¶å€™æˆªå›¾äº†ã€‚</p>

<p>æ³¨æ„ï¼šUIApplicationUserDidTakeScreenshotNotification å°†ä¼šåœ¨æˆªå›¾å®Œæˆä¹‹åæ˜¾ç¤ºã€‚ç°åœ¨åœ¨æˆªå›¾æˆªå–ä¹‹å‰æ— æ³•å¾—åˆ°é€šçŸ¥ã€‚å¸Œæœ›è‹¹æœä¼šåœ¨iOS8å½“ä¸­å¢åŠ UIApplicationUserWillTakeScreenshotNotificationã€‚</p>

<h4>åä¸ƒã€å®ç°å¤šè¯­è¨€è¯­éŸ³åˆæˆ</h4>

<p>å¦‚æœå¯ä»¥è®©appè¯´è¯ä¼šä¸ä¼šå¾ˆå¥½å‘¢ï¼ŸiOS7åŠ å…¥äº†ä¸¤ä¸ªæ–°ç±»ï¼šAVSpeechSynthesizer ä»¥åŠAVSpeechUtteranceã€‚è¿™ä¸¤ä¸ªç±»å¯ä»¥ç»™ä½ çš„appå‘å£°ã€‚å¾ˆæœ‰æ„æ€ä¸æ˜¯å—ï¼Ÿæœ‰å¤šç§è¯­è¨€å¯ä¾›é€‰æ‹©â€”â€”Siriä¸ä¼šè¯´çš„è¯­è¨€ä¹Ÿæœ‰ï¼Œæ¯”å¦‚è¯´å·´è¥¿è‘¡è„ç‰™è¯­ã€‚</p>

<p>ä½¿ç”¨è¿™ä¸¤ä¸ªç±»ç»™appæä¾›è¯­è¨€åˆæˆçš„åŠŸèƒ½éå¸¸ç®€å•ã€‚AVSpeechUtterance ä»£è¡¨ä½ æƒ³è¯´ä»€ä¹ˆï¼Œå¦‚ä½•è¯´ã€‚AVSpeechSynthesizer ç”¨æ¥å‘å‡ºè¿™äº›å£°éŸ³ï¼Œè§ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š</p>

<pre><code>AVSpeechSynthesizer *synthesizer = [[AVSpeechSynthesizer alloc] init];
AVSpeechUtterance *utterance =
[AVSpeechUtterance speechUtteranceWithString:@"Wow, I have such a nice voice!"];
utterance.rate = AVSpeechUtteranceMaximumSpeechRate / 4.0f;
utterance.voice = [AVSpeechSynthesisVoice voiceWithLanguage:@"en-US"]; // defaults to your system language
[synthesizer speakUtterance:utterance];
</code></pre>

<h4>åå…«ã€ä½¿ç”¨äº†æ–°çš„UIScreenEdgePanGestureRecognizer</h4>

<p>UIScreenEdgePanGestureRecognizer ç»§æ‰¿è‡ªUIPanGestureRecognizer ï¼Œå®ƒå¯ä»¥è®©ä½ ä»å±å¹•è¾¹ç•Œå³å¯æ£€æµ‹æ‰‹åŠ¿ã€‚</p>

<p>ä½¿ç”¨æ–°çš„æ‰‹åŠ¿è¯†åˆ«å™¨å¾ˆç®€å•ï¼Œè§ä»¥ä¸‹ï¼š</p>

<pre><code>UIScreenEdgePanGestureRecognizer *recognizer = [[UIScreenEdgePanGestureRecognizer alloc] initWithTarget:self action:@selector(handleScreenEdgeRecognizer:)];
recognizer.edges = UIRectEdgeLeft;
</code></pre>

<p>[self.view addGestureRecognizer:recognizer];
åä¹ã€ä½¿ç”¨UIScrollViewKeyboardDismissModeå®ç°äº†Message appçš„è¡Œä¸º
åƒMessages appä¸€æ ·åœ¨æ»šåŠ¨çš„æ—¶å€™å¯ä»¥è®©é”®ç›˜æ¶ˆå¤±æ˜¯ä¸€ç§éå¸¸å¥½çš„ä½“éªŒã€‚ç„¶è€Œï¼Œå°†è¿™ç§è¡Œä¸ºæ•´åˆåˆ°ä½ çš„appå¾ˆéš¾ã€‚å¹¸è¿çš„æ˜¯ï¼Œè‹¹æœç»™UIScrollViewæ·»åŠ äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å±æ€§keyboardDismissModeï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿å¾ˆå¤šã€‚</p>

<p>ç°åœ¨ä»…ä»…åªéœ€è¦åœ¨Storyboardä¸­æ”¹å˜ä¸€ä¸ªç®€å•çš„å±æ€§ï¼Œæˆ–è€…å¢åŠ ä¸€è¡Œä»£ç ï¼Œä½ çš„appå¯ä»¥å’ŒåŠåˆ°å’ŒMessages appä¸€æ ·çš„äº‹æƒ…äº†ã€‚</p>

<p>è¿™ä¸ªå±æ€§ä½¿ç”¨äº†æ–°çš„UIScrollViewKeyboardDismissMode enumæšä¸¾ç±»å‹ã€‚è¿™ä¸ªenumæšä¸¾ç±»å‹å¯èƒ½çš„å€¼å¦‚ä¸‹ï¼š</p>

<pre><code>UIScrollViewKeyboardDismissModeNone        // the keyboard is not dismissed automatically when scrolling
UIScrollViewKeyboardDismissModeOnDrag      // dismisses the keyboard when a drag begins
UIScrollViewKeyboardDismissModeInteractive // the keyboard follows the dragging touch off screen, and may be
pulled upward again to cancel the dismiss
</code></pre>

<p>ä»¥ä¸‹æ˜¯è®©é”®ç›˜å¯ä»¥åœ¨æ»šåŠ¨çš„æ—¶å€™æ¶ˆå¤±éœ€è¦è®¾ç½®çš„å±æ€§ï¼š</p>

<p><img src="/images/banbenshipei005.png" title="Caption" ></p>

<h4>äºŒåã€ä½¿ç”¨Core Imageæ¥æ£€æµ‹çœ¨çœ¼ä»¥åŠå¾®ç¬‘</h4>

<p>iOSç»™Core Imageå¢åŠ äº†ä¸¤ç§äººè„¸æ£€æµ‹åŠŸèƒ½ï¼šCIDetectorEyeBlinkä»¥åŠCIDetectorSmileã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ä½ ç°åœ¨å¯ä»¥åœ¨ç…§ç‰‡ä¸­æ£€æµ‹å¾®ç¬‘ä»¥åŠçœ¨çœ¼ã€‚</p>

<p>ä»¥ä¸‹æ˜¯åœ¨appä¸­ä½¿ç”¨å®ƒçš„æ–¹æ³•ï¼š</p>

<pre><code>UIImage *image = [UIImage imageNamed:@"myImage"];
CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeFace
                                          context:nil
                                          options:@{CIDetectorAccuracy: CIDetectorAccuracyHigh}];

NSDictionary *options = @{ CIDetectorSmile: @YES, CIDetectorEyeBlink: @YES };

NSArray *features = [detector featuresInImage:image.CIImage options:options];

for (CIFaceFeature *feature in features) {
    NSLog(@"Bounds: %@", NSStringFromCGRect(feature.bounds));

if (feature.hasSmile) {
    NSLog(@"Nice smile!");
} else {
    NSLog(@"Why so serious?");

if (feature.leftEyeClosed || feature.rightEyeClosed) {
    NSLog(@"Open your eyes!");
}
</code></pre>

<p>}</p>

<h4>äºŒåä¸€ã€ç»™UITextViewå¢åŠ äº†é“¾æ¥</h4>

<p>ç°åœ¨åœ¨iOSæ·»åŠ ä½ è‡ªå·±çš„Twitterè´¦æˆ·æ›´åŠ ç®€å•äº†ï¼Œç°åœ¨ä½ å¯ä»¥ç»™ä¸€ä¸ªNSAttributedStringå¢åŠ é“¾æ¥äº†ï¼Œç„¶åå½“å®ƒè¢«ç‚¹å‡»çš„æ—¶å€™å”¤èµ·ä¸€ä¸ªå®šåˆ¶çš„actionã€‚</p>

<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªNSAttributedStringç„¶åå¢åŠ ç»™å®ƒå¢åŠ ä¸€ä¸ªNSLinkAttributeName å±æ€§ï¼Œè§ä»¥ä¸‹ï¼š</p>

<pre><code>NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:@"This is an example by @marcelofabri_"];
[attributedString addAttribute:NSLinkAttributeName
                         value:@"username://marcelofabri_"
                         range:[[attributedString string] rangeOfString:@"@marcelofabri_"]];


NSDictionary *linkAttributes = @{NSForegroundColorAttributeName: [UIColor greenColor],
                                 NSUnderlineColorAttributeName: [UIColor lightGrayColor],
                                 NSUnderlineStyleAttributeName: @(NSUnderlinePatternSolid)};

// assume that textView is a UITextView previously created (either by code or Interface Builder)
textView.linkTextAttributes = linkAttributes; // customizes the appearance of links
textView.attributedText = attributedString;
textView.delegate = self;
</code></pre>

<p>è¿™æ ·å°±å¯ä»¥è®©é“¾æ¥åœ¨æ–‡æœ¬ä¸­æ˜¾ç¤ºã€‚ç„¶è€Œï¼Œä½ ä¹Ÿå¯ä»¥æ§åˆ¶å½“é“¾æ¥è¢«ç‚¹å‡»çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œå®ç°è¿™ä¸ªå¯ä»¥ä½¿ç”¨UITextViewDelegateåè®®çš„æ–°çš„shouldInteractWithURLæ–¹æ³•ï¼Œå°±åƒè¿™æ ·ï¼š</p>

<pre><code>- (BOOL)textView:(UITextView *)textView shouldInteractWithURL:(NSURL *)URL inRange:(NSRange)characterRange {
    if ([[URL scheme] isEqualToString:@"username"]) {
        NSString *username = [URL host];
        // do something with this username
        // ...
        return NO;
    }
    return YES; // let the system open this URL
}
</code></pre>

<h2>iOS8æ–°ç‰¹æ€§</h2>

<h4>ä¸€ã€UIAlertControllerå¯¹alert&amp;actionSheetçš„å°è£…</h4>

<p>UIAlertController.h</p>

<p>æç¤ºæ¡†æŒ‰é’®çš„é€‰æ‹©</p>

<pre><code>typedef NS_ENUM(NSInteger, UIAlertActionStyle) {

UIAlertActionStyleDefault = 0,

UIAlertActionStyleCancel,

UIAlertActionStyleDestructive

} NS_ENUM_AVAILABLE_IOS(8_0);
</code></pre>

<p>æç¤ºæ¡†çš„æ ·å¼</p>

<pre><code>typedef NS_ENUM(NSInteger, UIAlertControllerStyle) {

UIAlertControllerStyleActionSheet = 0,

UIAlertControllerStyleAlert

} NS_ENUM_AVAILABLE_IOS(8_0);

NS_CLASS_AVAILABLE_IOS(8_0) @interface UIAlertAction : NSObject &lt;NSCopying&gt;
</code></pre>

<p>åˆ›å»ºæç¤ºæ¡†æŒ‰é’®</p>

<pre><code>+ (instancetype)actionWithTitle:(NSString *)title style:(UIAlertActionStyle)style handler:(void (^)(UIAlertAction *action))handler;

@property (nonatomic, readonly) NSString *title;

@property (nonatomic, readonly) UIAlertActionStyle style;

@property (nonatomic, getter=isEnabled) BOOL enabled;

@end

NS_CLASS_AVAILABLE_IOS(8_0) @interface UIAlertController : UIViewController
</code></pre>

<p>åˆ›å»ºæç¤ºæ¡†</p>

<pre><code>+ (instancetype)alertControllerWithTitle:(NSString *)title message:(NSString *)message preferredStyle:(UIAlertControllerStyle)preferredStyle;
</code></pre>

<p>æ·»åŠ æŒ‰é’®</p>

<pre><code>- (void)addAction:(UIAlertAction *)action;

@property (nonatomic, readonly) NSArray *actions;
</code></pre>

<p>æ·»åŠ æ–‡æœ¬è¾“å…¥æ¡†</p>

<pre><code>- (void)addTextFieldWithConfigurationHandler:(void (^)(UITextField *textField))configurationHandler;

@property (nonatomic, readonly) NSArray *textFields;

@property (nonatomic, copy) NSString *title;

@property (nonatomic, copy) NSString *message;

@property (nonatomic, readonly) UIAlertControllerStyle preferredStyle;
</code></pre>

<p>ç®€å•å®ç”¨ç¤ºä¾‹ï¼š</p>

<pre><code>// 1.åˆ›å»ºæç¤ºæ¡†å¯¹è±¡ï¼Œé»˜è®¤æ˜¯actionSheetæ•ˆæœ
UIAlertController *alert = [UIAlertController alertControllerWithTitle:@"æ³¨æ„" message:@"æˆ‘çš„å‘ˆç°æ–¹å¼å˜äº†" preferredStyle:UIAlertControllerStyleAlert];

// 2.åˆ›å»ºå–æ¶ˆæŒ‰é’®å¹¶æ·»åŠ åˆ°æç¤ºæ¡†ä¸Š
[alert addAction:[UIAlertAction actionWithTitle:@"å–æ¶ˆ" style:UIAlertActionStyleCancel handler:^(UIAlertAction *action) {

    NSLog(@"å–æ¶ˆæŒ‰é’®è¢«ç‚¹å‡»äº†");
}]];

// 3.å‘ˆç°æç¤ºæ¡†
[self presentViewController:alert animated:YES completion:nil];
</code></pre>

<h4>äºŒã€UIPopoverControllerç›´æ¥é€šè¿‡presentæ–¹å¼å‘ˆç°</h4>

<pre><code>UIViewController.h


typedef NS_ENUM(NSInteger, UIModalPresentationStyle) {

UIModalPresentationFullScreen = 0,

UIModalPresentationPageSheet NS_ENUM_AVAILABLE_IOS(3_2),

UIModalPresentationFormSheet NS_ENUM_AVAILABLE_IOS(3_2),

UIModalPresentationCurrentContext NS_ENUM_AVAILABLE_IOS(3_2),

UIModalPresentationCustom NS_ENUM_AVAILABLE_IOS(7_0),

UIModalPresentationOverFullScreen NS_ENUM_AVAILABLE_IOS(8_0),

UIModalPresentationOverCurrentContext NS_ENUM_AVAILABLE_IOS(8_0),

UIModalPresentationPopover NS_ENUM_AVAILABLE_IOS(8_0),

UIModalPresentationNone NS_ENUM_AVAILABLE_IOS(7_0) = -1,

};

@property (nonatomic,readonly) UIPopoverPresentationController *popoverPresentationController NS_AVAILABLE_IOS(8_0);
</code></pre>

<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>

<pre><code>// 1.åˆ›å»ºå†…å®¹æ§åˆ¶å™¨
UITableViewController *contentVc = [[UITableViewController alloc] init];

// 2.1 è®¾ç½®å‘ˆç°æ–¹å¼
contentVc.modalPresentationStyle = UIModalPresentationPopover;

// 2.2è®¾ç½®åœ¨å¯¼èˆªæ çš„å·¦è¾¹æŒ‰é’®å‘ˆç°
contentVc.popoverPresentationController.barButtonItem = self.navigationItem.leftBarButtonItem;

// 3.å‘ˆç°
[self presentViewController:contentVc animated:YES completion:nil];
ä»¥å‰çš„æ–¹å¼ï¼š



// 1.åˆ›å»ºå†…å®¹æ§åˆ¶å™¨
UITableViewController *contentVc = [[UITableViewController alloc] init];

// 2.åˆ›å»ºpopover
UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:contentVc];

popover.popoverContentSize = CGSizeMake(100, 100);

// 3.å‘ˆç°
[popover presentPopoverFromBarButtonItem:self.navigationItem.leftBarButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
</code></pre>

<h4>ä¸‰ã€è·å–ç”¨æˆ·æˆæƒçš„ç”¨æˆ·éšç§ä¿æŠ¤</h4>

<p>åœ°å›¾å®šä½ç¤ºä¾‹ ï¼š</p>

<pre><code>// å¯¼å…¥å®šä½æ¡†æ¶
#import &lt;CoreLocation/CoreLocation.h&gt;

@interface ViewController ()&lt;CLLocationManagerDelegate&gt;

// è®¾ç½®å®šä½å¯¹è±¡
@property(nonatomic,strong)CLLocationManager* maneger;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    // å½“ä½¿ç”¨iOS8å®šä½çš„æ—¶å€™éœ€è¦è¯·æ±‚ç”¨æˆ·æˆæƒï¼Œä¸”åœ¨info.plisté‡Œæ·»åŠ å­—æ®µNSLocationAlwaysUsageDescription è¯·æ±‚ç”¨æˆ·æˆæƒçš„æè¿°
    // iOS7ä»…ä»…éœ€è¦åœ¨info.plisté‡Œæ·»åŠ å­—æ®µPrivacy - Location Usage Description è¯·æ±‚ç”¨æˆ·æˆæƒçš„æè¿°
    // ä¸éœ€è¦å†å†™ä¸‹é¢çš„ä»£ç 
    if (IOS8) {
        [self.maneger requestAlwaysAuthorization];//è¯·æ±‚ç”¨æˆ·æˆæƒ 
    }

    // å¼€å¯å®šä½
    [self.maneger startUpdatingLocation];

}
</code></pre>

<h4>å››ã€é’ˆå¯¹å±å¹•é€‚é…åº”è¿è€Œç”Ÿçš„size classes</h4>

<p>size classesæ˜¯ä¸ºäº†è§£å†³storyboardåªèƒ½è®¢åˆ¶ä¸€ç§å±å¹•æ ·å¼çš„é—®é¢˜ï¼Œå®ƒä¸å†æ˜¯å…·ä½“çš„å°ºå¯¸ï¼Œè€Œæ˜¯æŠ½è±¡å°ºå¯¸é€šè¿‡å®½/é«˜ çš„compactã€anyã€regular ç»„æˆäº†ä¹ç§ç»„åˆåŒ…å«äº†æ‰€æœ‰è‹¹æœè®¾å¤‡çš„å°ºå¯¸ã€‚</p>

<h2>iOS9æ–°ç‰¹æ€§</h2>

<h4>ä¸€ã€ç½‘ç»œé€‚é…</h4>

<p>iOS9ç³»ç»Ÿå‘é€çš„ç½‘ç»œè¯·æ±‚å°†ç»Ÿä¸€ä½¿ç”¨TLS 1.2 SSLã€‚é‡‡ç”¨TLS 1.2 åè®®ï¼Œç›®çš„æ˜¯å¼ºåˆ¶å¢å¼ºæ•°æ®è®¿é—®å®‰å…¨ï¼Œè€Œä¸”ç³»ç»ŸFoundationæ¡†æ¶ä¸‹çš„ç›¸å…³ç½‘ç»œè¯·æ±‚ï¼Œå°†ä¸å†é»˜è®¤ä½¿ç”¨HTTPç­‰ä¸å®‰å…¨çš„ç½‘ç»œåè®®ï¼Œè€Œé»˜è®¤é‡‡ç”¨TLS 1.2ã€‚æœåŠ¡å™¨å› æ­¤éœ€è¦æ›´æ–°ï¼Œä»¥è§£æç›¸å…³æ•°æ®ã€‚å¦‚ä¸æ›´æ–°ï¼Œå¯é€šè¿‡åœ¨ info.plist ä¸­å£°æ˜ï¼Œå€’é€€å›ä¸å®‰å…¨çš„ç½‘ç»œè¯·æ±‚ã€‚</p>

<p>ä»€ä¹ˆæ˜¯SSL/TLSï¼Ÿè·ŸHTTPå’ŒHTTPSæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</p>

<p>è·Ÿå¾€å¸¸ä¸€æ ·ï¼Œå…ˆè¯´ç»“è®ºï¼š</p>

<p>HTTP + SSL/TLS + TCP = HTTPS
TLS æ˜¯ SSL æ–°çš„åˆ«ç§°ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>

<p>â€œTLS1.0â€ä¹‹äºâ€œSSL3.1â€ï¼ŒçŠ¹â€œå…¬å…ƒ2015â€ä¹‹äºâ€œæ°‘å›½104â€ï¼Œæˆ–è€…æ˜¯â€œä¸€åƒå…‹â€ä¹‹äºâ€œä¸€å…¬æ–¤â€ï¼Œæˆ–è€…æ˜¯â€œåŠæ–¤â€ä¹‹äºâ€œå…«ä¸¤â€ï¼šç§°å‘¼ä¸åŒï¼Œä½†æ„æ€ç›¸åŒã€‚</p>

<p>SSL 3.0ç‰ˆæœ¬ä¹‹åçš„è¿­ä»£ç‰ˆæœ¬è¢«é‡æ–°å‘½åä¸ºTLS 1.0ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š</p>

<p>TLS 1.0 ï¼ SSL 3.1
æ‰€ä»¥ä»–ä»¬æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬å¹³å¸¸ä¹Ÿç»å¸¸ç®€å•è§åˆ° â€œSSL/TLSâ€ è¿™ç§è¯´æ³•ã€‚å¸¸ç”¨çš„æ˜¯ä¸‹é¢è¿™äº›ï¼š</p>

<pre><code>SSL 2.0

SSL 3.0

TLS 1.0 (SSL 3.1)

TLS 1.1 (SSL 3.1)

TLS 1.2 (SSL 3.1)
</code></pre>

<p>é‚£ä¸ºä»€ä¹ˆæ ‡é¢˜æ˜¯â€œä½¿ç”¨HTTPSâ€è€Œæ²¡æœ‰æåŠSSLå’ŒTLSä»€ä¹ˆäº‹ï¼Ÿ è¦ç†è§£è¿™ä¸ªï¼Œè¦çœ‹ä¸‹ä¸€ä¸ªå…¬å¼ï¼š</p>

<pre><code>HTTP + SSL/TLS + TCP = HTTPS
</code></pre>

<p>æ‰“ä¸ªæ¯”æ–¹ï¼šå¦‚æœåŸæ¥çš„ HTTP æ˜¯å¡‘æ–™æ°´ç®¡ï¼Œå®¹æ˜“è¢«æˆ³ç ´ï¼›é‚£ä¹ˆå¦‚ä»Šæ–°è®¾è®¡çš„ HTTPS å°±åƒæ˜¯åœ¨åŸæœ‰çš„å¡‘æ–™æ°´ç®¡ä¹‹å¤–ï¼Œå†åŒ…ä¸€å±‚é‡‘å±æ°´ç®¡ã€‚ä¸€æ¥ï¼ŒåŸæœ‰çš„å¡‘æ–™æ°´ç®¡ç…§æ ·è¿è¡Œï¼›äºŒæ¥ï¼Œç”¨é‡‘å±åŠ å›ºäº†ä¹‹åï¼Œä¸å®¹æ˜“è¢«æˆ³ç ´ã€‚</p>

<p>ç›®å‰ï¼Œåº”ç”¨æœ€å¹¿æ³›çš„æ˜¯TLS 1.0ï¼Œæ¥ä¸‹æ¥æ˜¯SSL 3.0ã€‚ä½†æ˜¯ï¼Œä¸»æµæµè§ˆå™¨éƒ½å·²ç»å®ç°äº†TLS 1.2çš„æ”¯æŒã€‚Appleè®©ä½ çš„HTTPé‡‡ç”¨SSL/TLSåè®®ï¼Œå°±æ˜¯è®©ä½ ä»HTTPè½¬åˆ°HTTPSã€‚</p>

<p>ä»¥å‰çš„HTTPä¸æ˜¯ä¹Ÿèƒ½ç”¨å—ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨SSL/TLSï¼Œé—²å¾—æ…Œï¼Ÿï¼Appleæ˜¯ä¸æ˜¯åˆåœ¨åäººç±»ï¼Ÿ</p>

<p>ä¸ä½¿ç”¨SSL/TLSçš„HTTPé€šä¿¡ï¼Œå°±æ˜¯ä¸åŠ å¯†çš„é€šä¿¡ï¼</p>

<p>æ‰€æœ‰ä¿¡æ¯æ˜æ–‡ä¼ æ’­ï¼Œå¸¦æ¥äº†ä¸‰å¤§é£é™©ï¼š</p>

<pre><code>çªƒå¬é£é™©ï¼ˆeavesdroppingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥è·çŸ¥é€šä¿¡å†…å®¹ã€‚

ç¯¡æ”¹é£é™©ï¼ˆtamperingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥ä¿®æ”¹é€šä¿¡å†…å®¹ã€‚

å†’å……é£é™©ï¼ˆpretendingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥å†’å……ä»–äººèº«ä»½å‚ä¸é€šä¿¡ã€‚
</code></pre>

<p>SSL/TLSåè®®æ˜¯ä¸ºäº†è§£å†³è¿™ä¸‰å¤§é£é™©è€Œè®¾è®¡çš„ï¼Œå¸Œæœ›è¾¾åˆ°ï¼š</p>

<pre><code>æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯åŠ å¯†ä¼ æ’­ï¼Œç¬¬ä¸‰æ–¹æ— æ³•çªƒå¬ã€‚

å…·æœ‰æ ¡éªŒæœºåˆ¶ï¼Œä¸€æ—¦è¢«ç¯¡æ”¹ï¼Œé€šä¿¡åŒæ–¹ä¼šç«‹åˆ»å‘ç°ã€‚

é…å¤‡èº«ä»½è¯ä¹¦ï¼Œé˜²æ­¢èº«ä»½è¢«å†’å……ã€‚

å¦‚ä½•é€‚é…ï¼Ÿ---å¼±å¼±åœ°é—®ä¸‹ï¼šåŠ ç­è¦å¤šä¹…ï¼Ÿ
</code></pre>

<p>æ­£å¦‚æ–‡ç« å¼€å¤´æ‰€è¯´ï¼š</p>

<p>TLS 1.2 åè®® å¼ºåˆ¶å¢å¼ºæ•°æ®è®¿é—®å®‰å…¨ ç³»ç»Ÿ Foundation æ¡†æ¶ä¸‹çš„ç›¸å…³ç½‘ç»œè¯·æ±‚ï¼Œå°†ä¸å†é»˜è®¤ä½¿ç”¨ HTTP ç­‰ä¸å®‰å…¨çš„ç½‘ç»œåè®®ï¼Œè€Œé»˜è®¤é‡‡ç”¨ TLS 1.2ã€‚æœåŠ¡å™¨å› æ­¤éœ€è¦æ›´æ–°ï¼Œä»¥è§£æç›¸å…³æ•°æ®ã€‚å¦‚ä¸æ›´æ–°ï¼Œå¯é€šè¿‡åœ¨ Info.plist ä¸­å£°æ˜ï¼Œå€’é€€å›ä¸å®‰å…¨çš„ç½‘ç»œè¯·æ±‚ã€‚</p>

<ul>
<li><p>æ–¹æ¡ˆä¸€ï¼šç«‹å³è®©å…¬å¸çš„æœåŠ¡ç«¯å‡çº§ä½¿ç”¨TLS 1.2ã€‚</p></li>
<li><p>æ–¹æ¡ˆäºŒï¼šè™½Appleä¸å»ºè®®ï¼Œä½†å¯é€šè¿‡åœ¨ Info.plist ä¸­å£°æ˜ï¼Œå€’é€€å›ä¸å®‰å…¨çš„ç½‘ç»œè¯·æ±‚ä¾ç„¶èƒ½è®©Appè®¿é—®æŒ‡å®šhttpï¼Œç”šè‡³ä»»æ„çš„httpã€‚</p></li>
</ul>


<p>info.plist é…ç½®ä¸­çš„XMLæºç å¦‚ä¸‹æ‰€ç¤º:</p>

<p><img src="/images/banbenshipei006.jpg" title="Caption" ></p>

<p>ä¸Šé¢æ˜¯æ¯”è¾ƒä¸¥è°¨çš„åšæ³•ï¼ŒæŒ‡å®šäº†èƒ½è®¿é—®å“ªäº›ç‰¹å®šçš„HTTPã€‚å½“ç„¶ä¹Ÿæœ‰æš´åŠ›çš„åšæ³•ï¼š å½»åº•å€’é€€å›ä¸å®‰å…¨çš„HTTPç½‘ç»œè¯·æ±‚ï¼Œèƒ½ä»»æ„è¿›è¡ŒHTTPè¯·æ±‚ï¼Œæ¯”å¦‚ä½ åœ¨å¼€å‘ä¸€æ¬¾æµè§ˆå™¨Appï¼Œæˆ–è€…ä½ æƒ³å·æ‡’ï¼Œæˆ–è€…åå°æƒ³å·æ‡’ï¼Œæˆ–è€…å…¬å¸ä¸ç»™ä½ å‡çº§æœåŠ¡å™¨ã€‚ä½†ç›®å‰Appleçš„å®˜æ–¹æ–‡æ¡£å¹¶æœªæåŠå¦‚ä½•åœ¨ info.plist é…ç½®å¯ä»¥å‚è€ƒæœ¬æ–‡ï¼š<a href="http://blog.6ag.cn/1065.html">http://blog.6ag.cn/1065.html</a></p>

<h4>äºŒã€æ›´çµæ´»çš„åå°å®šä½</h4>

<p>å¦‚æœä¸é€‚é…iOS9ï¼Œå°±ä¸èƒ½å·å·åœ¨åå°å®šä½ã€‚ä¸è¿‡è‹¹æœå°†å…è®¸å‡ºç°è¿™ç§åœºæ™¯ï¼š</p>

<p>åŒä¸€Appä¸­çš„å¤šä¸ªlocation managerï¼Œä¸€äº›åªèƒ½åœ¨å‰å°å®šä½ï¼Œå¦ä¸€äº›å¯åœ¨åå°å®šä½ï¼Œå¹¶å¯éšæ—¶å¼€å¯æˆ–è€…å…³é—­ç‰¹å®šlocation managerçš„åå°å®šä½ã€‚</p>

<p>å¦‚ä½•å·å·åœ¨åå°å®šä½ï¼š</p>

<pre><code>// 1. å®ä¾‹åŒ–å®šä½ç®¡ç†å™¨
_locationManager = [[CLLocationManager alloc] init];

// 2. è®¾ç½®ä»£ç†
_locationManager.delegate = self;

// 3. å®šä½ç²¾åº¦
[_locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

// 4.è¯·æ±‚ç”¨æˆ·æƒé™ï¼šåˆ†ä¸ºï¼š?åªåœ¨å‰å°å¼€å¯å®šä½?åœ¨åå°ä¹Ÿå¯å®šä½ï¼Œ
//æ³¨æ„ï¼šå»ºè®®åªè¯·æ±‚?å’Œ?ä¸­çš„ä¸€ä¸ªï¼Œå¦‚æœä¸¤ä¸ªæƒé™éƒ½éœ€è¦ï¼Œåªè¯·æ±‚?å³å¯ï¼Œ
//??è¿™æ ·çš„é¡ºåºï¼Œå°†å¯¼è‡´bugï¼šç¬¬ä¸€æ¬¡å¯åŠ¨ç¨‹åºåï¼Œç³»ç»Ÿå°†åªè¯·æ±‚?çš„æƒé™ï¼Œ?çš„æƒé™ç³»ç»Ÿä¸ä¼šè¯·æ±‚ï¼Œåªä¼šåœ¨ä¸‹ä¸€æ¬¡å¯åŠ¨åº”ç”¨æ—¶è¯·æ±‚?
if ([[[UIDevice currentDevice] systemVersion] floatValue] &gt;= 8) {
    //[_locationManager requestWhenInUseAuthorization];//?åªåœ¨å‰å°å¼€å¯å®šä½
    [_locationManager requestAlwaysAuthorization];//?åœ¨åå°ä¹Ÿå¯å®šä½
}

// 5.iOS9æ–°ç‰¹æ€§ï¼šå°†å…è®¸å‡ºç°è¿™ç§åœºæ™¯ï¼šåŒä¸€appä¸­å¤šä¸ªlocation managerï¼šä¸€äº›åªèƒ½åœ¨å‰å°å®šä½ï¼Œå¦ä¸€äº›å¯åœ¨åå°å®šä½ï¼ˆå¹¶å¯éšæ—¶ç¦æ­¢å…¶åå°å®šä½ï¼‰ã€‚
if ([[[UIDevice currentDevice] systemVersion] floatValue] &gt;= 9) {
    _locationManager.allowsBackgroundLocationUpdates = YES;
}

// 6. æ›´æ–°ç”¨æˆ·ä½ç½®
[_locationManager startUpdatingLocation];
ä½†æ˜¯å¦‚æœç…§ç€è¿™ç§æ–¹å¼å°è¯•ï¼Œè€Œæ²¡æœ‰é…ç½®info.plistï¼Œ100%ä½ çš„ç¨‹åºä¼šå´©æºƒæ‰ï¼Œå¹¶æŠ¥é”™ï¼š

*** Assertion failure in -[CLLocationManager setAllowsBackgroundLocationUpdates:], /BuildRoot/Library/Caches/com.apple.xbs/Sources/CoreLocationFramework_Sim/CoreLocation-1808.1.5/Framework/CoreLocation/CLLocationManager.m:593
</code></pre>

<p>è¦å°† info.plist é…ç½®å¦‚ä¸‹ï¼š</p>

<p><img src="/images/banbenshipei007.png" title="Caption" ></p>

<p>å¯¹åº”çš„ Info.plist çš„XMLæºç æ˜¯ï¼š</p>

<p><img src="/images/banbenshipei008.jpg" title="Caption" ></p>

<h4>ä¸‰ã€Bitcode</h4>

<p>bitcodeçš„ç†è§£åº”è¯¥æ˜¯æŠŠç¨‹åºç¼–è¯‘æˆçš„ä¸€ç§è¿‡æ¸¡ä»£ç ï¼Œç„¶åè‹¹æœå†æŠŠè¿™ä¸ªè¿‡æ¸¡ä»£ç ç¼–è¯‘æˆå¯æ‰§è¡Œçš„ç¨‹åºã€‚bitcodeä¹Ÿå…è®¸è‹¹æœåœ¨åæœŸé‡æ–°ä¼˜åŒ–æˆ‘ä»¬ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæœ‰ç±»ä¼¼äºAppç˜¦èº«çš„æ€æƒ³ã€‚æœªæ¥Watchåº”ç”¨é¡»åŒ…å«Bitcodeï¼ŒiOSä¸å¼ºåˆ¶ï¼Œä½†Xcode7é»˜è®¤ä¼šå¼€å¯Bitcodeã€‚</p>

<p>ç”¨äº†xcode7çš„ç¼–è¯‘å™¨ç¼–è¯‘ä¹‹å‰æ²¡é—®é¢˜çš„é¡¹ç›®å¯èƒ½ä¼šå‡ºç°ä¸‹åˆ—æŠ¥é”™ã€‚</p>

<pre><code>XXXXâ€™ does not contain bitcode. You must rebuild it with bitcode enabled (Xcode setting ENABLE_BITCODE), obtain an updated library from the vendor, or disable bitcode forthistarget. forarchitecture arm64
</code></pre>

<p>é—®é¢˜çš„åŸå› æ˜¯ï¼šæŸäº›ç¬¬ä¸‰æ–¹åº“è¿˜ä¸æ”¯æŒbitcodeã€‚è¦ä¸ç„¶æ˜¯ç­‰å¾…åº“çš„å¼€å‘è€…å‡çº§äº†æ­¤é¡¹åŠŸèƒ½æˆ‘ä»¬æ›´æ–°åº“ï¼Œè¦ä¸å°±æ˜¯æŠŠè¿™ä¸ªbitcodeç¦ç”¨ã€‚ç¦ç”¨Bitcodeï¼Œæ–¹æ³•è§ä¸‹å›¾ï¼š</p>

<p><img src="/images/banbenshipei009.png" title="Caption" ></p>

<h4>å››ã€ä¼ä¸šçº§åˆ†å‘</h4>

<p>iOS9ä¹‹å‰ï¼Œä¼ä¸šçº§åˆ†å‘ååˆ†æ–¹ä¾¿ï¼šç‚¹å‡»Appå‡ºç°â€œä¿¡ä»»æŒ‰é’®â€ã€‚</p>

<p>iOS9ä»¥åï¼Œä¼ä¸šçº§åˆ†å‘ipaåŒ…å°†é­åˆ°ä¸Macä¸Šdmgå®‰è£…åŒ…ä¸€æ ·çš„å¾…é‡ã€‚é»˜è®¤ä¸èƒ½å®‰è£…ï¼Œä¹Ÿä¸å†å‡ºç°â€œä¿¡ä»»æŒ‰é’®â€ï¼Œå¿…é¡»è®©ç”¨æˆ·è¿›è¡Œgifå›¾ä¸­çš„è®¾ç½®ã€‚</p>

<p><img src="/images/banbenshipei010.png" title="Caption" ></p>

<h4>äº”ã€URL scheme</h4>

<p>URL schemeä¸€èˆ¬ä½¿ç”¨çš„åœºæ™¯æ˜¯åº”ç”¨ç¨‹åºæœ‰åˆ†äº«æˆ–è·³å…¶ä»–å¹³å°æˆæƒçš„åŠŸèƒ½ï¼Œåˆ†äº«æˆ–æˆæƒåå†è·³å›æ¥ã€‚åœ¨iOS8å¹¶æ²¡æœ‰åšè¿‡å¤šé™åˆ¶ï¼Œåœ¨iOS9ä¸­ï¼Œå¦‚æœä½¿ç”¨URL schemeå¿…é¡»åœ¨"info.plist"ä¸­å°†ä½ è¦åœ¨å¤–éƒ¨è°ƒç”¨çš„URL schemeåˆ—ä¸ºç™½åå•ï¼Œå¦åˆ™ä¸èƒ½ä½¿ç”¨ã€‚</p>

<pre><code>canOpenURL: failed forURL : "mqzone://qqapp"- error: "This app is not allowed to query for scheme mqzone"
</code></pre>

<p>å…·ä½“çš„è§£å†³æ–¹æ¡ˆä¹Ÿæ˜¯è¦åœ¨info.plistä¸­è®¾ç½® LSApplicationQueriesSchemes ç±»å‹ä¸ºæ•°ç»„ï¼Œä¸‹é¢æ·»åŠ æ‰€æœ‰ä½ ç”¨åˆ°çš„scheme</p>

<p><img src="/images/banbenshipei011.png" title="Caption" ></p>

<p>æ¨èä¸€ç¯‡åšå®¢: <a href="http://awkwardhare.com/post/121196006730/quick-take-on-ios-9-url-scheme-changes">http://awkwardhare.com/post/121196006730/quick-take-on-ios-9-url-scheme-changes</a></p>

<p>å…¶ä¸­æœ€å…³é”®çš„æ˜¯ä»¥ä¸‹éƒ¨åˆ†ï¼š</p>

<pre><code>If you call the â€œcanOpenURLâ€ method on a URL that is not in your whitelist, it will return â€œNOâ€, even if there is an app installed that has registered to handle this scheme. A â€œThis app is not allowed to query for scheme xxxâ€ syslog entry will appear.

If you call the â€œopenURLâ€ method on a URL that is not in your whitelist, it will fail silently. A â€œThis app is not allowed to query for scheme xxxâ€ syslog entry will appear.
</code></pre>

<h4>å…­ã€æ–°å­—ä½“</h4>

<p>iOS8ä¸­ï¼Œå­—ä½“æ˜¯Helveticaï¼Œä¸­æ–‡çš„å­—ä½“æœ‰ç‚¹ç±»ä¼¼äºâ€œåæ–‡ç»†é»‘â€ã€‚åªæ˜¯è‹¹æœæ‰‹æœºè‡ªå¸¦æ¸²æŸ“ï¼Œæ‰€ä»¥çœ‹ä¸Šå»å¯èƒ½æ¯”æ™®é€šçš„åæ–‡ç»†é»‘è¦ç¾è§‚ã€‚iOS9ä¸­ï¼Œä¸­æ–‡ç³»ç»Ÿå­—ä½“å˜ä¸ºäº†ä¸“ä¸ºä¸­å›½è®¾è®¡çš„â€œè‹¹æ–¹â€ æœ‰ç‚¹ç±»ä¼¼äºä¸€ç§wordå­—ä½“â€œå¹¼åœ†â€ã€‚å­—ä½“æœ‰è½»å¾®çš„åŠ ç²—æ•ˆæœï¼Œå¹¶ä¸”æœ€å…³é”®çš„æ˜¯å­—ä½“é—´éš™å˜å¤§äº†ï¼</p>

<p>æ‰€ä»¥å¾ˆå¤šåŸæœ¬å†™æ­»äº†widthçš„labelå¯èƒ½ä¼šå‡ºç°â€œ&hellip;â€çš„æƒ…å†µã€‚</p>

<p><img src="/images/banbenshipei012.png" title="Caption" ></p>

<p><img src="/images/banbenshipei013.png" title="Caption" ></p>

<p>ä¸Šé¢è¿™ä¸¤å¼ å›¾ä¹Ÿå¯ä»¥ç›´è§‚çš„çœ‹å‡ºåŒä¸€ä¸ªç•Œé¢ï¼ŒåŒä¸€ä¸ªlabelçš„å˜åŒ–ã€‚</p>

<p>æ‰€ä»¥ä¸ºäº†åœ¨ç•Œé¢æ˜¾ç¤ºä¸Šä¸å‡ºé”™ï¼Œå°±ç®—æ˜¯å›ºå®šé•¿åº¦çš„æ–‡å­—ä¹Ÿè¿˜æ˜¯å»ºè®®ä½¿ç”¨sizetofit æˆ–è€…ioså‘ä¸Šå–æ•´ ceilf() æˆ–è€…æå‰è®¡ç®—ã€‚</p>

<pre><code>CGSize size = [title sizeWithAttributes:@{NSFontAttributeName: [UIFont systemFontOfSize:14.0f]}];
CGSize adjustedSize = CGSizeMake(ceilf(size.width), ceilf(size.height));
</code></pre>

<h4>ä¸ƒã€tableview</h4>

<p>è™½ç„¶ç°åœ¨çš„iOS9å·²ç»æ¨é€æ­£å¼ç‰ˆäº†ï¼Œä½†æ˜¯iOS9ä½¿ç”¨æ—¶è¿˜æ˜¯ä¼šæ„Ÿè§‰åˆ°Appæ¯”ä»¥å‰æ›´åŠ å¡é¡¿äº†ï¼ŒtableViewæ‹–åŠ¨æ—¶å¡é¡¿æ˜¾ç¤ºçš„æœ€ä¸ºæ˜æ˜¾ã€‚ å¹¶ä¸”ä¹‹å‰é‡åˆ°ä¸€ä¸ªbugï¼ŒåŸæœ¬å¥½çš„é¡¹ç›®ç”¨xcode7ä¸€ç¼–è¯‘ï¼ŒtableViewåˆ·æ–°å‡ºäº†é—®é¢˜ ï¼Œ[tableView reloadData]æ— æ•ˆï¼Œæœ‰ä¸€è¡Œcellæ˜æ˜æ”¹å˜äº†ä½†æ˜¯åˆ·æ–°ä¸å‡ºæ¥ã€‚ æ„Ÿè§‰å¯èƒ½æ˜¯è¿™ä¸ªæ–¹æ³•å’ŒæŸç§æ–°åŠ çš„ç‰¹æ€§å†²çªäº†ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯reloadDataçš„æ“ä½œè¢«æ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªRunLoopæ‰§è¡Œæœ€ç»ˆå¤±æ•ˆã€‚</p>

<p>è§£å†³çš„æ–¹æ³•æ˜¯ï¼Œæ³¨é‡Š[tableView reloadData]ï¼Œæ”¹ç”¨å±€éƒ¨åˆ·æ–°ï¼Œé—®é¢˜å±…ç„¶å°±è§£å†³äº†ã€‚</p>

<p>[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationNone];</p>

<h4>å…«ã€iPadé€‚é…Slide Over å’Œ Split View</h4>

<p>iPadé€‚é…Slide Over å’Œ Split Viewï¼Œè‹¥æƒ³é€‚é…multi taskingç‰¹æ€§ï¼Œå”¯ä¸€çš„å»ºè®®ï¼š</p>

<p>å¼ƒçº¯ä»£ç ï¼Œæ”¹ç”¨storyboardã€xibï¼Œçºµè§‚è‹¹æœWWDCæ‰€æœ‰Demoå‡æ˜¯å¦‚æ­¤ã€‚</p>

<pre><code>Mysteries of Auto Layout, Part 1
What's New in Storyboards
Implementing UI Designs in Interface Builder
Getting Started with Multitasking on iPad in iOS 9
Optimizing Your App for Multitasking on iPad in iOS
</code></pre>

<p>æœ¬æ–‡éƒ¨åˆ†å†…å®¹æ¥è‡ªç½‘ç»œæ•´ç†ï¼Œå¦‚æœ‰é”™è¯¯è¯·ç•™è¨€æŒ‡å‡ºï¼Œè°¢è°¢ï¼</p>
</div>
  
  




| <a href="/blog/2015/06/10/iosban-ben-gua-pei-wen-ti-(6,7,8,9)/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/20/chang-lian-jie-and-duan-lian-jie/">é•¿é“¾æ¥&amp;çŸ­é“¾æ¥</a></h1>
    
    
      <p class="meta">
        








 <time if="if" updated="updated" data-updated="true" endif="endif" itemprop="datePublished dateCreated"> ordinal </time> 
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>HTTPåè®®ä¸TCP/IPåè®®çš„å…³ç³»</li>
<li>å¦‚ä½•ç†è§£HTTPåè®®æ˜¯æ— çŠ¶æ€çš„</li>
<li>ä»€ä¹ˆæ˜¯é•¿è¿æ¥ã€çŸ­è¿æ¥ï¼Ÿ

<ul>
<li> TCPè¿æ¥</li>
<li> TCPçŸ­è¿æ¥</li>
<li> TCPé•¿è¿æ¥</li>
</ul>
</li>
<li>é•¿è¿æ¥çŸ­è¿æ¥æ“ä½œè¿‡ç¨‹</li>
<li>é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„ä¼˜ç‚¹å’Œç¼ºç‚¹</li>
<li>ä»€ä¹ˆæ—¶å€™ç”¨é•¿è¿æ¥ï¼ŒçŸ­è¿æ¥ï¼Ÿ</li>
</ul>


<h3>HTTPåè®®ä¸TCP/IPåè®®çš„å…³ç³»</h3>

<p>HTTPçš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥æœ¬è´¨ä¸Šæ˜¯TCPé•¿è¿æ¥å’ŒçŸ­è¿æ¥ã€‚HTTPå±äºåº”ç”¨å±‚åè®®ï¼Œåœ¨ä¼ è¾“å±‚ä½¿ç”¨TCPåè®®ï¼Œåœ¨ç½‘ç»œå±‚ä½¿ç”¨IPåè®®ã€‚IPåè®®ä¸»è¦è§£å†³ç½‘ç»œè·¯ç”±å’Œå¯»å€é—®é¢˜ï¼ŒTCPåè®®ä¸»è¦è§£å†³å¦‚ä½•åœ¨IPå±‚ä¹‹ä¸Šå¯é çš„ä¼ é€’æ•°æ®åŒ…ï¼Œä½¿åœ¨ç½‘ç»œä¸Šçš„å¦ä¸€ç«¯æ”¶åˆ°å‘ç«¯å‘å‡ºçš„æ‰€æœ‰åŒ…ï¼Œå¹¶ä¸”é¡ºåºä¸å‘å‡ºé¡ºåºä¸€è‡´ã€‚TCPæœ‰å¯é ï¼Œé¢å‘è¿æ¥çš„ç‰¹ç‚¹ã€‚</p>

<h3>å¦‚ä½•ç†è§£HTTPåè®®æ˜¯æ— çŠ¶æ€çš„</h3>

<p>HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒæŒ‡çš„æ˜¯åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“å®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰“å¼€ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µå’Œä½ ä¹‹å‰æ‰“å¼€è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ã€‚HTTPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„é¢å‘è¿æ¥çš„åè®®ï¼Œæ— çŠ¶æ€ä¸ä»£è¡¨HTTPä¸èƒ½ä¿æŒTCPè¿æ¥ï¼Œæ›´ä¸èƒ½ä»£è¡¨HTTPä½¿ç”¨çš„æ˜¯UDPåè®®ï¼ˆæ— è¿æ¥ï¼‰ã€‚</p>

<h3>ä»€ä¹ˆæ˜¯é•¿è¿æ¥ã€çŸ­è¿æ¥ï¼Ÿ</h3>

<p>åœ¨HTTP/1.0ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯çŸ­è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨æ¯è¿›è¡Œä¸€æ¬¡HTTPæ“ä½œï¼Œå°±å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œä½†ä»»åŠ¡ç»“æŸå°±ä¸­æ–­è¿æ¥ã€‚å¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®çš„æŸä¸ªHTMLæˆ–å…¶ä»–ç±»å‹çš„ Webé¡µä¸­åŒ…å«æœ‰å…¶ä»–çš„Webèµ„æºï¼Œå¦‚JavaScriptæ–‡ä»¶ã€å›¾åƒæ–‡ä»¶ã€CSSæ–‡ä»¶ç­‰ï¼›å½“æµè§ˆå™¨æ¯é‡åˆ°è¿™æ ·ä¸€ä¸ªWebèµ„æºï¼Œå°±ä¼šå»ºç«‹ä¸€ä¸ªHTTPä¼šè¯ã€‚</p>

<p>ä½†ä» HTTP/1.1èµ·ï¼Œé»˜è®¤ä½¿ç”¨é•¿è¿æ¥ï¼Œç”¨ä»¥ä¿æŒè¿æ¥ç‰¹æ€§ã€‚ä½¿ç”¨é•¿è¿æ¥çš„HTTPåè®®ï¼Œä¼šåœ¨å“åº”å¤´æœ‰åŠ å…¥è¿™è¡Œä»£ç ï¼š</p>

<p>Connection:keep-alive</p>

<p>åœ¨ä½¿ç”¨é•¿è¿æ¥çš„æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“HTTPæ•°æ®çš„ TCPè¿æ¥ä¸ä¼šå…³é—­ï¼Œå¦‚æœå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥ã€‚Keep-Aliveä¸ä¼šæ°¸ä¹…ä¿æŒè¿æ¥ï¼Œå®ƒæœ‰ä¸€ä¸ªä¿æŒæ—¶é—´ï¼Œå¯ä»¥åœ¨ä¸åŒçš„æœåŠ¡å™¨è½¯ä»¶ï¼ˆå¦‚Apacheï¼‰ä¸­è®¾å®šè¿™ä¸ªæ—¶é—´ã€‚å®ç°é•¿è¿æ¥è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ”¯æŒé•¿è¿æ¥ã€‚</p>

<p>HTTPåè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Œå®è´¨ä¸Šæ˜¯TCPåè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ã€‚</p>

<h5>TCPè¿æ¥</h5>

<p>å½“ç½‘ç»œé€šä¿¡æ—¶é‡‡ç”¨TCPåè®®æ—¶ï¼Œåœ¨çœŸæ­£çš„è¯»å†™æ“ä½œä¹‹å‰ï¼Œserverä¸clientä¹‹é—´å¿…é¡»å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œå½“è¯»å†™æ“ä½œå®Œæˆåï¼ŒåŒæ–¹ä¸å†éœ€è¦è¿™ä¸ªè¿æ¥ æ—¶å®ƒä»¬å¯ä»¥é‡Šæ”¾è¿™ä¸ªè¿æ¥ï¼Œè¿æ¥çš„å»ºç«‹æ˜¯éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„ï¼Œè€Œé‡Šæ”¾åˆ™éœ€è¦4æ¬¡æ¡æ‰‹ï¼Œæ‰€ä»¥è¯´æ¯ä¸ªè¿æ¥çš„å»ºç«‹éƒ½æ˜¯éœ€è¦èµ„æºæ¶ˆè€—å’Œæ—¶é—´æ¶ˆè€—çš„</p>

<p>ç»å…¸çš„ä¸‰æ¬¡æ¡æ‰‹ç¤ºæ„å›¾ï¼š</p>

<p>ç»å…¸çš„å››æ¬¡æ¡æ‰‹å…³é—­å›¾ï¼š</p>

<h5>TCPçŸ­è¿æ¥</h5>

<p>æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹TCPçŸ­è¿æ¥çš„æƒ…å†µï¼Œclientå‘serverå‘èµ·è¿æ¥è¯·æ±‚ï¼Œserveræ¥åˆ°è¯·æ±‚ï¼Œç„¶ååŒæ–¹å»ºç«‹è¿æ¥ã€‚clientå‘server å‘é€æ¶ˆæ¯ï¼Œserverå›åº”clientï¼Œç„¶åä¸€æ¬¡è¯»å†™å°±å®Œæˆäº†ï¼Œè¿™æ—¶å€™åŒæ–¹ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥å‘èµ·closeæ“ä½œï¼Œä¸è¿‡ä¸€èˆ¬éƒ½æ˜¯clientå…ˆå‘èµ· closeæ“ä½œã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Œä¸€èˆ¬çš„serverä¸ä¼šå›å¤å®Œclientåç«‹å³å…³é—­è¿æ¥çš„ï¼Œå½“ç„¶ä¸æ’é™¤æœ‰ç‰¹æ®Šçš„æƒ…å†µã€‚ä»ä¸Šé¢çš„æè¿°çœ‹ï¼ŒçŸ­è¿æ¥ä¸€èˆ¬åªä¼šåœ¨ client/serveré—´ä¼ é€’ä¸€æ¬¡è¯»å†™æ“ä½œ</p>

<p>çŸ­è¿æ¥çš„ä¼˜ç‚¹æ˜¯ï¼šç®¡ç†èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå­˜åœ¨çš„è¿æ¥éƒ½æ˜¯æœ‰ç”¨çš„è¿æ¥ï¼Œä¸éœ€è¦é¢å¤–çš„æ§åˆ¶æ‰‹æ®µ</p>

<h5>TCPé•¿è¿æ¥</h5>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¨¡æ‹Ÿä¸€ä¸‹é•¿è¿æ¥çš„æƒ…å†µï¼Œclientå‘serverå‘èµ·è¿æ¥ï¼Œserveræ¥å—clientè¿æ¥ï¼ŒåŒæ–¹å»ºç«‹è¿æ¥ã€‚Clientä¸serverå®Œæˆä¸€æ¬¡è¯»å†™ä¹‹åï¼Œå®ƒä»¬ä¹‹é—´çš„è¿æ¥å¹¶ä¸ä¼šä¸»åŠ¨å…³é—­ï¼Œåç»­çš„è¯»å†™æ“ä½œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸ªè¿æ¥ã€‚</p>

<p>é¦–å…ˆè¯´ä¸€ä¸‹TCP/IPè¯¦è§£ä¸Šè®²åˆ°çš„TCPä¿æ´»åŠŸèƒ½ï¼Œä¿æ´»åŠŸèƒ½ä¸»è¦ä¸ºæœåŠ¡å™¨åº”ç”¨æä¾›ï¼ŒæœåŠ¡å™¨åº”ç”¨å¸Œæœ›çŸ¥é“å®¢æˆ·ä¸»æœºæ˜¯å¦å´©æºƒï¼Œä»è€Œå¯ä»¥ä»£è¡¨å®¢æˆ·ä½¿ç”¨èµ„æºã€‚å¦‚æœå®¢æˆ·å·²ç»æ¶ˆå¤±ï¼Œä½¿å¾—æœåŠ¡å™¨ä¸Šä¿ç•™ä¸€ä¸ªåŠå¼€æ”¾çš„è¿æ¥ï¼Œè€ŒæœåŠ¡å™¨åˆåœ¨ç­‰å¾…æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®ï¼Œåˆ™æœåŠ¡å™¨å°†åº”è¿œç­‰å¾…å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œä¿æ´»åŠŸèƒ½å°±æ˜¯è¯•å›¾åœ¨æœåŠ¡ å™¨ç«¯æ£€æµ‹åˆ°è¿™ç§åŠå¼€æ”¾çš„è¿æ¥ã€‚</p>

<p>å¦‚æœä¸€ä¸ªç»™å®šçš„è¿æ¥åœ¨ä¸¤å°æ—¶å†…æ²¡æœ‰ä»»ä½•çš„åŠ¨ä½œï¼Œåˆ™æœåŠ¡å™¨å°±å‘å®¢æˆ·å‘ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œå®¢æˆ·ä¸»æœºå¿…é¡»å¤„äºä»¥ä¸‹4ä¸ªçŠ¶æ€ä¹‹ä¸€ï¼š</p>

<p>å®¢æˆ·ä¸»æœºä¾ç„¶æ­£å¸¸è¿è¡Œï¼Œå¹¶ä»æœåŠ¡å™¨å¯è¾¾ã€‚å®¢æˆ·çš„TCPå“åº”æ­£å¸¸ï¼Œè€ŒæœåŠ¡å™¨ä¹ŸçŸ¥é“å¯¹æ–¹æ˜¯æ­£å¸¸çš„ï¼ŒæœåŠ¡å™¨åœ¨ä¸¤å°æ—¶åå°†ä¿æ´»å®šæ—¶å™¨å¤ä½ã€‚
å®¢æˆ·ä¸»æœºå·²ç»å´©æºƒï¼Œå¹¶ä¸”å…³é—­æˆ–è€…æ­£åœ¨é‡æ–°å¯åŠ¨ã€‚åœ¨ä»»ä½•ä¸€ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·çš„TCPéƒ½æ²¡æœ‰å“åº”ã€‚æœåŠ¡ç«¯å°†ä¸èƒ½æ”¶åˆ°å¯¹æ¢æµ‹çš„å“åº”ï¼Œå¹¶åœ¨75ç§’åè¶…æ—¶ã€‚æœåŠ¡å™¨æ€»å…±å‘é€10ä¸ªè¿™æ ·çš„æ¢æµ‹ ï¼Œæ¯ä¸ªé—´éš”75ç§’ã€‚å¦‚æœæœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°ä¸€ä¸ªå“åº”ï¼Œå®ƒå°±è®¤ä¸ºå®¢æˆ·ä¸»æœºå·²ç»å…³é—­å¹¶ç»ˆæ­¢è¿æ¥ã€‚
å®¢æˆ·ä¸»æœºå´©æºƒå¹¶å·²ç»é‡æ–°å¯åŠ¨ã€‚æœåŠ¡å™¨å°†æ”¶åˆ°ä¸€ä¸ªå¯¹å…¶ä¿æ´»æ¢æµ‹çš„å“åº”ï¼Œè¿™ä¸ªå“åº”æ˜¯ä¸€ä¸ªå¤ä½ï¼Œä½¿å¾—æœåŠ¡å™¨ç»ˆæ­¢è¿™ä¸ªè¿æ¥ã€‚
å®¢æˆ·æœºæ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸å¯è¾¾ï¼Œè¿™ç§æƒ…å†µä¸2ç±»ä¼¼ï¼ŒTCPèƒ½å‘ç°çš„å°±æ˜¯æ²¡æœ‰æ”¶åˆ°æ¢æŸ¥çš„å“åº”ã€‚</p>

<h5>é•¿è¿æ¥çŸ­è¿æ¥æ“ä½œè¿‡ç¨‹</h5>

<p>çŸ­è¿æ¥çš„æ“ä½œæ­¥éª¤æ˜¯ï¼š</p>

<p>å»ºç«‹è¿æ¥â€”â€”æ•°æ®ä¼ è¾“â€”â€”å…³é—­è¿æ¥â€¦å»ºç«‹è¿æ¥â€”â€”æ•°æ®ä¼ è¾“â€”â€”å…³é—­è¿æ¥</p>

<p>é•¿è¿æ¥çš„æ“ä½œæ­¥éª¤æ˜¯ï¼š</p>

<p>å»ºç«‹è¿æ¥â€”â€”æ•°æ®ä¼ è¾“â€¦ï¼ˆä¿æŒè¿æ¥ï¼‰â€¦æ•°æ®ä¼ è¾“â€”â€”å…³é—­è¿æ¥</p>

<h3>é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„ä¼˜ç‚¹å’Œç¼ºç‚¹</h3>

<p>ç”±ä¸Šå¯ä»¥çœ‹å‡ºï¼Œé•¿è¿æ¥å¯ä»¥çœå»è¾ƒå¤šçš„TCPå»ºç«‹å’Œå…³é—­çš„æ“ä½œï¼Œå‡å°‘æµªè´¹ï¼ŒèŠ‚çº¦æ—¶é—´ã€‚å¯¹äºé¢‘ç¹è¯·æ±‚èµ„æºçš„å®¢æˆ·æ¥è¯´ï¼Œè¾ƒé€‚ç”¨é•¿è¿æ¥ã€‚ä¸è¿‡è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå­˜æ´»åŠŸèƒ½çš„æ¢æµ‹å‘¨æœŸå¤ªé•¿ï¼Œè¿˜æœ‰å°±æ˜¯å®ƒåªæ˜¯æ¢æµ‹TCPè¿æ¥çš„å­˜æ´»ï¼Œå±äºæ¯”è¾ƒæ–¯æ–‡çš„åšæ³•ï¼Œé‡åˆ°æ¶æ„çš„è¿æ¥æ—¶ï¼Œä¿æ´»åŠŸèƒ½å°±ä¸å¤Ÿä½¿äº†ã€‚åœ¨é•¿è¿æ¥çš„åº”ç”¨åœºæ™¯ä¸‹ï¼Œclientç«¯ä¸€èˆ¬ä¸ä¼šä¸»åŠ¨å…³é—­å®ƒä»¬ä¹‹é—´çš„è¿æ¥ï¼ŒClientä¸serverä¹‹é—´çš„è¿æ¥å¦‚æœä¸€ç›´ä¸å…³é—­çš„è¯ï¼Œä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œéšç€å®¢æˆ·ç«¯è¿æ¥è¶Šæ¥è¶Šå¤šï¼Œserveræ—©æ™šæœ‰æ‰›ä¸ä½çš„æ—¶å€™ï¼Œè¿™æ—¶å€™serverç«¯éœ€è¦é‡‡å–ä¸€äº›ç­–ç•¥ï¼Œå¦‚å…³é—­ä¸€äº›é•¿æ—¶é—´æ²¡æœ‰è¯»å†™äº‹ä»¶å‘ç”Ÿçš„è¿æ¥ï¼Œè¿™æ ·å¯ ä»¥é¿å…ä¸€äº›æ¶æ„è¿æ¥å¯¼è‡´serverç«¯æœåŠ¡å—æŸï¼›å¦‚æœæ¡ä»¶å†å…è®¸å°±å¯ä»¥ä»¥å®¢æˆ·ç«¯æœºå™¨ä¸ºé¢—ç²’åº¦ï¼Œé™åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯çš„æœ€å¤§é•¿è¿æ¥æ•°ï¼Œè¿™æ ·å¯ä»¥å®Œå…¨é¿å…æŸä¸ªè›‹ç–¼çš„å®¢æˆ·ç«¯è¿ç´¯åç«¯æœåŠ¡ã€‚</p>

<p>çŸ­è¿æ¥å¯¹äºæœåŠ¡å™¨æ¥è¯´ç®¡ç†è¾ƒä¸ºç®€å•ï¼Œå­˜åœ¨çš„è¿æ¥éƒ½æ˜¯æœ‰ç”¨çš„è¿æ¥ï¼Œä¸éœ€è¦é¢å¤–çš„æ§åˆ¶æ‰‹æ®µã€‚ä½†å¦‚æœå®¢æˆ·è¯·æ±‚é¢‘ç¹ï¼Œå°†åœ¨TCPçš„å»ºç«‹å’Œå…³é—­æ“ä½œä¸Šæµªè´¹æ—¶é—´å’Œå¸¦å®½ã€‚</p>

<p>é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„äº§ç”Ÿåœ¨äºclientå’Œserveré‡‡å–çš„å…³é—­ç­–ç•¥ï¼Œå…·ä½“çš„åº”ç”¨åœºæ™¯é‡‡ç”¨å…·ä½“çš„ç­–ç•¥ï¼Œæ²¡æœ‰åå…¨åç¾çš„é€‰æ‹©ï¼Œåªæœ‰åˆé€‚çš„é€‰æ‹©ã€‚</p>

<h3>ä»€ä¹ˆæ—¶å€™ç”¨é•¿è¿æ¥ï¼ŒçŸ­è¿æ¥ï¼Ÿ</h3>

<p>é•¿è¿æ¥å¤šç”¨äºæ“ä½œé¢‘ç¹ï¼Œç‚¹å¯¹ç‚¹çš„é€šè®¯ï¼Œè€Œä¸”è¿æ¥æ•°ä¸èƒ½å¤ªå¤šæƒ…å†µï¼Œã€‚æ¯ä¸ªTCPè¿æ¥éƒ½éœ€è¦ä¸‰æ­¥æ¡æ‰‹ï¼Œè¿™éœ€è¦æ—¶é—´ï¼Œå¦‚æœæ¯ä¸ªæ“ä½œéƒ½æ˜¯å…ˆè¿æ¥ï¼Œå†æ“ä½œçš„è¯é‚£ä¹ˆå¤„ç†é€Ÿåº¦ä¼šé™ä½å¾ˆå¤šï¼Œæ‰€ä»¥æ¯ä¸ªæ“ä½œå®Œåéƒ½ä¸æ–­å¼€ï¼Œæ¬¡å¤„ç†æ—¶ç›´æ¥å‘é€æ•°æ®åŒ…å°±OKäº†ï¼Œä¸ç”¨å»ºç«‹TCPè¿æ¥ã€‚ä¾‹å¦‚ï¼šæ•°æ®åº“çš„è¿æ¥ç”¨é•¿è¿æ¥ï¼Œ å¦‚æœç”¨çŸ­è¿æ¥é¢‘ç¹çš„é€šä¿¡ä¼šé€ æˆsocketé”™è¯¯ï¼Œè€Œä¸”é¢‘ç¹çš„socket åˆ›å»ºä¹Ÿæ˜¯å¯¹èµ„æºçš„æµªè´¹ã€‚</p>

<p>è€ŒåƒWEBç½‘ç«™çš„httpæœåŠ¡ä¸€èˆ¬éƒ½ç”¨çŸ­é“¾æ¥ï¼Œå› ä¸ºé•¿è¿æ¥å¯¹äºæœåŠ¡ç«¯æ¥è¯´ä¼šè€—è´¹ä¸€å®šçš„èµ„æºï¼Œè€ŒåƒWEBç½‘ç«™è¿™ä¹ˆé¢‘ç¹çš„æˆåƒä¸Šä¸‡ç”šè‡³ä¸Šäº¿å®¢æˆ·ç«¯çš„è¿æ¥ç”¨çŸ­è¿æ¥ä¼šæ›´çœä¸€äº›èµ„æºï¼Œå¦‚æœç”¨é•¿è¿æ¥ï¼Œè€Œä¸”åŒæ—¶æœ‰æˆåƒä¸Šä¸‡çš„ç”¨æˆ·ï¼Œå¦‚æœæ¯ä¸ªç”¨æˆ·éƒ½å ç”¨ä¸€ä¸ªè¿æ¥çš„è¯ï¼Œé‚£å¯æƒ³è€ŒçŸ¥å§ã€‚æ‰€ä»¥å¹¶å‘é‡å¤§ï¼Œä½†æ¯ä¸ªç”¨æˆ·æ— éœ€é¢‘ç¹æ“ä½œæƒ…å†µä¸‹éœ€ç”¨çŸ­è¿å¥½ã€‚</p>
</div>
  
  




| <a href="/blog/2015/05/20/chang-lian-jie-and-duan-lian-jie/#comments">æ›´å¤šè¯„è®º</a>

    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/5">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/3">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
    <h1>æ–‡ç« åˆ†ç±»</h1>
    <ul id="categories">
        <li class='category'><a href='/blog/categories/å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡/'>å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡ (2)</a></li>
<li class='category'><a href='/blog/categories/åº•å±‚å¼€å‘/'>åº•å±‚å¼€å‘ (4)</a></li>
<li class='category'><a href='/blog/categories/å¼€å‘å·¥å…·/'>å¼€å‘å·¥å…· (2)</a></li>
<li class='category'><a href='/blog/categories/æ€§èƒ½ç›¸å…³/'>æ€§èƒ½ç›¸å…³ (7)</a></li>
<li class='category'><a href='/blog/categories/æ€§èƒ½é—®é¢˜/'>æ€§èƒ½é—®é¢˜ (4)</a></li>
<li class='category'><a href='/blog/categories/æ–°æŠ€æœ¯/'>æ–°æŠ€æœ¯ (1)</a></li>
<li class='category'><a href='/blog/categories/æ¬¢è¿æ¥åˆ°iosæ¢¦å·¥å‚/'>æ¬¢è¿æ¥åˆ°iosæ¢¦å·¥å‚ (1)</a></li>
<li class='category'><a href='/blog/categories/ç¨‹åºå‘˜å¿…å¤‡/'>ç¨‹åºå‘˜å¿…å¤‡ (7)</a></li>
<li class='category'><a href='/blog/categories/é€‚é…é—®é¢˜/'>é€‚é…é—®é¢˜ (1)</a></li>
<li class='category'><a href='/blog/categories/é¢è¯•æ€»ç»“-æŠ€æœ¯/'>é¢è¯•æ€»ç»“ï¼‹æŠ€æœ¯ (1)</a></li>
<li class='category'><a href='/blog/categories/é¢è¯•æ±‡æ€»/'>é¢è¯•æ±‡æ€» (1)</a></li>
<li class='category'><a href='/blog/categories/é¡¹ç›®å®æˆ˜/'>é¡¹ç›®å®æˆ˜ (17)</a></li>
<li class='category'><a href='/blog/categories/é«˜çº§å¼€å‘/'>é«˜çº§å¼€å‘ (25)</a></li>

    </ul>
</section><section>
  <h1>æœ€æ–°æ–‡ç« </h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/12/11/an-quan-ji-zhi/">å®‰å…¨æœºåˆ¶</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/11/java/">çˆ¬è™«å¿…å¤‡-javaæŠ“åŒ…</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/11/pa-chong-bi-bei-phthonzhua-bao/">çˆ¬è™«å¿…å¤‡-PhthonæŠ“åŒ…</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/11/zhengze/">çˆ¬è™«å¿…å¤‡-æ­£åˆ™è¡¨è¾¾å¼æŠ“åŒ…</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/11/qinghuaci/">çˆ¬è™«å¿…å¤‡-é’èŠ±ç“·æŠ“åŒ…</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/al1020119">@al1020119</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'al1020119',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
<h1>æ‰«ä¸€æ‰«<abbr title="The word 'æ‰«ä¸€æ‰«' is a registered trademark of DENSO WAVE INCORPORATED. It applies only for the word 'æ‰«ä¸€æ‰«', not for image.">&trade;</abbr></h1>
<a href="http://al1020119.github.io/posts/4/index.html"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=http://al1020119.github.io/posts/4/index.html" alt="post-qrcode"></a></section>
<section>
    <h1>è®¿å®¢ç»Ÿè®¡</h1>
    <br/>
    <a href="http://s07.flagcounter.com/more/2SH"><img src="http://s07.flagcounter.com/count/2SH/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
</section><section>
    <h1>æ–°æµªå¾®åš</h1>
    <ul id="weibo">
        <li>
            
            <!-- åœ¨æ­¤æ’å…¥è·å¾—çš„å¾®åšç§€ä»£ç  -->
            <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=3288975567&verifier=20ffcedd&dpc=1"></iframe>
            
        </li>
    </ul>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - iCocos -
<span class="credit">Preview in <a href="http://al1020119.github.io">[æ›¹#é»]</a></span>
</p>

</footer>
  






<!--
--->



</body>
</html>
